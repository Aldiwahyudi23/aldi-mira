import{A as re}from"./AppLayout-gieJcwVc.js";import{I as oe,r as b,M as de,t as J,p as f,o as ue,k as O,g as k,w as o,d as e,c as C,b as A,l as x,s as T,z as l,f as d,x as r,D as ie}from"./vendor-D_AUDOEP.js";import{B as me}from"./BaseTable-BfA64rbO.js";import{B as V,a as P}from"./BaseModal-9V5i1c82.js";import{_ as ce}from"./TextInput-CECDkQeb.js";import{S as pe}from"./SelectInput-BCjCidYQ.js";import{_ as F}from"./AccountInput-ChwpvfZQ.js";import{_ as xe}from"./app-drKAwCSa.js";/* empty css            */const ge={class:"py-2 min-h-screen relative overflow-hidden"},be={class:"w-full px-3 sm:px-4 lg:px-6 relative z-10"},ve={class:"flex items-center justify-between"},ye={class:"flex items-center gap-2 md:gap-3"},fe={class:"text-lg md:text-xl"},ke={class:"font-medium text-sm md:text-base"},_e={class:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3 mb-4"},he={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-rose-100"},we={class:"text-center"},Ae={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},Be={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-blue-100"},Se={class:"text-center"},Ce={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},De={class:"text-xs text-gray-500 mt-1"},Me={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-green-100"},Te={class:"text-center"},Ve={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},Ee={class:"text-xs text-gray-500 mt-1"},je={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-purple-100"},Pe={class:"text-center"},Ue={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},Ie={class:"flex items-center gap-2"},Ne={class:"text-base md:text-lg"},$e={class:"font-medium text-gray-700 text-xs md:text-sm"},ze={class:"flex items-center gap-2"},He={class:"flex items-center gap-2"},Ke={class:"text-base md:text-lg"},qe={class:"flex items-center gap-2"},Je={class:"font-medium text-gray-700 text-xs md:text-sm"},Oe={key:1,class:"text-center mt-6"},Fe={class:"bg-white/80 backdrop-blur-md rounded-xl md:rounded-2xl shadow-lg p-6 md:p-8 border border-gray-100"},Le={class:"space-y-3 max-h-[50vh] md:max-h-[60vh] overflow-y-auto pr-2"},Ge={key:1,class:"p-2 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl md:rounded-2xl"},Re={class:"space-y-4"},Qe={key:0,class:"p-3 md:p-4 bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200 rounded-xl md:rounded-2xl"},We={class:"grid grid-cols-1 xs:grid-cols-2 gap-3 md:gap-4 text-xs md:text-sm"},Xe={class:"font-medium text-gray-800 truncate"},Ye={class:"font-medium text-gray-800"},Ze={class:"font-bold text-green-700"},et={class:"font-medium text-gray-800"},tt={class:"space-y-4"},at={key:0,class:"p-3 md:p-4 bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200 rounded-xl md:rounded-2xl"},st={class:"grid grid-cols-1 xs:grid-cols-2 gap-3 md:gap-4 text-xs md:text-sm"},nt={class:"font-medium text-gray-800 truncate"},lt={class:"font-medium text-gray-800"},rt={class:"font-bold text-green-700"},ot={class:"font-medium text-gray-800"},dt={class:"xs:col-span-2"},ut={class:"font-medium text-gray-800"},it={__name:"Index",setup(mt){const U=oe(),i=U.props.auth.user,L=i?.partner?.name??"Pasangan",I=`${i?.name??""} üíï ${L}`,v=b([]),D=b(!1),M=b(!1),y=b(!1),_=b(!1),B=b(!1),p=b(null),u=b(null),m=b(null),c=b(null);de(()=>U.props.flash,a=>{(a.success||a.error)&&(c.value={message:a.success||a.error,type:a.type||(a.success?"success":"error")},setTimeout(()=>{c.value=null},5e3))},{immediate:!0});const n=J({name:"",type:"personal",current_balance:0}),g=J({current_balance:0}),G=[{key:"name",label:"Nama Akun",icon:"üè¶",sortable:!0},{key:"type",label:"Tipe",type:"badge",icon:"üë•",sortable:!0,badgeVariant:"romantic"},{key:"current_balance",label:"Saldo",icon:"üí∞",sortable:!0,type:"currency"},{key:"user.name",label:"Dibuat Oleh",icon:"üë§",sortable:!0},{key:"created_at",label:"Dibuat",icon:"üìÖ",sortable:!0,type:"date"}],R=[{value:"personal",label:"üë§ Personal"},{value:"joint",label:"üë• Joint"}],S=async()=>{D.value=!0;try{const a=await axios.get(route("master-data.accounts.index"));v.value=a.data.accounts||a.data}catch(a){console.error("Error loading accounts:",a),c.value={message:"Gagal memuat data akun",type:"error"}}finally{D.value=!1}},N=()=>{p.value=null,n.reset(),n.type="personal",n.current_balance=0,y.value=!0},$=a=>{if(a.user_id!==i.id){c.value={message:"Anda hanya dapat mengedit akun yang Anda buat",type:"error"};return}p.value=a,n.name=a.name,n.type=a.type,n.current_balance=a.current_balance,y.value=!0},z=a=>{if(a.user_id!==i.id){c.value={message:"Anda hanya dapat menghapus akun yang Anda buat",type:"error"};return}u.value=a,_.value=!0},Q=a=>{if(a.user_id!==i.id){c.value={message:"Anda hanya dapat mengubah saldo akun yang Anda buat",type:"error"};return}m.value=a,g.current_balance=a.current_balance,B.value=!0},W=()=>{p.value?n.put(route("master-data.accounts.update",p.value.id),{preserveScroll:!0,onSuccess:()=>{y.value=!1,S(),n.reset(),p.value=null},onError:a=>{console.error("Update error:",a)}}):n.post(route("master-data.accounts.store"),{preserveScroll:!0,onSuccess:()=>{y.value=!1,S(),n.reset()},onError:a=>{console.error("Create error:",a)}})},X=()=>{m.value&&g.put(route("master-data.accounts.update-balance",m.value.id),{preserveScroll:!0,onSuccess:()=>{B.value=!1,S(),g.reset(),m.value=null},onError:a=>{console.error("Balance update error:",a)}})},Y=()=>{u.value&&(M.value=!0,ie.delete(route("master-data.accounts.destroy",u.value.id),{preserveScroll:!0,onSuccess:()=>{_.value=!1,S(),u.value=null,M.value=!1},onError:a=>{console.error("Delete error:",a),_.value=!1,M.value=!1}}))},Z=()=>{y.value=!1,p.value=null,n.clearErrors(),n.reset()},ee=()=>{B.value=!1,m.value=null,g.clearErrors(),g.reset()},E=a=>({personal:"Personal",joint:"Joint"})[a]||a,te=a=>({personal:"üë§",joint:"üë•"})[a]||"üè¶",h=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),j=a=>new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),H=f(()=>v.value.filter(a=>a.type==="personal")),K=f(()=>v.value.filter(a=>a.type==="joint")),ae=f(()=>v.value.filter(a=>a.user_id===i.id));f(()=>v.value.filter(a=>a.user_id!==i.id&&a.type==="joint"));const se=f(()=>v.value.reduce((a,t)=>a+parseFloat(t.current_balance),0)),ne=f(()=>H.value.reduce((a,t)=>a+parseFloat(t.current_balance),0)),le=f(()=>K.value.reduce((a,t)=>a+parseFloat(t.current_balance),0)),w=a=>a.user_id===i.id;return ue(()=>{S()}),(a,t)=>(k(),O(re,{title:"Kelola Akun"},{header:o(()=>[e("div",{class:"flex flex-col md:flex-row md:items-center justify-between gap-2 md:gap-0"},[e("h2",{class:"font-semibold text-xl md:text-2xl text-gray-800 leading-tight flex items-center gap-2"}," üè¶ Kelola Akun "+l(I)),t[9]||(t[9]=e("span",{class:"text-xs md:text-sm text-gray-500 italic text-center md:text-right"}," Atur akun untuk mengelola keuangan bersama üíû ",-1))])]),default:o(()=>[e("div",ge,[e("div",be,[c.value?(k(),C("div",{key:0,class:T(["mb-4 md:mb-6 p-3 md:p-4 rounded-xl md:rounded-2xl border backdrop-blur-sm transition-all duration-300",{"bg-green-50 border-green-200 text-green-800":c.value.type==="success","bg-red-50 border-red-200 text-red-800":c.value.type==="error"}])},[e("div",ve,[e("div",ye,[e("span",fe,l(c.value.type==="success"?"‚úÖ":"‚ö†Ô∏è"),1),e("span",ke,l(c.value.message),1)]),e("button",{onClick:t[0]||(t[0]=s=>c.value=null),class:"text-gray-500 hover:text-gray-700 transition-colors text-lg"}," ‚úï ")])],2)):A("",!0),t[43]||(t[43]=e("div",{class:"text-center mb-4"},[e("h1",{class:"text-xl md:text-2xl lg:text-3xl font-extrabold text-rose-600 drop-shadow-md mb-2 md:mb-3"}," Kelola Akun Keuangan "),e("p",{class:"text-gray-600 text-xs md:text-sm leading-relaxed px-2"},[d(" Kelola semua akun keuangan "),e("span",{class:"text-blue-500 font-semibold"},"personal"),d(" dan "),e("span",{class:"text-green-500 font-semibold"},"joint"),d(" kita berdua. Pantau saldo dan atur akses untuk keuangan yang lebih transparan üí´ ")])],-1)),e("div",_e,[e("div",he,[e("div",we,[t[10]||(t[10]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-rose-400 to-pink-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"üí∞")],-1)),e("h3",Ae,l(h(se.value)),1),t[11]||(t[11]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Total Saldo",-1))])]),e("div",Be,[e("div",Se,[t[12]||(t[12]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"üë§")],-1)),e("h3",Ce,l(H.value.length),1),t[13]||(t[13]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Personal",-1)),e("p",De,l(h(ne.value)),1)])]),e("div",Me,[e("div",Te,[t[14]||(t[14]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-green-400 to-emerald-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"üë•")],-1)),e("h3",Ve,l(K.value.length),1),t[15]||(t[15]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Joint",-1)),e("p",Ee,l(h(le.value)),1)])]),e("div",je,[e("div",Pe,[t[16]||(t[16]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-purple-400 to-pink-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"üìä")],-1)),e("h3",Ue,l(ae.value.length),1),t[17]||(t[17]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Akun Saya",-1))])])]),x(me,{title:"Data Akun",description:"Kelola semua akun keuangan kita berdua",columns:G,data:v.value,loading:D.value,"show-actions":!0,pagination:!0,"items-per-page":10,onCreate:N,onEdit:$,onDelete:z},{"column-type":o(({item:s})=>[e("div",Ie,[e("span",Ne,l(te(s.type)),1),e("span",$e,l(E(s.type)),1)])]),"column-current_balance":o(({item:s})=>[e("div",ze,[e("span",{class:T(["text-base md:text-lg",s.current_balance>=0?"text-green-600":"text-red-600"])},l(s.current_balance>=0?"üí∞":"üí∏"),3),e("span",{class:T(["font-bold text-gray-800 text-xs md:text-sm",s.current_balance>=0?"text-green-700":"text-red-700"])},l(h(s.current_balance)),3)])]),"column-user.name":o(({item:s})=>[e("div",He,[e("span",Ke,l(s.user_id===r(i).id?"üë§":"üë•"),1),e("span",{class:T(["font-medium text-gray-700 text-xs md:text-sm",s.user_id===r(i).id?"text-blue-600":"text-green-600"])},l(s.user_id===r(i).id?"Saya":s.user?.name||"Partner"),3)])]),"column-created_at":o(({item:s})=>[e("div",qe,[t[18]||(t[18]=e("span",{class:"text-base md:text-lg"},"üìÖ",-1)),e("span",Je,l(j(s.created_at)),1)])]),actions:o(({item:s})=>[x(V,{onClick:q=>Q(s),variant:"primary",size:"sm",class:"!px-2 !py-1 text-xs",disabled:!w(s),title:w(s)?"Update saldo":"Hanya dapat mengubah saldo akun yang Anda buat"},{icon:o(()=>[...t[19]||(t[19]=[d("üí∞",-1)])]),default:o(()=>[t[20]||(t[20]=e("span",{class:"hidden xs:inline"},"Saldo",-1))]),_:1},8,["onClick","disabled","title"]),x(V,{onClick:q=>$(s),variant:"secondary",size:"sm",class:"!px-2 !py-1 text-xs",disabled:!w(s),title:w(s)?"Edit akun":"Hanya dapat mengedit akun yang Anda buat"},{icon:o(()=>[...t[21]||(t[21]=[d("‚úèÔ∏è",-1)])]),default:o(()=>[t[22]||(t[22]=e("span",{class:"hidden xs:inline"},"Edit",-1))]),_:1},8,["onClick","disabled","title"]),x(V,{onClick:q=>z(s),variant:"danger",size:"sm",class:"!px-2 !py-1 text-xs",disabled:!w(s),title:w(s)?"Hapus akun":"Hanya dapat menghapus akun yang Anda buat"},{icon:o(()=>[...t[23]||(t[23]=[d("üóëÔ∏è",-1)])]),default:o(()=>[t[24]||(t[24]=e("span",{class:"hidden xs:inline"},"Hapus",-1))]),_:1},8,["onClick","disabled","title"])]),_:1},8,["data","loading"]),v.value.length===0&&!D.value?(k(),C("div",Oe,[e("div",Fe,[t[27]||(t[27]=e("div",{class:"text-4xl md:text-6xl mb-4"},"üè¶",-1)),t[28]||(t[28]=e("h3",{class:"text-lg md:text-xl font-bold text-gray-800 mb-2"},"Belum ada akun",-1)),e("p",{class:"text-gray-600 mb-6 text-sm md:text-base max-w-md mx-auto"}," Mulai dengan membuat akun pertama untuk mengelola keuangan "+l(I)),x(V,{onClick:N,class:"px-4 py-2 md:px-6 md:py-3 text-sm md:text-base"},{icon:o(()=>[...t[25]||(t[25]=[d("‚ûï",-1)])]),default:o(()=>[t[26]||(t[26]=d(" Buat Akun Pertama ",-1))]),_:1})])])):A("",!0),x(P,{show:y.value,"onUpdate:show":t[4]||(t[4]=s=>y.value=s),title:p.value?"Edit Akun":"Tambah Akun Baru",description:p.value?"Perbarui informasi akun keuangan kita":"Tambahkan akun baru untuk mengelola keuangan bersama",icon:p.value?"‚úèÔ∏è":"‚ûï","confirm-text":p.value?"Perbarui":"Simpan","confirm-loading":r(n).processing,onConfirm:W,onClose:Z,size:"lg"},{default:o(()=>[e("div",Le,[x(ce,{modelValue:r(n).name,"onUpdate:modelValue":t[1]||(t[1]=s=>r(n).name=s),label:"Nama Akun",placeholder:"Contoh: BCA Pribadi, Mandiri Bersama, Kas Tunai",error:r(n).errors.name,icon:"üè¶",required:"",disabled:r(n).processing},null,8,["modelValue","error","disabled"]),x(pe,{modelValue:r(n).type,"onUpdate:modelValue":t[2]||(t[2]=s=>r(n).type=s),label:"Tipe Akun",placeholder:"Pilih tipe akun",options:R,error:r(n).errors.type,icon:"üë•",required:"",disabled:r(n).processing},null,8,["modelValue","error","disabled"]),p.value?A("",!0):(k(),O(F,{key:0,modelValue:r(n).current_balance,"onUpdate:modelValue":t[3]||(t[3]=s=>r(n).current_balance=s),label:"Saldo Awal",placeholder:"Masukkan saldo awal",error:r(n).errors.current_balance,icon:"üí∞","account-type":"account_number",required:"",disabled:r(n).processing},null,8,["modelValue","error","disabled"])),t[30]||(t[30]=e("div",{class:"p-3 md:p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl md:rounded-2xl border border-blue-200"},[e("p",{class:"text-xs md:text-sm text-gray-700 flex items-start gap-2"},[e("span",{class:"text-base md:text-lg mt-0.5"},"üí°"),e("span",null,[e("strong",{class:"block"},"Informasi:"),d(" ‚Ä¢ "),e("strong",null,"Personal:"),d(" Hanya Anda yang bisa melihat dan mengelola"),e("br"),d(" ‚Ä¢ "),e("strong",null,"Joint:"),d(" Bisa dilihat dan digunakan oleh Anda dan partner ")])])],-1)),r(n).hasErrors?(k(),C("div",Ge,[...t[29]||(t[29]=[e("p",{class:"text-xs md:text-sm text-red-600 flex items-center gap-2"},[e("span",null,"‚ö†Ô∏è"),d(" Terdapat kesalahan dalam pengisian form. ")],-1)])])):A("",!0)])]),_:1},8,["show","title","description","icon","confirm-text","confirm-loading"]),x(P,{show:B.value,"onUpdate:show":t[6]||(t[6]=s=>B.value=s),title:"Update Saldo Akun",description:m.value?`Update saldo untuk akun ${m.value.name}`:"Update saldo akun",icon:"üí∞","confirm-text":"Update Saldo","cancel-text":"Batal","confirm-loading":r(g).processing,onConfirm:X,onClose:ee,size:"md"},{default:o(()=>[e("div",Re,[x(F,{modelValue:r(g).current_balance,"onUpdate:modelValue":t[5]||(t[5]=s=>r(g).current_balance=s),label:"Saldo Baru",placeholder:"Masukkan saldo baru",error:r(g).errors.current_balance,icon:"üí∞","account-type":"account_number",required:"",disabled:r(g).processing},null,8,["modelValue","error","disabled"]),m.value?(k(),C("div",Qe,[t[35]||(t[35]=e("h4",{class:"font-semibold text-gray-800 text-sm md:text-base mb-2"},"Detail Akun:",-1)),e("div",We,[e("div",null,[t[31]||(t[31]=e("span",{class:"text-gray-600"},"Nama:",-1)),e("p",Xe,l(m.value.name),1)]),e("div",null,[t[32]||(t[32]=e("span",{class:"text-gray-600"},"Tipe:",-1)),e("p",Ye,l(E(m.value.type)),1)]),e("div",null,[t[33]||(t[33]=e("span",{class:"text-gray-600"},"Saldo Saat Ini:",-1)),e("p",Ze,l(h(m.value.current_balance)),1)]),e("div",null,[t[34]||(t[34]=e("span",{class:"text-gray-600"},"Dibuat:",-1)),e("p",et,l(j(m.value.created_at)),1)])])])):A("",!0)])]),_:1},8,["show","description","confirm-loading"]),x(P,{show:_.value,"onUpdate:show":t[7]||(t[7]=s=>_.value=s),title:"Hapus Akun",description:u.value?`Apakah Anda yakin ingin menghapus akun ${u.value.name}?`:"Apakah Anda yakin ingin menghapus akun ini?",icon:"üóëÔ∏è","confirm-text":"Hapus","cancel-text":"Batal","confirm-variant":"danger","confirm-loading":M.value,onConfirm:Y,onClose:t[8]||(t[8]=s=>_.value=!1)},{default:o(()=>[e("div",tt,[t[42]||(t[42]=e("div",{class:"p-3 md:p-4 bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-xl md:rounded-2xl"},[e("p",{class:"text-xs md:text-sm text-red-600 flex items-start gap-2"},[e("span",{class:"text-base md:text-lg mt-0.5"},"‚ö†Ô∏è"),e("span",null,[e("strong",{class:"block"},"Tindakan ini tidak dapat dibatalkan!"),d(" Semua data transaksi yang terkait dengan akun ini akan terpengaruh. ")])])],-1)),u.value?(k(),C("div",at,[t[41]||(t[41]=e("h4",{class:"font-semibold text-gray-800 text-sm md:text-base mb-2"},"Detail Akun:",-1)),e("div",st,[e("div",null,[t[36]||(t[36]=e("span",{class:"text-gray-600"},"Nama:",-1)),e("p",nt,l(u.value.name),1)]),e("div",null,[t[37]||(t[37]=e("span",{class:"text-gray-600"},"Tipe:",-1)),e("p",lt,l(E(u.value.type)),1)]),e("div",null,[t[38]||(t[38]=e("span",{class:"text-gray-600"},"Saldo:",-1)),e("p",rt,l(h(u.value.current_balance)),1)]),e("div",null,[t[39]||(t[39]=e("span",{class:"text-gray-600"},"Dibuat:",-1)),e("p",ot,l(j(u.value.created_at)),1)]),e("div",dt,[t[40]||(t[40]=e("span",{class:"text-gray-600"},"Dibuat Oleh:",-1)),e("p",ut,l(u.value.user_id===r(i).id?"Saya":u.value.user?.name||"Partner"),1)])])])):A("",!0)])]),_:1},8,["show","description","confirm-loading"])])])]),_:1}))}},_t=xe(it,[["__scopeId","data-v-55e45902"]]);export{_t as default};
