import{Q as $e,M as H,p as j,c as d,g as i,d as e,b as c,F,y as A,l as g,w as u,f as r,z as o,I as Me,r as k,t as Ue,o as Fe,k as le,s as V,K as ye,x as m,m as $,O as K,S as Ae,P as Le,C as ze,D as be}from"./vendor-_1bMFsGO.js";import{A as qe}from"./AppLayout-B-FfRgLz.js";import{B as ve}from"./BaseTable-C_vaDzBU.js";import{S as re,B as I,a as oe}from"./SelectInput--H5tB_dZ.js";import{_ as ne}from"./AccountInput-BwCpK7sc.js";import{_ as _e}from"./TextInput-CfF7StUs.js";import{_ as Oe}from"./TextAreaInput-CuZUnRRb.js";/* empty css                                                                         */import{_ as Ke}from"./app-DzK-MRpb.js";/* empty css            */const Ee={class:"bg-white rounded-xl md:rounded-2xl shadow-sm border border-gray-100 p-3 md:p-4 mb-4"},Re={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 md:gap-4"},He={class:"flex flex-col md:flex-row gap-2 md:gap-2 w-full md:w-auto"},Je={class:"flex items-end mt-2 md:mt-0"},Ne={key:0,class:"mt-2 md:mt-3 pt-2 md:pt-3 border-t border-gray-100"},Ge={class:"flex items-center gap-1 md:gap-2 flex-wrap"},Qe=["onClick"],We={__name:"BaseFilterItem",props:{filters:{type:Object,required:!0},options:{type:Object,required:!0}},emits:["update:filters"],setup(b,{emit:J}){const D=b,N=J,v=$e({...D.filters});H(()=>D.filters,n=>{Object.assign(v,n)},{deep:!0});const L=(n,p)=>{v[n]=p,N("update:filters",{...v})},B=j(()=>Object.values(v).some(n=>n!=="")),M=j(()=>Object.fromEntries(Object.entries(v).filter(([n,p])=>p!==""))),E=(n,p)=>D.options[n]?.options.find(w=>w.value===p)?.label||p,S=n=>{L(n,"")},f=()=>{const n={};Object.keys(v).forEach(p=>n[p]=""),Object.assign(v,n),N("update:filters",{...n})};return(n,p)=>(i(),d("div",Ee,[e("div",Re,[p[2]||(p[2]=e("div",{class:"flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"🔍"),e("h3",{class:"font-semibold text-gray-800 text-sm md:text-base"},"Filter Data")],-1)),e("div",He,[(i(!0),d(F,null,A(b.options,(h,w)=>(i(),d("div",{key:w,class:"w-full md:min-w-[150px] md:flex-1"},[g(re,{modelValue:v[w],"onUpdate:modelValue":[U=>v[w]=U,U=>L(w,U)],label:h.label,placeholder:h.placeholder||"Pilih "+h.label,options:h.options||[],icon:h.icon||"💖",error:h.error},null,8,["modelValue","onUpdate:modelValue","label","placeholder","options","icon","error"])]))),128)),e("div",Je,[g(I,{onClick:f,variant:"secondary",size:"xs",class:"h-[38px] md:h-[42px] w-full md:w-auto text-xs",disabled:!B.value},{icon:u(()=>[...p[0]||(p[0]=[r("🔄",-1)])]),default:u(()=>[p[1]||(p[1]=r(" Reset ",-1))]),_:1},8,["disabled"])])])]),B.value?(i(),d("div",Ne,[e("div",Ge,[p[3]||(p[3]=e("span",{class:"text-xs md:text-sm text-gray-600"},"Filter aktif:",-1)),(i(!0),d(F,null,A(M.value,(h,w)=>(i(),d("span",{key:w,class:"inline-flex items-center gap-1 px-2 py-1 bg-pink-100 text-pink-800 rounded-full text-xs font-medium"},[r(o(E(w,h))+" ",1),e("button",{onClick:U=>S(w),class:"hover:text-pink-900 transition-colors text-xs"}," × ",8,Qe)]))),128))])])):c("",!0)]))}},Xe={class:"py-2 min-h-screen relative overflow-hidden"},Ye={class:"w-full px-3 sm:px-4 lg:px-6 relative z-10"},Ze={class:"flex items-center justify-between"},et={class:"flex items-center gap-2 md:gap-3"},tt={class:"text-lg md:text-xl"},st={class:"font-medium text-sm md:text-base"},at={class:"text-center mb-4"},lt={class:"text-gray-600 text-xs md:text-sm leading-relaxed px-2"},ot={class:"text-blue-500 font-semibold"},nt={class:"relative overflow-hidden bg-gradient-to-br from-pink-50 via-white to-blue-50 rounded-xl md:rounded-2xl border border-pink-100/40 shadow-md p-4 mb-4"},rt={class:"relative grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6"},it={class:"flex items-start gap-2 md:gap-3"},dt={class:"text-sm md:text-base font-medium text-gray-800 tracking-wide"},mt={class:"text-xs text-gray-500 mt-1"},ut={class:"italic"},pt={class:"flex items-start gap-2 md:gap-3"},ct={class:"text-sm md:text-base font-medium text-gray-800"},xt={class:"flex items-start gap-2 md:gap-3"},gt={class:"text-sm md:text-base font-medium text-gray-800 capitalize"},yt={class:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4"},bt={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-rose-100"},vt={class:"text-center"},_t={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},ft={key:0,class:"text-xs text-rose-500 mt-1"},kt={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-blue-100"},ht={class:"text-center"},wt={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},jt={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-orange-100"},St={class:"text-center"},Ct={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},It={key:0,class:"text-xs text-gray-500 mt-1"},Pt={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-green-100"},Vt={class:"text-center"},Dt={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},Bt={class:"grid grid-cols-4 md:grid-cols-5 gap-2 mb-4"},Tt=["onClick"],$t={class:"text-xl md:text-2xl mb-1"},Mt={class:"text-base md:text-lg font-bold text-gray-800"},Ut={class:"text-xs text-gray-600 capitalize"},Ft={key:0,class:"text-xs text-pink-500 mt-1"},At={key:1,class:"mb-6 md:mb-8"},Lt={class:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl md:rounded-2xl p-4 md:p-6 border border-green-200 mb-4"},zt={class:"text-lg md:text-xl font-bold text-gray-800 flex items-center gap-2 md:gap-3 mb-2"},qt={class:"text-xs font-normal text-gray-600 bg-white px-2 py-1 rounded-full"},Ot={class:"text-gray-600 text-sm"},Kt={class:"font-bold text-blue-600"},Et={class:"flex items-center gap-2"},Rt={class:"font-medium text-gray-700 text-xs md:text-sm"},Ht={class:"flex items-center gap-2"},Jt={class:"text-base md:text-lg"},Nt={class:"flex items-center gap-2"},Gt={class:"font-bold text-gray-800 text-xs md:text-sm text-blue-700"},Qt={class:"flex items-center gap-2"},Wt={class:"font-bold text-gray-800 text-xs md:text-sm text-orange-700"},Xt={class:"flex items-center gap-2"},Yt={class:"space-y-1"},Zt={class:"flex justify-between text-xs"},es={class:"font-medium"},ts={class:"text-xs"},ss={class:"w-full bg-gray-200 rounded-full h-2"},as={class:"flex items-center gap-2"},ls={class:"text-base md:text-lg"},os={class:"flex items-center gap-2"},ns={class:"font-medium text-gray-700 text-xs md:text-sm"},rs={key:2,class:"mb-6 md:mb-8"},is={class:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl md:rounded-2xl p-4 md:p-6 border border-blue-200 mb-4"},ds={class:"text-lg md:text-xl font-bold text-gray-800 flex items-center gap-2 md:gap-3 mb-2"},ms={class:"text-xs font-normal text-gray-600 bg-white px-2 py-1 rounded-full"},us={class:"text-gray-600 text-sm"},ps={class:"font-bold text-green-600"},cs={class:"flex items-center gap-2"},xs={class:"text-base md:text-lg"},gs={class:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700"},ys={class:"flex items-center gap-2"},bs={class:"font-bold text-gray-800 text-xs md:text-sm text-blue-700"},vs={class:"flex items-center gap-2"},_s={class:"font-bold text-gray-800 text-xs md:text-sm text-green-700"},fs={class:"flex items-center gap-2"},ks={class:"font-medium text-gray-700 text-xs md:text-sm"},hs={key:3,class:"text-center mt-6"},ws={class:"bg-white/80 backdrop-blur-md rounded-xl md:rounded-2xl shadow-lg p-6 md:p-8 border border-gray-100"},js={class:"text-lg md:text-xl font-bold text-gray-800 mb-2"},Ss={class:"text-gray-600 mb-6 text-sm md:text-base max-w-md mx-auto"},Cs={key:0},Is={key:1},Ps={class:"flex gap-2 md:gap-3 justify-center"},Vs={key:4,class:"text-center mt-6"},Ds={class:"bg-white/80 backdrop-blur-md rounded-xl md:rounded-2xl shadow-lg p-6 md:p-8 border border-gray-100"},Bs={class:"text-gray-600 mb-6 text-sm md:text-base max-w-md mx-auto"},Ts={class:"space-y-4 md:space-y-6 max-h-[50vh] md:max-h-[60vh] overflow-y-auto pr-2"},$s={class:"space-y-3 md:space-y-4"},Ms={class:"flex items-center justify-between"},Us={key:0,class:"flex gap-2"},Fs={key:0},As={class:"text-xs text-gray-500 mt-1"},Ls={key:1},zs={key:0,class:"text-xs text-gray-500 mt-1"},qs={key:0,class:"space-y-3 md:space-y-4"},Os={class:"grid grid-cols-2 gap-3 md:gap-4"},Ks={class:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl md:rounded-2xl p-3 md:p-4 border border-green-200"},Es={class:"flex items-center justify-between"},Rs={class:"text-xs text-gray-500"},Hs={class:"text-right"},Js={class:"text-lg md:text-xl font-bold text-green-600"},Ns={key:1,class:"grid grid-cols-1 gap-3 md:gap-4"},Gs={key:2,class:"space-y-3 md:space-y-4"},Qs={class:"bg-gradient-to-r from-pink-50 to-rose-50 rounded-xl md:rounded-2xl p-3 md:p-4 border border-pink-100"},Ws={class:"space-y-3 md:space-y-4"},Xs={key:0,class:"space-y-2 md:space-y-3"},Ys={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},Zs={class:"text-base md:text-lg"},ea={class:"flex gap-2 md:gap-4"},ta=["value","onUpdate:modelValue"],sa={class:"text-xs md:text-sm font-medium text-gray-700"},aa={key:1,class:"space-y-2"},la={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},oa={class:"text-base md:text-lg"},na=["onUpdate:modelValue"],ra={value:""},ia=["value"],da={key:2,class:"space-y-2"},ma={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},ua={class:"text-base md:text-lg"},pa=["type","onUpdate:modelValue","placeholder"],ca={key:3,class:"space-y-2"},xa={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},ga={class:"text-base md:text-lg"},ya=["onUpdate:modelValue","placeholder"],ba={key:4,class:"space-y-2"},va={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},_a={class:"text-base md:text-lg"},fa=["onUpdate:modelValue","placeholder"],ka={key:5,class:"space-y-2"},ha={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},wa={class:"text-base md:text-lg"},ja=["onUpdate:modelValue"],Sa={key:3,class:"p-2 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl md:rounded-2xl"},Ca={key:0,class:"space-y-4 md:space-y-6"},Ia={class:"bg-gradient-to-r from-pink-50 to-rose-50 rounded-xl md:rounded-2xl p-4 md:p-6 border border-pink-100"},Pa={class:"grid grid-cols-2 gap-3 md:gap-4"},Va={class:"space-y-1"},Da={class:"font-medium text-gray-800 flex items-center gap-2 text-sm md:text-base"},Ba={class:"space-y-1"},Ta={class:"font-medium text-gray-800 flex items-center gap-2 text-sm md:text-base"},$a={class:"space-y-1"},Ma={class:"font-bold text-blue-700 text-base md:text-lg"},Ua={key:0,class:"text-xs text-gray-500"},Fa={class:"space-y-1"},Aa={class:"font-bold text-orange-700 text-base md:text-lg"},La={key:0,class:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl md:rounded-2xl p-4 md:p-6 border border-indigo-100"},za={class:"grid grid-cols-2 gap-3 md:gap-4"},qa={class:"space-y-1"},Oa={class:"font-bold text-gray-800 text-base md:text-lg"},Ka={class:"space-y-1"},Ea={class:"font-bold text-green-600 text-base md:text-lg"},Ra={class:"col-span-2 space-y-1"},Ha={class:"bg-white/70 rounded-lg md:rounded-xl p-2 md:p-3 border border-gray-200"},Ja={class:"flex items-center justify-between"},Na={class:"text-xs text-gray-600"},Ga={class:"font-bold text-blue-600 text-base md:text-lg"},Qa={class:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl md:rounded-2xl p-4 md:p-6 border border-blue-100"},Wa={class:"space-y-2 md:space-y-3"},Xa={class:"flex justify-between text-xs md:text-sm"},Ya={class:"font-medium text-gray-700"},Za={class:"text-gray-600"},el={class:"w-full bg-white rounded-full h-3 md:h-4 shadow-inner border"},tl={class:"flex justify-between text-xs text-gray-500"},sl={key:0,class:"text-red-500 font-semibold"},al={key:1,class:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl md:rounded-2xl p-4 md:p-6 border border-green-100"},ll={class:"text-gray-700 leading-relaxed bg-white/50 p-3 md:p-4 rounded-lg md:rounded-xl text-sm"},ol={key:2,class:"bg-gradient-to-r from-purple-50 to-violet-50 rounded-xl md:rounded-2xl p-4 md:p-6 border border-purple-100"},nl={class:"space-y-3 md:space-y-4"},rl={key:0,class:"flex items-center justify-between p-2 md:p-3 bg-white rounded-lg md:rounded-xl border"},il={class:"font-medium text-gray-800 flex items-center gap-2 text-sm"},dl={key:0},ml={key:1},ul={key:1,class:"space-y-2 md:space-y-3"},pl={key:0,class:"flex items-center justify-between p-2 md:p-3 bg-white rounded-lg md:rounded-xl border"},cl={key:1,class:"p-2 md:p-3 bg-white rounded-lg md:rounded-xl border"},xl={class:"flex items-center justify-between mb-2"},gl={class:"text-xs text-gray-500 break-all"},yl={key:2,class:"space-y-2 md:space-y-3"},bl={key:0,class:"p-2 md:p-3 bg-white rounded-lg md:rounded-xl border"},vl={class:"flex items-center justify-between mb-2"},_l={class:"text-xs text-gray-500 break-all"},fl={key:1,class:"p-2 md:p-3 bg-white rounded-lg md:rounded-xl border"},kl={class:"text-xs text-gray-700"},hl={class:"grid grid-cols-2 gap-2 md:gap-3"},wl={key:0,class:"p-2 md:p-3 bg-white rounded-lg md:rounded-xl border text-center"},jl={class:"text-xs text-gray-500 block capitalize"},Sl={class:"font-medium text-gray-800 text-sm"},Cl={key:3,class:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-xl md:rounded-2xl p-4 md:p-6 border border-orange-100"},Il={class:"grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-3"},Pl={class:"text-xs text-gray-500 block capitalize mb-1"},Vl={class:"font-medium text-gray-800 text-xs md:text-sm"},Dl={class:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl md:rounded-2xl p-4 md:p-6 border border-gray-100"},Bl={class:"grid grid-cols-2 gap-3 md:gap-4"},Tl={class:"text-center p-2 md:p-3 bg-white rounded-lg md:rounded-xl border"},$l={class:"font-medium text-gray-800 text-sm"},Ml={class:"text-center p-2 md:p-3 bg-white rounded-lg md:rounded-xl border"},Ul={class:"font-medium text-gray-800 text-sm"},Fl={class:"space-y-3 md:space-y-4"},Al={key:0,class:"p-3 md:p-4 bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200 rounded-xl md:rounded-2xl"},Ll={class:"grid grid-cols-1 xs:grid-cols-2 gap-3 md:gap-4 text-xs md:text-sm"},zl={class:"font-medium text-gray-800 truncate"},ql={class:"font-medium text-gray-800"},Ol={class:"font-bold text-blue-700"},Kl={class:"font-bold text-orange-700"},El={class:"font-medium text-gray-800"},Rl={class:"font-medium text-gray-800"},Hl={__name:"Index",props:{items:Array,project:Object},setup(b){const J=Me();J.props.auth.user;const D=k([]),N=k({}),v=k(!1),L=k(!1),B=k(!1),M=k(!1),E=k(!1),S=k(null),f=k(null),n=k(null),p=k(null),h=j(()=>["goods","material"].includes(l.item_type)),w=j(()=>{if(!h.value)return l.planned_amount;const a=parseFloat(l.details.quantity)||0,t=parseFloat(l.details.unit_price)||0;return a*t}),U=()=>{h.value&&(l.planned_amount=w.value)};k([]);const z=k(!1),C=k([]),G=j(()=>C.value&&C.value.length>0),te=j(()=>z.value||!G.value),_=k({item_type:"",status:"",item_category:""});H(()=>J.props.flash,a=>{(a.success||a.error)&&(p.value={message:a.success||a.error,type:a.type||(a.success?"success":"error")},setTimeout(()=>{p.value=null},5e3))},{immediate:!0});const Q=async()=>{try{console.log("Loading categories for project:",T.project.id);const a=await axios.get(route("projects.items.api.categories",{project:T.project.id}));console.log("Categories API response:",a.data),a.data&&a.data.success?C.value=a.data.categories||[]:Array.isArray(a.data)?C.value=a.data:a.data&&Array.isArray(a.data.categories)?C.value=a.data.categories:(console.warn("Unexpected categories response format:",a.data),C.value=[]),console.log("Final available categories:",C.value)}catch(a){console.error("Error loading categories:",a),a.response&&(console.error("Response status:",a.response.status),console.error("Response data:",a.response.data)),C.value=[]}},l=Ue({item_type:"goods",item_category:"",name:"",description:"",planned_amount:0,actual_spent:0,status:"needed",details:{}}),T=b,ie=[{value:"goods",label:"🛍️ Barang"},{value:"service",label:"👨‍💼 Jasa"},{value:"document",label:"📄 Dokumen"},{value:"task",label:"✅ Tugas"},{value:"material",label:"🏗️ Material"}],fe=[{value:"needed",label:"⏳ Diperlukan"},{value:"in_progress",label:"🚧 Dalam Proses"},{value:"ready",label:"📦 Siap"},{value:"complete",label:"✅ Selesai"},{value:"cancelled",label:"❌ Dibatalkan"}],ke=[{value:"online",label:"🛒 Beli Online"},{value:"store",label:"🏪 Beli di Toko"}],W={shopee:{name:"Shopee",icon:"🟠",color:"text-orange-500"},tokopedia:{name:"Tokopedia",icon:"🟢",color:"text-green-500"},lazada:{name:"Lazada",icon:"🔵",color:"text-blue-500"},blibli:{name:"Blibli",icon:"🔴",color:"text-red-500"},bukalapak:{name:"Bukalapak",icon:"🟡",color:"text-yellow-500"},other:{name:"Lainnya",icon:"🛒",color:"text-gray-500"}},he=[{key:"name",label:"Nama Item",icon:"📝",sortable:!0},{key:"item_type",label:"Jenis",icon:"🏷️",sortable:!0,type:"badge"},{key:"item_category",label:"Kategori",icon:"📂",sortable:!0},{key:"planned_amount",label:"Rencana Biaya",icon:"💰",sortable:!0,type:"currency"},{key:"actual_spent",label:"Realisasi",icon:"💸",sortable:!0,type:"currency"},{key:"remaining_amount",label:"Sisa",icon:"📊",sortable:!0,type:"currency"},{key:"progress_percentage",label:"Progress",icon:"📈",sortable:!0,type:"progress"},{key:"status",label:"Status",icon:"🟢",sortable:!0,type:"badge"},{key:"created_at",label:"Dibuat",icon:"📅",sortable:!0,type:"date"}],we=[{key:"name",label:"Nama Item",icon:"📝",sortable:!0},{key:"item_type",label:"Jenis",icon:"🏷️",sortable:!0,type:"badge"},{key:"item_category",label:"Kategori",icon:"📂",sortable:!0},{key:"planned_amount",label:"Rencana Biaya",icon:"💰",sortable:!0,type:"currency"},{key:"actual_spent",label:"Sisa Biaya",icon:"💸",sortable:!0,type:"currency"},{key:"status",label:"Status",icon:"✅",sortable:!0,type:"badge"},{key:"completed_at",label:"Selesai",icon:"📅",sortable:!0,type:"date"}],je={item_type:{label:"Jenis Item",options:[{value:"",label:"Semua Jenis"},...ie]},status:{label:"Status",options:[{value:"",label:"Semua Status"},...fe]}},Se=j(()=>{const a={...je};return C.value&&C.value.length>0&&(a.item_category={label:"Kategori",options:[{value:"",label:"Semua Kategori"},...C.value.map(t=>({value:t,label:t}))]}),a}),X=j(()=>{let a=[...D.value];return _.value.item_type&&(a=a.filter(t=>t.item_type===_.value.item_type)),_.value.status&&(a=a.filter(t=>t.status===_.value.status)),_.value.item_category&&(a=a.filter(t=>t.item_category===_.value.item_category)),a.sort((t,s)=>t.item_type!==s.item_type?t.item_type.localeCompare(s.item_type):t.item_category!==s.item_category?t.item_category.localeCompare(s.item_category):t.status!==s.status?t.status.localeCompare(s.status):t.name.localeCompare(s.name))}),P=j(()=>{const a=X.value;return{total_items:a.length,goods_count:a.filter(t=>t.item_type==="goods").length,services_count:a.filter(t=>t.item_type==="service").length,documents_count:a.filter(t=>t.item_type==="document").length,tasks_count:a.filter(t=>t.item_type==="task").length,materials_count:a.filter(t=>t.item_type==="material").length,total_planned:a.reduce((t,s)=>t+parseFloat(s.planned_amount||0),0),total_spent:a.reduce((t,s)=>t+parseFloat(s.actual_spent||0),0),total_remaining:a.reduce((t,s)=>t+parseFloat(s.remaining_amount||0),0)}}),se=async()=>{v.value=!0;try{const a=await axios.get(route("projects.items.index",{project:T.project.id}));D.value=a.data.items||a.data}catch(a){console.error("Error loading items:",a),p.value={message:"Gagal memuat data item",type:"error"}}finally{v.value=!1}},de=a=>a&&["goods","material"].includes(a.item_type),Ce=a=>{if(!a.details)return!1;const t={...a.details};return delete t.quantity,delete t.unit_price,Object.keys(t).length>0},Y=async()=>{try{const a=await axios.get(route("projects.items.api.summary",{project:T.project.id}));N.value=a.data}catch(a){console.error("Error loading item summary:",a)}};Fe(()=>{D.value=T.items,Y(),Q()});const ae=()=>{S.value=null,l.reset(),l.item_type="goods",l.item_category="",l.status="needed",l.planned_amount=0,l.actual_spent=0,l.details={quantity:1,unit_price:0},z.value=!1,B.value=!0},me=a=>{if(!a.can_edit){p.value={message:"Hanya pemilik kategori dan partner dalam family yang sama yang dapat mengedit item",type:"error"};return}S.value=a,l.item_type=a.item_type,l.item_category=a.item_category,l.name=a.name,l.description=a.description,l.planned_amount=a.planned_amount,l.actual_spent=a.actual_spent,l.status=a.status,l.details=a.details||{},z.value=!0,["goods","material"].includes(a.item_type)&&(l.details.quantity||(l.details.quantity=1),l.details.unit_price||(l.details.unit_price=0)),B.value=!0},ue=a=>{if(!a.can_edit){p.value={message:"Hanya pemilik kategori dan partner dalam family yang sama yang dapat menghapus item",type:"error"};return}f.value=a,M.value=!0},pe=async a=>{try{be.visit(route("projects.items.show",{project:T.project.id,item:a}))}catch(t){console.error("Error generating encrypted link:",t),p.value={message:"Gagal membuka project",type:"error"}}},Ie=()=>{S.value?l.put(route("projects.items.update",{project:T.project.id,item:S.value.id}),{preserveScroll:!0,onSuccess:()=>{B.value=!1,se(),Y(),Q(),l.reset(),S.value=null},onError:a=>{console.error("Update error:",a)}}):l.post(route("projects.items.store",{project:T.project.id}),{preserveScroll:!0,onSuccess:()=>{B.value=!1,se(),Y(),Q(),l.reset()},onError:a=>{console.error("Create error:",a)}})},Pe=()=>{f.value&&(L.value=!0,be.delete(route("projects.items.destroy",{project:T.project.id,item:f.value.id}),{preserveScroll:!0,onSuccess:()=>{M.value=!1,se(),Y(),Q(),f.value=null,L.value=!1},onError:a=>{console.error("Delete error:",a),M.value=!1,L.value=!1}}))},Ve=()=>{B.value=!1,S.value=null,l.clearErrors(),l.reset()},y=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),Z=a=>new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),R=a=>({goods:"Barang",service:"Jasa",document:"Dokumen",task:"Tugas",material:"Material"})[a]||a,ee=a=>({needed:"Diperlukan",in_progress:"Dalam Proses",ready:"Siap",complete:"Selesai",cancelled:"Dibatalkan"})[a]||a,ce=a=>{a&&window.open(a,"_blank")},xe=j(()=>({goods:[{key:"purchase_type",label:"Cara Pembelian",type:"radio",icon:"🛒",options:ke},...l.details?.purchase_type==="online"?[{key:"ecommerce_platform",label:"Platform Online",type:"select",icon:"📱",options:Object.entries(W).map(([t,s])=>({value:t,label:`${s.icon} ${s.name}`}))},{key:"online_link",label:"Link Produk",type:"url",icon:"🔗",placeholder:"https://..."}]:[],...l.details?.purchase_type==="store"?[{key:"store_maps",label:"Link Google Maps",type:"url",icon:"🗺️",placeholder:"https://maps.google.com/..."},{key:"store_address",label:"Alamat Toko",type:"textarea",icon:"🏪",placeholder:"Alamat lengkap toko..."}]:[],{key:"ukuran",label:"Ukuran",type:"text",icon:"📏"},{key:"warna",label:"Warna",type:"text",icon:"🎨"},{key:"material",label:"Material",type:"text",icon:"⚙️"},{key:"merk",label:"Merk",type:"text",icon:"🏷️"}],service:[{key:"vendor_kontak",label:"Kontak Vendor",type:"text",icon:"📞"},{key:"tanggal_kontrak",label:"Tanggal Kontrak",type:"date",icon:"📅"},{key:"sisa_pembayaran",label:"Sisa Pembayaran",type:"number",icon:"💰"},{key:"menu_pilihan",label:"Menu Pilihan",type:"text",icon:"🍽️"},{key:"lokasi",label:"Lokasi",type:"text",icon:"📍"}],document:[{key:"tanggal_kadaluarsa",label:"Tanggal Kadaluarsa",type:"date",icon:"📅"},{key:"lokasi_fisik",label:"Lokasi Fisik",type:"text",icon:"📁"},{key:"status_legalitas",label:"Status Legalitas",type:"text",icon:"⚖️"},{key:"nomor_dokumen",label:"Nomor Dokumen",type:"text",icon:"🔢"}],task:[{key:"pihak_pengurus",label:"Pihak Pengurus",type:"text",icon:"👤"},{key:"biaya_administrasi",label:"Biaya Administrasi",type:"number",icon:"💰"},{key:"progress_persentase",label:"Progress (%)",type:"number",icon:"📊"},{key:"deadline",label:"Deadline",type:"date",icon:"⏰"}],material:[{key:"kuantitas_target",label:"Kuantitas Target",type:"number",icon:"📦"},{key:"satuan",label:"Satuan",type:"text",icon:"⚖️"},{key:"supplier_preferensi",label:"Supplier Preferensi",type:"text",icon:"🏪"},{key:"spesifikasi",label:"Spesifikasi",type:"text",icon:"📋"}]})[l.item_type]||[]),q=j(()=>X.value.filter(a=>a.status!=="complete")),O=j(()=>X.value.filter(a=>a.status==="complete")),De=j(()=>{const a=q.value;return{total_items:a.length,total_planned:a.reduce((t,s)=>t+parseFloat(s.planned_amount||0),0),total_spent:a.reduce((t,s)=>t+parseFloat(s.actual_spent||0),0)}}),Be=j(()=>{const a=O.value;return{total_items:a.length,total_planned:a.reduce((t,s)=>t+parseFloat(s.planned_amount||0),0),total_spent:a.reduce((t,s)=>t+parseFloat(s.actual_spent||0),0)}});return H([()=>l.details.quantity,()=>l.details.unit_price],()=>{h.value&&(l.planned_amount=w.value)}),H(()=>l.item_type,a=>{["goods","material"].includes(a)&&(l.details.quantity||(l.details.quantity=1),l.details.unit_price||(l.details.unit_price=0),U())}),H(()=>l.item_type,a=>{if(a!=="goods"){const{purchase_type:t,ecommerce_platform:s,online_link:x,store_maps:ge,store_address:Jl,...Te}=l.details;l.details=Te}}),(a,t)=>(i(),le(qe,{title:`Item Project - ${b.project.name}`},{default:u(()=>[e("div",Xe,[e("div",Ye,[p.value?(i(),d("div",{key:0,class:V(["mb-4 md:mb-6 p-3 md:p-4 rounded-xl md:rounded-2xl border backdrop-blur-sm transition-all duration-300",{"bg-green-50 border-green-200 text-green-800":p.value.type==="success","bg-red-50 border-red-200 text-red-800":p.value.type==="error"}])},[e("div",Ze,[e("div",et,[e("span",tt,o(p.value.type==="success"?"✅":"⚠️"),1),e("span",st,o(p.value.message),1)]),e("button",{onClick:t[0]||(t[0]=s=>p.value=null),class:"text-gray-500 hover:text-gray-700 transition-colors text-lg"}," ✕ ")])],2)):c("",!0),e("div",at,[t[27]||(t[27]=e("h1",{class:"text-xl md:text-2xl lg:text-3xl font-extrabold text-rose-600 drop-shadow-md mb-2 md:mb-3"}," 📋 Kelola Item Project ",-1)),e("p",lt,[t[25]||(t[25]=r(" Kelola semua item, barang, jasa, dokumen, dan tugas untuk project ",-1)),e("span",ot,o(b.project.name),1),t[26]||(t[26]=r(". Pantau progress dan realisasi biaya untuk setiap item 💫 ",-1))])]),e("div",nt,[t[35]||(t[35]=e("div",{class:"absolute -top-10 -right-10 w-40 h-40 bg-pink-100/40 rounded-full blur-3xl"},null,-1)),t[36]||(t[36]=e("div",{class:"absolute -bottom-12 -left-12 w-48 h-48 bg-blue-100/40 rounded-full blur-3xl"},null,-1)),t[37]||(t[37]=e("div",{class:"relative flex items-center gap-3 md:gap-4 mb-4 md:mb-6"},[e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-pink-400 to-rose-500 rounded-lg md:rounded-xl flex items-center justify-center shadow-md"},[e("span",{class:"text-xl md:text-2xl text-white"},"🌷")]),e("div",null,[e("h2",{class:"text-base md:text-lg font-semibold text-gray-800"},"Detail Proyek"),e("p",{class:"text-xs text-gray-500 italic"},'"Setiap proyek punya cerita yang indah di baliknya."')])],-1)),e("div",rt,[e("div",it,[t[30]||(t[30]=e("div",{class:"w-8 h-8 md:w-9 md:h-9 bg-gradient-to-r from-pink-200 to-rose-100 rounded-lg md:rounded-xl flex items-center justify-center shadow-sm"}," 💼 ",-1)),e("div",null,[t[29]||(t[29]=e("p",{class:"text-xs text-gray-500"},"Nama Project",-1)),e("p",dt,o(b.project.name),1),e("p",mt,[t[28]||(t[28]=r("Kategori: ",-1)),e("span",ut,o(b.project.category),1)])])]),e("div",pt,[t[32]||(t[32]=e("div",{class:"w-8 h-8 md:w-9 md:h-9 bg-gradient-to-r from-yellow-200 to-orange-100 rounded-lg md:rounded-xl flex items-center justify-center shadow-sm"}," 💰 ",-1)),e("div",null,[t[31]||(t[31]=e("p",{class:"text-xs text-gray-500"},"Target Budget",-1)),e("p",ct,o(y(b.project.target_total_amount)),1)])]),e("div",xt,[t[34]||(t[34]=e("div",{class:"w-8 h-8 md:w-9 md:h-9 bg-gradient-to-r from-blue-200 to-indigo-100 rounded-lg md:rounded-xl flex items-center justify-center shadow-sm"}," 📊 ",-1)),e("div",null,[t[33]||(t[33]=e("p",{class:"text-xs text-gray-500"},"Status Project",-1)),e("p",gt,o(ee(b.project.status)),1)])])]),t[38]||(t[38]=e("div",{class:"mt-3 md:mt-4 border-t border-pink-100 pt-3 md:pt-4 text-center"},[e("p",{class:"text-xs text-gray-500 italic"},' "Sebuah proyek bukan sekadar angka, tapi tentang harapan, usaha, dan keindahan prosesnya." 💖 ')],-1))]),g(We,{filters:_.value,"onUpdate:filters":t[1]||(t[1]=s=>_.value=s),options:Se.value,class:"mb-4"},null,8,["filters","options"]),e("div",yt,[e("div",bt,[e("div",vt,[t[39]||(t[39]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-rose-400 to-pink-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"📋")],-1)),e("h3",_t,o(P.value.total_items||0),1),t[40]||(t[40]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Total Item",-1)),_.value.item_type||_.value.status?(i(),d("p",ft," 🔍 Filter aktif ")):c("",!0)])]),e("div",kt,[e("div",ht,[t[41]||(t[41]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"💰")],-1)),e("h3",wt,o(y(P.value.total_planned)),1),t[42]||(t[42]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Rencana Biaya",-1))])]),e("div",jt,[e("div",St,[t[43]||(t[43]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-orange-400 to-red-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"💸")],-1)),e("h3",Ct,o(y(P.value.total_spent)),1),t[44]||(t[44]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Realisasi",-1)),P.value.total_planned>0?(i(),d("p",It,o((P.value.total_spent/P.value.total_planned*100).toFixed(1))+"% ",1)):c("",!0)])]),e("div",Pt,[e("div",Vt,[t[45]||(t[45]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-green-400 to-emerald-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"📊")],-1)),e("h3",Dt,o(y(P.value.total_remaining)),1),t[46]||(t[46]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Sisa Anggaran",-1))])])]),e("div",Bt,[(i(),d(F,null,A(["goods","service","document","task","material"],s=>e("div",{class:V(["bg-white/90 backdrop-blur-md shadow-lg rounded-xl p-3 text-center cursor-pointer transition-all duration-300 hover:scale-105",{"ring-2 ring-pink-400 shadow-lg":_.value.item_type===s,"hover:shadow-md":!_.value.item_type}]),key:s,onClick:x=>_.value.item_type=_.value.item_type===s?"":s},[e("div",$t,o(s==="goods"?"🛍️":s==="service"?"👨‍💼":s==="document"?"📄":s==="task"?"✅":"🏗️"),1),e("h3",Mt,o(s==="goods"?P.value.goods_count:s==="service"?P.value.services_count:s==="document"?P.value.documents_count:s==="task"?P.value.tasks_count:P.value.materials_count),1),e("p",Ut,o(R(s)),1),_.value.item_type===s?(i(),d("p",Ft," ✓ Terfilter ")):c("",!0)],10,Tt)),64))]),q.value.length>0?(i(),d("div",At,[e("div",Lt,[e("h3",zt,[t[47]||(t[47]=e("span",{class:"text-xl md:text-2xl"},"🚀",-1)),t[48]||(t[48]=r(" Item Aktif ",-1)),e("span",qt,o(q.value.length)+" item ",1)]),e("p",Ot,[t[49]||(t[49]=r(" Item yang masih dalam proses pengerjaan. Total rencana biaya: ",-1)),e("span",Kt,o(y(De.value.total_planned)),1)])]),g(ve,{title:`Item Aktif - ${b.project.name}`,description:`${q.value.length} item sedang dalam proses`,columns:he,data:q.value,loading:v.value,"show-actions":!0,pagination:!0,"items-per-page":10,onCreate:ae,onEdit:me,onDelete:ue},{"column-item_category":u(({item:s})=>[e("div",Et,[t[50]||(t[50]=e("span",{class:"text-base md:text-lg"},"📂",-1)),e("span",Rt,o(s.item_category||"Uncategorized"),1)])]),"column-item_type":u(({item:s})=>[e("div",Ht,[e("span",Jt,o(s.item_type_icon),1),e("span",{class:V(["px-2 py-1 rounded-full text-xs font-medium",s.item_type_badge])},o(R(s.item_type)),3)])]),"column-planned_amount":u(({item:s})=>[e("div",Nt,[t[51]||(t[51]=e("span",{class:"text-base md:text-lg text-blue-600"},"💰",-1)),e("span",Gt,o(y(s.planned_amount)),1)])]),"column-actual_spent":u(({item:s})=>[e("div",Qt,[t[52]||(t[52]=e("span",{class:"text-base md:text-lg text-orange-600"},"💸",-1)),e("span",Wt,o(y(s.actual_spent)),1)])]),"column-remaining_amount":u(({item:s})=>[e("div",Xt,[e("span",{class:V(["text-base md:text-lg",s.remaining_amount>=0?"text-green-600":"text-red-600"])}," 📊 ",2),e("span",{class:V(["font-bold text-xs md:text-sm",s.remaining_amount>=0?"text-green-700":"text-red-700"])},o(y(s.remaining_amount)),3)])]),"column-progress_percentage":u(({item:s})=>[e("div",Yt,[e("div",Zt,[e("span",es,o(s.progress_percentage.toFixed(1))+"%",1),e("span",ts,o(y(s.actual_spent))+" / "+o(y(s.planned_amount)),1)]),e("div",ss,[e("div",{class:V(["h-2 rounded-full transition-all duration-300",{"bg-red-500":s.progress_percentage>=100,"bg-orange-400":s.progress_percentage>=80&&s.progress_percentage<100,"bg-yellow-400":s.progress_percentage>=50&&s.progress_percentage<80,"bg-green-500":s.progress_percentage<50}]),style:ye({width:Math.min(s.progress_percentage,100)+"%"})},null,6)])])]),"column-status":u(({item:s})=>[e("div",as,[e("span",ls,o(s.status_icon),1),e("span",{class:V(["px-2 py-1 rounded-full text-xs font-medium",s.status_badge])},o(ee(s.status)),3)])]),"column-created_at":u(({item:s})=>[e("div",os,[t[53]||(t[53]=e("span",{class:"text-base md:text-lg"},"📅",-1)),e("span",ns,o(Z(s.created_at)),1)])]),actions:u(({item:s})=>[g(I,{onClick:x=>pe(s),variant:"primary",size:"sm",class:"!px-2 !py-1 text-xs",title:"Lihat detail item"},{icon:u(()=>[...t[54]||(t[54]=[r("👁️",-1)])]),default:u(()=>[t[55]||(t[55]=e("span",{class:"hidden xs:inline"},"Detail",-1))]),_:1},8,["onClick"]),g(I,{onClick:x=>me(s),variant:"secondary",size:"sm",class:"!px-2 !py-1 text-xs",disabled:!s.can_edit,title:s.can_edit?"Edit item":"Hanya pemilik kategori dan partner yang dapat mengedit"},{icon:u(()=>[...t[56]||(t[56]=[r("✏️",-1)])]),default:u(()=>[t[57]||(t[57]=e("span",{class:"hidden xs:inline"},"Edit",-1))]),_:1},8,["onClick","disabled","title"]),g(I,{onClick:x=>ue(s),variant:"danger",size:"sm",class:"!px-2 !py-1 text-xs",disabled:!s.can_edit,title:s.can_edit?"Hapus item":"Hanya pemilik kategori dan partner yang dapat menghapus"},{icon:u(()=>[...t[58]||(t[58]=[r("🗑️",-1)])]),default:u(()=>[t[59]||(t[59]=e("span",{class:"hidden xs:inline"},"Hapus",-1))]),_:1},8,["onClick","disabled","title"])]),_:1},8,["title","description","data","loading"])])):c("",!0),O.value.length>0?(i(),d("div",rs,[e("div",is,[e("h3",ds,[t[60]||(t[60]=e("span",{class:"text-xl md:text-2xl"},"✅",-1)),t[61]||(t[61]=r(" Item Selesai ",-1)),e("span",ms,o(O.value.length)+" item ",1)]),e("p",us,[t[62]||(t[62]=r(" Item yang sudah selesai dikerjakan. Total sisa biaya yang telah dihabiskan: ",-1)),e("span",ps,o(y(Be.value.total_spent)),1)])]),g(ve,{title:`Item Selesai - ${b.project.name}`,description:`${O.value.length} item sudah selesai`,columns:we,data:O.value,loading:v.value,"show-actions":!0,"show-create-button":!1,pagination:!0,"items-per-page":10},{"column-item_type":u(({item:s})=>[e("div",cs,[e("span",xs,o(s.item_type_icon),1),e("span",gs,o(R(s.item_type)),1)])]),"column-planned_amount":u(({item:s})=>[e("div",ys,[t[63]||(t[63]=e("span",{class:"text-base md:text-lg text-blue-600"},"💰",-1)),e("span",bs,o(y(s.planned_amount)),1)])]),"column-actual_spent":u(({item:s})=>[e("div",vs,[t[64]||(t[64]=e("span",{class:"text-base md:text-lg text-green-600"},"💸",-1)),e("span",_s,o(y(s.actual_spent)),1)])]),"column-status":u(({item:s})=>[...t[65]||(t[65]=[e("div",{class:"flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"✅"),e("span",{class:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"}," Selesai ")],-1)])]),"column-completed_at":u(({item:s})=>[e("div",fs,[t[66]||(t[66]=e("span",{class:"text-base md:text-lg"},"📅",-1)),e("span",ks,o(Z(s.updated_at)),1)])]),actions:u(({item:s})=>[g(I,{onClick:x=>pe(s),variant:"primary",size:"sm",class:"!px-2 !py-1 text-xs",title:"Lihat detail item"},{icon:u(()=>[...t[67]||(t[67]=[r("👁️",-1)])]),default:u(()=>[t[68]||(t[68]=e("span",{class:"hidden xs:inline"},"Detail",-1))]),_:1},8,["onClick"])]),_:1},8,["title","description","data","loading"])])):c("",!0),X.value.length===0&&!v.value?(i(),d("div",hs,[e("div",ws,[t[73]||(t[73]=e("div",{class:"text-4xl md:text-6xl mb-4"},"📋",-1)),e("h3",js,o(D.value.length===0?"Belum ada item":"Tidak ada item yang sesuai filter"),1),e("p",Ss,[D.value.length===0?(i(),d("span",Cs," Mulai dengan menambahkan item pertama untuk project "+o(b.project.name),1)):(i(),d("span",Is," Coba ubah filter atau hapus filter untuk melihat semua item "))]),e("div",Ps,[D.value.length===0?(i(),le(I,{key:0,onClick:ae,class:"px-4 py-2 md:px-6 md:py-3 text-sm md:text-base"},{icon:u(()=>[...t[69]||(t[69]=[r("➕",-1)])]),default:u(()=>[t[70]||(t[70]=r(" Tambah Item Pertama ",-1))]),_:1})):(i(),le(I,{key:1,onClick:t[2]||(t[2]=s=>_.value={item_type:"",status:""}),variant:"secondary",class:"px-4 py-2 md:px-6 md:py-3 text-sm md:text-base"},{icon:u(()=>[...t[71]||(t[71]=[r("🔍",-1)])]),default:u(()=>[t[72]||(t[72]=r(" Hapus Filter ",-1))]),_:1}))])])])):q.value.length===0&&O.value.length>0&&!v.value?(i(),d("div",Vs,[e("div",Ds,[t[76]||(t[76]=e("div",{class:"text-4xl md:text-6xl mb-4"},"🎉",-1)),t[77]||(t[77]=e("h3",{class:"text-lg md:text-xl font-bold text-gray-800 mb-2"}," Semua Item Sudah Selesai! ",-1)),e("p",Bs," Selamat! Semua item untuk project "+o(b.project.name)+" sudah selesai dikerjakan. Anda bisa menambahkan item baru jika diperlukan. ",1),g(I,{onClick:ae,class:"px-4 py-2 md:px-6 md:py-3 text-sm md:text-base"},{icon:u(()=>[...t[74]||(t[74]=[r("➕",-1)])]),default:u(()=>[t[75]||(t[75]=r(" Tambah Item Baru ",-1))]),_:1})])])):c("",!0),g(oe,{show:B.value,"onUpdate:show":t[17]||(t[17]=s=>B.value=s),title:S.value?"Edit Item Project":"Tambah Item Project Baru",description:S.value?"Perbarui informasi item project":"Tambahkan item baru untuk project "+b.project.name,icon:S.value?"✏️":"➕","confirm-text":S.value?"Perbarui":"Simpan","confirm-loading":m(l).processing,onConfirm:Ie,onClose:Ve,size:"xl"},{default:u(()=>[e("div",Ts,[g(re,{modelValue:m(l).item_type,"onUpdate:modelValue":t[3]||(t[3]=s=>m(l).item_type=s),label:"Jenis Item",placeholder:"Pilih jenis item",options:ie,error:m(l).errors.item_type,icon:"🏷️",required:"",disabled:m(l).processing},null,8,["modelValue","error","disabled"]),e("div",$s,[e("div",Ms,[t[82]||(t[82]=e("label",{class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"📂"),r(" Kategori Item ")],-1)),G.value&&!S.value?(i(),d("div",Us,[g(I,{onClick:t[4]||(t[4]=s=>z.value=!1),variant:"secondary",size:"xs",class:V(te.value?"":"ring-2 ring-pink-400")},{icon:u(()=>[...t[78]||(t[78]=[r("📋",-1)])]),default:u(()=>[t[79]||(t[79]=r(" Pilih ",-1))]),_:1},8,["class"]),g(I,{onClick:t[5]||(t[5]=s=>z.value=!0),variant:"secondary",size:"xs",class:V(te.value?"ring-2 ring-pink-400":"")},{icon:u(()=>[...t[80]||(t[80]=[r("➕",-1)])]),default:u(()=>[t[81]||(t[81]=r(" Baru ",-1))]),_:1},8,["class"])])):c("",!0)]),!te.value&&G.value?(i(),d("div",Fs,[g(re,{modelValue:m(l).item_category,"onUpdate:modelValue":t[6]||(t[6]=s=>m(l).item_category=s),label:"Pilih Kategori",placeholder:"Pilih kategori yang sudah ada",options:C.value.map(s=>({value:s,label:s})),error:m(l).errors.item_category,icon:"📂",disabled:m(l).processing},null,8,["modelValue","options","error","disabled"]),e("p",As," Pilih dari "+o(C.value.length)+" kategori yang sudah ada ",1)])):(i(),d("div",Ls,[g(_e,{modelValue:m(l).item_category,"onUpdate:modelValue":t[7]||(t[7]=s=>m(l).item_category=s),label:"Kategori Item",placeholder:"Contoh: Perlengkapan Kamar, Dekorasi, Katering, dll.",error:m(l).errors.item_category,icon:"📂",disabled:m(l).processing},null,8,["modelValue","error","disabled"]),G.value?(i(),d("p",zs,[t[83]||(t[83]=r(" Atau ",-1)),e("button",{type:"button",onClick:t[8]||(t[8]=s=>z.value=!1),class:"text-pink-500 hover:text-pink-700 underline"}," pilih dari kategori yang sudah ada ")])):c("",!0)]))]),g(_e,{modelValue:m(l).name,"onUpdate:modelValue":t[9]||(t[9]=s=>m(l).name=s),label:"Nama Item",placeholder:"Contoh: Cincin Nikah, Vendor Katering, IMB, Semen Portland",error:m(l).errors.name,icon:"📝",required:"",disabled:m(l).processing},null,8,["modelValue","error","disabled"]),g(Oe,{modelValue:m(l).description,"onUpdate:modelValue":t[10]||(t[10]=s=>m(l).description=s),label:"Deskripsi",placeholder:"Deskripsi detail tentang item ini...",error:m(l).errors.description,icon:"📄",disabled:m(l).processing},null,8,["modelValue","error","disabled"]),h.value?(i(),d("div",qs,[e("div",Os,[g(ne,{label:"Qty Barang",modelValue:m(l).details.quantity,"onUpdate:modelValue":t[11]||(t[11]=s=>m(l).details.quantity=s),placeholder:"Jumlah barang",icon:"💰",required:"",min:"1",disabled:m(l).processing,onInput:U},null,8,["modelValue","disabled"]),g(ne,{label:"Rencana Biaya",modelValue:m(l).details.unit_price,"onUpdate:modelValue":t[12]||(t[12]=s=>m(l).details.unit_price=s),placeholder:"Harga per unit",icon:"💰",required:"","account-type":"account_number",min:"0",disabled:m(l).processing,onInput:U},null,8,["modelValue","disabled"])]),e("div",Ks,[e("div",Es,[e("div",null,[t[84]||(t[84]=e("p",{class:"text-sm font-medium text-gray-700"},"Total Rencana Biaya:",-1)),e("p",Rs,o(m(l).details.quantity||0)+" × "+o(y(m(l).details.unit_price||0)),1)]),e("div",Hs,[e("p",Js,o(y(w.value)),1),t[85]||(t[85]=e("p",{class:"text-xs text-gray-500"},"Terhitung otomatis",-1))])])]),$(e("input",{type:"hidden","onUpdate:modelValue":t[13]||(t[13]=s=>m(l).planned_amount=s)},null,512),[[K,m(l).planned_amount]])])):(i(),d("div",Ns,[g(ne,{modelValue:m(l).planned_amount,"onUpdate:modelValue":t[14]||(t[14]=s=>m(l).planned_amount=s),label:"Rencana Biaya",placeholder:"Biaya yang direncanakan",error:m(l).errors.planned_amount,icon:"💰","account-type":"account_number",disabled:m(l).processing},null,8,["modelValue","error","disabled"])])),$(e("input",{type:"hidden","onUpdate:modelValue":t[15]||(t[15]=s=>m(l).actual_spent=s)},null,512),[[K,m(l).actual_spent]]),$(e("input",{type:"hidden","onUpdate:modelValue":t[16]||(t[16]=s=>m(l).status=s)},null,512),[[K,m(l).status]]),xe.value.length>0?(i(),d("div",Gs,[e("div",Qs,[t[86]||(t[86]=e("h4",{class:"font-semibold text-gray-800 flex items-center gap-2 text-base md:text-lg mb-3 md:mb-4"},[e("span",null,"✨"),r(" Detail Tambahan ")],-1)),e("div",Ws,[(i(!0),d(F,null,A(xe.value,s=>(i(),d("div",{key:s.key,class:"space-y-2"},[s.type==="radio"?(i(),d("div",Xs,[e("label",Ys,[e("span",Zs,o(s.icon),1),r(" "+o(s.label),1)]),e("div",ea,[(i(!0),d(F,null,A(s.options,x=>(i(),d("label",{key:x.value,class:V(["flex items-center space-x-2 cursor-pointer p-2 md:p-3 rounded-lg md:rounded-xl border-2 transition-all",m(l).details[s.key]===x.value?"border-pink-400 bg-pink-50 shadow-sm":"border-gray-200 hover:border-pink-200"])},[$(e("input",{type:"radio",value:x.value,"onUpdate:modelValue":ge=>m(l).details[s.key]=ge,class:"text-pink-500 focus:ring-pink-400"},null,8,ta),[[Ae,m(l).details[s.key]]]),e("span",sa,o(x.label),1)],2))),128))])])):s.type==="select"?(i(),d("div",aa,[e("label",la,[e("span",oa,o(s.icon),1),r(" "+o(s.label),1)]),$(e("select",{"onUpdate:modelValue":x=>m(l).details[s.key]=x,class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all bg-white text-sm"},[e("option",ra,"Pilih "+o(s.label.toLowerCase()),1),(i(!0),d(F,null,A(s.options,x=>(i(),d("option",{key:x.value,value:x.value},o(x.label),9,ia))),128))],8,na),[[Le,m(l).details[s.key]]])])):s.type==="text"||s.type==="url"?(i(),d("div",da,[e("label",ma,[e("span",ua,o(s.icon),1),r(" "+o(s.label),1)]),$(e("input",{type:s.type,"onUpdate:modelValue":x=>m(l).details[s.key]=x,placeholder:s.placeholder||`Masukkan ${s.label.toLowerCase()}`,class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all text-sm"},null,8,pa),[[ze,m(l).details[s.key]]])])):s.type==="textarea"?(i(),d("div",ca,[e("label",xa,[e("span",ga,o(s.icon),1),r(" "+o(s.label),1)]),$(e("textarea",{"onUpdate:modelValue":x=>m(l).details[s.key]=x,placeholder:s.placeholder||`Masukkan ${s.label.toLowerCase()}`,rows:"3",class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all resize-none text-sm"},null,8,ya),[[K,m(l).details[s.key]]])])):s.type==="number"?(i(),d("div",ba,[e("label",va,[e("span",_a,o(s.icon),1),r(" "+o(s.label),1)]),$(e("input",{type:"number","onUpdate:modelValue":x=>m(l).details[s.key]=x,placeholder:s.placeholder||`Masukkan ${s.label.toLowerCase()}`,class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all text-sm"},null,8,fa),[[K,m(l).details[s.key]]])])):s.type==="date"?(i(),d("div",ka,[e("label",ha,[e("span",wa,o(s.icon),1),r(" "+o(s.label),1)]),$(e("input",{type:"date","onUpdate:modelValue":x=>m(l).details[s.key]=x,class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all text-sm"},null,8,ja),[[K,m(l).details[s.key]]])])):c("",!0)]))),128))])])])):c("",!0),t[88]||(t[88]=e("div",{class:"p-3 md:p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl md:rounded-2xl border border-blue-200"},[e("p",{class:"text-xs md:text-sm text-gray-700 flex items-start gap-2"},[e("span",{class:"text-base md:text-lg mt-0.5"},"💡"),e("span",null,[e("strong",{class:"block"},"Jenis Item:"),r(" • "),e("strong",null,"Barang 🛍️"),r(": Physical goods yang dibeli (hitung otomatis dari quantity × harga satuan)"),e("br"),r(" • "),e("strong",null,"Jasa 👨‍💼"),r(": Services dari vendor/penyedia jasa"),e("br"),r(" • "),e("strong",null,"Dokumen 📄"),r(": Legal documents dan surat-surat"),e("br"),r(" • "),e("strong",null,"Tugas ✅"),r(": Tasks dan pekerjaan yang perlu diselesaikan"),e("br"),r(" • "),e("strong",null,"Material 🏗️"),r(": Bahan bangunan dan material konstruksi (hitung otomatis dari quantity × harga satuan) ")])])],-1)),m(l).hasErrors?(i(),d("div",Sa,[...t[87]||(t[87]=[e("p",{class:"text-xs md:text-sm text-red-600 flex items-center gap-2"},[e("span",null,"⚠️"),r(" Terdapat kesalahan dalam pengisian form. Silakan periksa kembali input Anda. ")],-1)])])):c("",!0)])]),_:1},8,["show","title","description","icon","confirm-text","confirm-loading"]),g(oe,{show:E.value,"onUpdate:show":t[21]||(t[21]=s=>E.value=s),title:n.value?n.value.name:"Detail Item",description:n.value?`Detail lengkap untuk item ${n.value.name}`:"Detail item",icon:"👁️",onClose:t[22]||(t[22]=s=>E.value=!1),size:"lg"},{default:u(()=>[n.value?(i(),d("div",Ca,[e("div",Ia,[t[93]||(t[93]=e("h3",{class:"font-semibold text-gray-800 text-base md:text-lg mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"✨"),r(" Informasi Dasar ")],-1)),e("div",Pa,[e("div",Va,[t[89]||(t[89]=e("span",{class:"text-xs text-gray-600 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"🏷️"),r(" Jenis Item ")],-1)),e("p",Da,[e("span",null,o(n.value.item_type_icon),1),r(" "+o(R(n.value.item_type)),1)])]),e("div",Ba,[t[90]||(t[90]=e("span",{class:"text-xs text-gray-600 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"🟢"),r(" Status ")],-1)),e("p",Ta,[e("span",null,o(n.value.status_icon),1),r(" "+o(ee(n.value.status)),1)])]),e("div",$a,[t[91]||(t[91]=e("span",{class:"text-xs text-gray-600 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"💰"),r(" Rencana Biaya ")],-1)),e("p",Ma,o(y(n.value.planned_amount)),1),de(n.value)?(i(),d("p",Ua," Terhitung otomatis ")):c("",!0)]),e("div",Fa,[t[92]||(t[92]=e("span",{class:"text-xs text-gray-600 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"💸"),r(" Realisasi ")],-1)),e("p",Aa,o(y(n.value.actual_spent)),1)])])]),de(n.value)&&n.value.details?(i(),d("div",La,[t[99]||(t[99]=e("h3",{class:"font-semibold text-gray-800 text-base md:text-lg mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"📊"),r(" Informasi Kuantitas & Harga ")],-1)),e("div",za,[e("div",qa,[t[95]||(t[95]=e("span",{class:"text-xs text-gray-600 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"📦"),r(" Quantity ")],-1)),e("p",Oa,[r(o(n.value.details.quantity||0)+" ",1),t[94]||(t[94]=e("span",{class:"text-xs font-normal text-gray-500"},"unit",-1))])]),e("div",Ka,[t[96]||(t[96]=e("span",{class:"text-xs text-gray-600 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"💰"),r(" Harga Satuan ")],-1)),e("p",Ea,o(y(n.value.details.unit_price||0)),1)]),e("div",Ra,[t[98]||(t[98]=e("span",{class:"text-xs text-gray-600 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"🧮"),r(" Perhitungan Total ")],-1)),e("div",Ha,[e("div",Ja,[e("span",Na,o(n.value.details.quantity||0)+" × "+o(y(n.value.details.unit_price||0)),1),e("span",Ga," = "+o(y(n.value.planned_amount)),1)]),t[97]||(t[97]=e("p",{class:"text-xs text-gray-500 mt-1"}," Total rencana biaya dihitung otomatis dari quantity × harga satuan ",-1))])])])])):c("",!0),e("div",Qa,[t[100]||(t[100]=e("h3",{class:"font-semibold text-gray-800 text-base md:text-lg mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"📈"),r(" Progress Keuangan ")],-1)),e("div",Wa,[e("div",Xa,[e("span",Ya,o(n.value.progress_percentage.toFixed(1))+"%",1),e("span",Za,o(y(n.value.actual_spent))+" / "+o(y(n.value.planned_amount)),1)]),e("div",el,[e("div",{class:"h-3 md:h-4 rounded-full transition-all duration-1000 bg-gradient-to-r from-pink-400 to-rose-500 shadow-lg",style:ye({width:Math.min(n.value.progress_percentage,100)+"%"})},null,4)]),e("div",tl,[e("span",null,"Sisa: "+o(y(n.value.remaining_amount)),1),n.value.remaining_amount<0?(i(),d("span",sl," ⚠️ Melebihi budget ")):c("",!0)])])]),n.value.description?(i(),d("div",al,[t[101]||(t[101]=e("h3",{class:"font-semibold text-gray-800 text-base md:text-lg mb-2 md:mb-3 flex items-center gap-2"},[e("span",null,"📄"),r(" Deskripsi ")],-1)),e("p",ll,o(n.value.description),1)])):c("",!0),n.value.item_type==="goods"&&n.value.details&&Ce(n.value)?(i(),d("div",ol,[t[111]||(t[111]=e("h3",{class:"font-semibold text-gray-800 text-base md:text-lg mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"🛍️"),r(" Informasi Pembelian ")],-1)),e("div",nl,[n.value.details.purchase_type?(i(),d("div",rl,[t[102]||(t[102]=e("span",{class:"text-xs text-gray-600"},"Cara Pembelian:",-1)),e("span",il,[n.value.details.purchase_type==="online"?(i(),d("span",dl,"🛒")):(i(),d("span",ml,"🏪")),r(" "+o(n.value.details.purchase_type==="online"?"Beli Online":"Beli di Toko"),1)])])):c("",!0),n.value.details.purchase_type==="online"?(i(),d("div",ul,[n.value.details.ecommerce_platform?(i(),d("div",pl,[t[103]||(t[103]=e("span",{class:"text-xs text-gray-600"},"Platform:",-1)),e("span",{class:V(["font-medium flex items-center gap-2 text-sm",W[n.value.details.ecommerce_platform]?.color])},[e("span",null,o(W[n.value.details.ecommerce_platform]?.icon),1),r(" "+o(W[n.value.details.ecommerce_platform]?.name),1)],2)])):c("",!0),n.value.details.online_link?(i(),d("div",cl,[e("div",xl,[t[106]||(t[106]=e("span",{class:"text-xs text-gray-600"},"Link Produk:",-1)),g(I,{onClick:t[18]||(t[18]=s=>ce(n.value.details.online_link)),variant:"primary",size:"xs",class:"!px-2 !py-1 text-xs"},{icon:u(()=>[...t[104]||(t[104]=[r("🔗",-1)])]),default:u(()=>[t[105]||(t[105]=r(" Buka Link ",-1))]),_:1})]),e("p",gl,o(n.value.details.online_link),1)])):c("",!0)])):c("",!0),n.value.details.purchase_type==="store"?(i(),d("div",yl,[n.value.details.store_maps?(i(),d("div",bl,[e("div",vl,[t[109]||(t[109]=e("span",{class:"text-xs text-gray-600"},"Lokasi Toko:",-1)),g(I,{onClick:t[19]||(t[19]=s=>ce(n.value.details.store_maps)),variant:"primary",size:"xs",class:"!px-2 !py-1 text-xs"},{icon:u(()=>[...t[107]||(t[107]=[r("🗺️",-1)])]),default:u(()=>[t[108]||(t[108]=r(" Buka Maps ",-1))]),_:1})]),e("p",_l,o(n.value.details.store_maps),1)])):c("",!0),n.value.details.store_address?(i(),d("div",fl,[t[110]||(t[110]=e("span",{class:"text-xs text-gray-600 block mb-2"},"Alamat Toko:",-1)),e("p",kl,o(n.value.details.store_address),1)])):c("",!0)])):c("",!0),e("div",hl,[(i(),d(F,null,A(["ukuran","warna","material","merk"],s=>e("div",{key:s},[n.value.details[s]?(i(),d("div",wl,[e("span",jl,o(s),1),e("span",Sl,o(n.value.details[s]),1)])):c("",!0)])),64))])])])):c("",!0),n.value.details&&Object.keys(n.value.details).length>0&&n.value.item_type!=="goods"?(i(),d("div",Cl,[t[112]||(t[112]=e("h3",{class:"font-semibold text-gray-800 text-base md:text-lg mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"🔧"),r(" Detail Tambahan ")],-1)),e("div",Il,[(i(!0),d(F,null,A(n.value.details,(s,x)=>(i(),d("div",{key:x,class:"p-2 md:p-3 bg-white rounded-lg md:rounded-xl border hover:shadow-sm transition-shadow"},[e("span",Pl,o(x.replace("_"," ")),1),e("span",Vl,o(s),1)]))),128))])])):c("",!0),e("div",Dl,[t[115]||(t[115]=e("h3",{class:"font-semibold text-gray-800 text-base md:text-lg mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"⏰"),r(" Informasi Waktu ")],-1)),e("div",Bl,[e("div",Tl,[t[113]||(t[113]=e("span",{class:"text-xs text-gray-500 block"},"Dibuat",-1)),e("span",$l,o(Z(n.value.created_at)),1)]),e("div",Ml,[t[114]||(t[114]=e("span",{class:"text-xs text-gray-500 block"},"Diupdate",-1)),e("span",Ul,o(Z(n.value.updated_at)),1)])])]),g(I,{onClick:t[20]||(t[20]=s=>a.$inertia.visit(a.route("projects.items.show",{project:b.project.id,item:n.value.id}))),variant:"primary",size:"sm",class:"!px-2 !py-1 text-xs",title:"Lihat detail lengkap item"},{icon:u(()=>[...t[116]||(t[116]=[r("👁️",-1)])]),default:u(()=>[t[117]||(t[117]=e("span",{class:"hidden xs:inline"},"Lihat detail lengkap item",-1))]),_:1})])):c("",!0)]),_:1},8,["show","title","description"]),g(oe,{show:M.value,"onUpdate:show":t[23]||(t[23]=s=>M.value=s),title:"Hapus Item Project",description:f.value?`Apakah Anda yakin ingin menghapus item ${f.value.name}?`:"Apakah Anda yakin ingin menghapus item ini?",icon:"🗑️","confirm-text":"Hapus","cancel-text":"Batal","confirm-variant":"danger","confirm-loading":L.value,onConfirm:Pe,onClose:t[24]||(t[24]=s=>M.value=!1)},{default:u(()=>[e("div",Fl,[t[125]||(t[125]=e("div",{class:"p-3 md:p-4 bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-xl md:rounded-2xl"},[e("p",{class:"text-xs md:text-sm text-red-600 flex items-start gap-2"},[e("span",{class:"text-base md:text-lg mt-0.5"},"⚠️"),e("span",null,[e("strong",{class:"block"},"Tindakan ini tidak dapat dibatalkan!"),r(" Semua data yang terkait dengan item ini akan hilang. ")])])],-1)),f.value?(i(),d("div",Al,[t[124]||(t[124]=e("h4",{class:"font-semibold text-gray-800 text-sm md:text-base mb-2"},"Detail Item:",-1)),e("div",Ll,[e("div",null,[t[118]||(t[118]=e("span",{class:"text-gray-600"},"Nama:",-1)),e("p",zl,o(f.value.name),1)]),e("div",null,[t[119]||(t[119]=e("span",{class:"text-gray-600"},"Jenis:",-1)),e("p",ql,o(R(f.value.item_type)),1)]),e("div",null,[t[120]||(t[120]=e("span",{class:"text-gray-600"},"Rencana Biaya:",-1)),e("p",Ol,o(y(f.value.planned_amount)),1)]),e("div",null,[t[121]||(t[121]=e("span",{class:"text-gray-600"},"Realisasi:",-1)),e("p",Kl,o(y(f.value.actual_spent)),1)]),e("div",null,[t[122]||(t[122]=e("span",{class:"text-gray-600"},"Status:",-1)),e("p",El,o(ee(f.value.status)),1)]),e("div",null,[t[123]||(t[123]=e("span",{class:"text-gray-600"},"Progress:",-1)),e("p",Rl,o(f.value.progress_percentage.toFixed(1))+"%",1)])])])):c("",!0)])]),_:1},8,["show","description","confirm-loading"])])])]),_:1},8,["title"]))}},ao=Ke(Hl,[["__scopeId","data-v-15cd0409"]]);export{ao as default};
