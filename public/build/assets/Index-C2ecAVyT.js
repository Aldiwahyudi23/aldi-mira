import{I as F,r as c,M as ee,t as te,p as v,o as ae,k as se,g as y,w as l,d as e,c as C,b as A,l as u,s as B,z as n,f as i,x as o,E,m as re,G as oe,D as ne}from"./vendor-_1bMFsGO.js";import{A as le}from"./AppLayout-B-FfRgLz.js";import{B as de}from"./BaseTable-C_vaDzBU.js";import{B as K,a as N,S as I}from"./SelectInput--H5tB_dZ.js";import{_ as ie}from"./TextInput-CfF7StUs.js";import{_ as ue}from"./TextAreaInput-CuZUnRRb.js";import{_ as me}from"./app-DzK-MRpb.js";/* empty css            */const ge={class:"py-2 min-h-screen relative overflow-hidden"},pe={class:"w-full px-3 sm:px-4 lg:px-6 relative z-10"},xe={class:"flex items-center justify-between"},ce={class:"flex items-center gap-2 md:gap-3"},be={class:"text-lg md:text-xl"},ve={class:"font-medium text-sm md:text-base"},fe={class:"grid grid-cols-3 md:grid-cols-5 gap-2 md:gap-3 mb-4"},ye={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-blue-100"},ke={class:"text-center"},he={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},_e={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-green-100"},we={class:"text-center"},Ce={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},Ae={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-green-100"},Be={class:"text-center"},Ke={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},Pe={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-orange-100"},Me={class:"text-center"},je={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},Se={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-purple-100"},Te={class:"text-center"},De={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},Ve={class:"grid grid-cols-2 gap-2 md:gap-3 mb-4"},Ee={class:"flex items-center gap-2"},Ne={class:"text-base md:text-lg"},Ie={class:"font-medium text-gray-700 text-xs md:text-sm"},$e={class:"flex items-center gap-2"},Ue={class:"text-base md:text-lg"},He={class:"font-medium text-gray-700 text-xs md:text-sm"},Je={class:"flex items-center gap-2"},ze={class:"text-base md:text-lg"},Oe={key:1,class:"text-center mt-6"},qe={class:"bg-white/80 backdrop-blur-md rounded-xl md:rounded-2xl shadow-lg p-6 md:p-8 border border-gray-100"},Ge={class:"space-y-3 max-h-[50vh] md:max-h-[60vh] overflow-y-auto pr-2"},Le={class:"flex items-center gap-3 p-3 md:p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl md:rounded-2xl border border-blue-200"},Qe=["disabled"],Re={key:0,class:"p-2 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl md:rounded-2xl"},We={class:"space-y-4"},Xe={key:0,class:"p-3 md:p-4 bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200 rounded-xl md:rounded-2xl"},Ye={class:"grid grid-cols-1 xs:grid-cols-2 gap-3 md:gap-4 text-xs md:text-sm"},Ze={class:"font-medium text-gray-800 truncate"},Fe={class:"font-medium text-gray-800"},et={class:"font-medium text-gray-800"},tt={class:"font-medium text-gray-800"},at={class:"xs:col-span-2"},st={class:"font-medium text-gray-800"},rt={__name:"Index",setup(ot){const P=F(),m=P.props.auth.user,$=m?.partner?.name??"Pasangan",M=`${m?.name??""} 💕 ${$}`,p=c([]),k=c(!1),h=c(!1),b=c(!1),f=c(!1),x=c(null),d=c(null),g=c(null);ee(()=>P.props.flash,a=>{(a.success||a.error)&&(g.value={message:a.success||a.error,type:a.type||(a.success?"success":"error")},setTimeout(()=>{g.value=null},5e3))},{immediate:!0});const s=te({name:"",type:"",budget_type:"",description:"",is_active:!0}),U=[{key:"name",label:"Nama Kategori",icon:"📁",sortable:!0},{key:"type",label:"Tipe",type:"badge",icon:"👥",sortable:!0,badgeVariant:"romantic"},{key:"budget_type",label:"Jenis Anggaran",type:"badge",icon:"💰",sortable:!0},{key:"user.name",label:"Dibuat Oleh",icon:"👤",sortable:!0},{key:"description",label:"Deskripsi",icon:"📝",class:"max-w-xs"},{key:"is_active",label:"Status",type:"badge",icon:"🟢",sortable:!0}],H=[{value:"personal",label:"👤 Personal"},{value:"joint",label:"👥 Joint"}],J=[{value:"income",label:"💰 Pemasukan"},{value:"expense",label:"💸 Pengeluaran"},{value:"savings",label:"🏦 Tabungan"}],_=async()=>{k.value=!0;try{const a=await axios.get(route("master-data.categories.index"));p.value=a.data.categories||a.data}catch(a){console.error("Error loading categories:",a),g.value={message:"Gagal memuat data kategori",type:"error"}}finally{k.value=!1}},j=()=>{x.value=null,s.reset(),s.type="",s.budget_type="",s.is_active=!0,b.value=!0},S=a=>{if(a.user_id!==m.id){g.value={message:"Anda hanya dapat mengedit kategori yang Anda buat",type:"error"};return}x.value=a,s.name=a.name,s.type=a.type,s.budget_type=a.budget_type,s.description=a.description||"",s.is_active=a.is_active,b.value=!0},T=a=>{if(a.user_id!==m.id){g.value={message:"Anda hanya dapat menghapus kategori yang Anda buat",type:"error"};return}d.value=a,f.value=!0},z=()=>{x.value?s.put(route("master-data.categories.update",x.value.id),{preserveScroll:!0,onSuccess:()=>{b.value=!1,_(),s.reset(),x.value=null},onError:a=>{console.error("Update error:",a)}}):s.post(route("master-data.categories.store"),{preserveScroll:!0,onSuccess:()=>{b.value=!1,_(),s.reset()},onError:a=>{console.error("Create error:",a)}})},O=()=>{d.value&&(h.value=!0,ne.delete(route("master-data.categories.destroy",d.value.id),{preserveScroll:!0,onSuccess:()=>{f.value=!1,_(),d.value=null,h.value=!1},onError:a=>{console.error("Delete error:",a),f.value=!1,h.value=!1}}))},q=()=>{b.value=!1,x.value=null,s.clearErrors(),s.reset()},D=a=>({personal:"Personal",joint:"Joint"})[a]||a,G=a=>({personal:"👤",joint:"👥"})[a]||"📁",V=a=>({income:"Pemasukan",expense:"Pengeluaran",savings:"Tabungan"})[a]||a,L=a=>({income:"💰",expense:"💸",savings:"🏦"})[a]||"📊",Q=v(()=>p.value.filter(a=>a.type==="personal")),R=v(()=>p.value.filter(a=>a.type==="joint")),W=v(()=>p.value.filter(a=>a.budget_type==="income")),X=v(()=>p.value.filter(a=>a.budget_type==="expense"));v(()=>p.value.filter(a=>a.budget_type==="savings"));const Y=v(()=>p.value.filter(a=>a.user_id===m.id));v(()=>p.value.filter(a=>a.user_id!==m.id&&a.type==="joint"));const w=a=>a.user_id===m.id;return ae(()=>{_()}),(a,t)=>(y(),se(le,{title:"Kelola Kategori"},{header:l(()=>[e("div",{class:"flex flex-col md:flex-row md:items-center justify-between gap-2 md:gap-0"},[e("h2",{class:"font-semibold text-xl md:text-2xl text-gray-800 leading-tight flex items-center gap-2"}," 📁 Kelola Kategori "+n(M)),t[9]||(t[9]=e("span",{class:"text-xs md:text-sm text-gray-500 italic text-center md:text-right"}," Atur kategori untuk mengorganisir keuangan bersama 💞 ",-1))])]),default:l(()=>[e("div",ge,[e("div",pe,[g.value?(y(),C("div",{key:0,class:B(["mb-4 md:mb-6 p-3 md:p-4 rounded-xl md:rounded-2xl border backdrop-blur-sm transition-all duration-300",{"bg-green-50 border-green-200 text-green-800":g.value.type==="success","bg-red-50 border-red-200 text-red-800":g.value.type==="error"}])},[e("div",xe,[e("div",ce,[e("span",be,n(g.value.type==="success"?"✅":"⚠️"),1),e("span",ve,n(g.value.message),1)]),e("button",{onClick:t[0]||(t[0]=r=>g.value=null),class:"text-gray-500 hover:text-gray-700 transition-colors text-lg"}," ✕ ")])],2)):A("",!0),t[41]||(t[41]=e("div",{class:"text-center mb-4"},[e("h1",{class:"text-xl md:text-2xl lg:text-3xl font-extrabold text-rose-600 drop-shadow-md mb-2 md:mb-3"}," Kelola Kategori Keuangan "),e("p",{class:"text-gray-600 text-xs md:text-sm leading-relaxed px-2"},[i(" Atur kategori untuk mengorganisir "),e("span",{class:"text-rose-500 font-semibold"},"pemasukan"),i(", "),e("span",{class:"text-sky-500 font-semibold"},"pengeluaran"),i(", dan "),e("span",{class:"text-purple-500 font-semibold"},"tabungan"),i(" kita berdua. Setiap kategori adalah langkah kecil menuju keuangan yang lebih teratur 💫 ")])],-1)),e("div",fe,[e("div",ye,[e("div",ke,[t[10]||(t[10]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"👤")],-1)),e("h3",he,n(Q.value.length),1),t[11]||(t[11]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Personal",-1))])]),e("div",_e,[e("div",we,[t[12]||(t[12]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-green-400 to-emerald-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"👥")],-1)),e("h3",Ce,n(R.value.length),1),t[13]||(t[13]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Joint",-1))])]),e("div",Ae,[e("div",Be,[t[14]||(t[14]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-green-400 to-emerald-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"💰")],-1)),e("h3",Ke,n(W.value.length),1),t[15]||(t[15]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Pemasukan",-1))])]),e("div",Pe,[e("div",Me,[t[16]||(t[16]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-orange-400 to-red-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"💸")],-1)),e("h3",je,n(X.value.length),1),t[17]||(t[17]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Pengeluaran",-1))])]),e("div",Se,[e("div",Te,[t[18]||(t[18]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-purple-400 to-pink-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"📊")],-1)),e("h3",De,n(Y.value.length),1),t[19]||(t[19]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Kategori Saya",-1))])])]),e("div",Ve,[u(o(E),{href:a.route("master-data.accounts.index"),class:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 md:py-3 rounded-lg md:rounded-xl bg-gradient-to-r from-pink-300 via-rose-400 to-rose-500 text-white font-semibold shadow-md hover:shadow-lg hover:from-pink-400 hover:to-rose-600 transition-all duration-300 ease-in-out transform hover:-translate-y-0.5 active:scale-95 text-xs md:text-sm"},{default:l(()=>[...t[20]||(t[20]=[e("span",{class:"text-base md:text-lg"},"🌸",-1),e("span",null,"Akun Baru",-1)])]),_:1},8,["href"]),u(o(E),{href:a.route("budgets.index"),class:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 md:py-3 rounded-lg md:rounded-xl bg-gradient-to-r from-pink-200 via-rose-300 to-rose-400 text-white font-semibold shadow-md hover:shadow-lg hover:from-pink-300 hover:to-rose-500 transition-all duration-300 ease-in-out transform hover:-translate-y-0.5 active:scale-95 text-xs md:text-sm"},{default:l(()=>[...t[21]||(t[21]=[e("span",{class:"text-base md:text-lg"},"💰",-1),e("span",null,"Kelola Anggaran",-1)])]),_:1},8,["href"])]),u(de,{title:"Data Kategori",description:"Kelola semua kategori keuangan kita berdua",columns:U,data:p.value,loading:k.value,"show-actions":!0,pagination:!0,"items-per-page":10,onCreate:j,onEdit:S,onDelete:T},{"column-type":l(({item:r})=>[e("div",Ee,[e("span",Ne,n(G(r.type)),1),e("span",Ie,n(D(r.type)),1)])]),"column-budget_type":l(({item:r})=>[e("div",$e,[e("span",Ue,n(L(r.budget_type)),1),e("span",He,n(V(r.budget_type)),1)])]),"column-user.name":l(({item:r})=>[e("div",Je,[e("span",ze,n(r.user_id===o(m).id?"👤":"👥"),1),e("span",{class:B(["font-medium text-gray-700 text-xs md:text-sm",r.user_id===o(m).id?"text-blue-600":"text-green-600"])},n(r.user_id===o(m).id?"Saya":r.user?.name||"Partner"),3)])]),"column-is_active":l(({item:r})=>[e("span",{class:B(["px-2 py-1 rounded-full text-xs font-medium border shadow-sm",r.is_active?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200"])},n(r.is_active?"🟢 Aktif":"🔴 Nonaktif"),3)]),actions:l(({item:r})=>[u(K,{onClick:Z=>S(r),variant:"secondary",size:"sm",class:"!px-2 !py-1 text-xs",disabled:!w(r),title:w(r)?"Edit kategori":"Hanya dapat mengedit kategori yang Anda buat"},{icon:l(()=>[...t[22]||(t[22]=[i("✏️",-1)])]),default:l(()=>[t[23]||(t[23]=e("span",{class:"hidden xs:inline"},"Edit",-1))]),_:1},8,["onClick","disabled","title"]),u(K,{onClick:Z=>T(r),variant:"danger",size:"sm",class:"!px-2 !py-1 text-xs",disabled:!w(r),title:w(r)?"Hapus kategori":"Hanya dapat menghapus kategori yang Anda buat"},{icon:l(()=>[...t[24]||(t[24]=[i("🗑️",-1)])]),default:l(()=>[t[25]||(t[25]=e("span",{class:"hidden xs:inline"},"Hapus",-1))]),_:1},8,["onClick","disabled","title"])]),_:1},8,["data","loading"]),p.value.length===0&&!k.value?(y(),C("div",Oe,[e("div",qe,[t[28]||(t[28]=e("div",{class:"text-4xl md:text-6xl mb-4"},"📁",-1)),t[29]||(t[29]=e("h3",{class:"text-lg md:text-xl font-bold text-gray-800 mb-2"},"Belum ada kategori",-1)),e("p",{class:"text-gray-600 mb-6 text-sm md:text-base max-w-md mx-auto"}," Mulai dengan membuat kategori pertama untuk mengorganisir keuangan "+n(M)),u(K,{onClick:j,class:"px-4 py-2 md:px-6 md:py-3 text-sm md:text-base"},{icon:l(()=>[...t[26]||(t[26]=[i("➕",-1)])]),default:l(()=>[t[27]||(t[27]=i(" Buat Kategori Pertama ",-1))]),_:1})])])):A("",!0),u(N,{show:b.value,"onUpdate:show":t[6]||(t[6]=r=>b.value=r),title:x.value?"Edit Kategori":"Tambah Kategori Baru",description:x.value?"Perbarui informasi kategori keuangan kita":"Tambahkan kategori baru untuk mengorganisir keuangan bersama",icon:x.value?"✏️":"➕","confirm-text":x.value?"Perbarui":"Simpan","confirm-loading":o(s).processing,onConfirm:z,onClose:q,size:"lg"},{default:l(()=>[e("div",Ge,[u(ie,{modelValue:o(s).name,"onUpdate:modelValue":t[1]||(t[1]=r=>o(s).name=r),label:"Nama Kategori",placeholder:"Contoh: Gaji Bulanan, Belanja Bulanan, Tabungan Pendidikan",error:o(s).errors.name,icon:"📁",required:"",disabled:o(s).processing},null,8,["modelValue","error","disabled"]),u(I,{modelValue:o(s).type,"onUpdate:modelValue":t[2]||(t[2]=r=>o(s).type=r),label:"Tipe Kategori",placeholder:"Pilih tipe kategori",options:H,error:o(s).errors.type,icon:"👥",required:"",disabled:o(s).processing},null,8,["modelValue","error","disabled"]),u(I,{modelValue:o(s).budget_type,"onUpdate:modelValue":t[3]||(t[3]=r=>o(s).budget_type=r),label:"Jenis Anggaran",placeholder:"Pilih jenis anggaran",options:J,error:o(s).errors.budget_type,icon:"💰",required:"",disabled:o(s).processing},null,8,["modelValue","error","disabled"]),u(ue,{modelValue:o(s).description,"onUpdate:modelValue":t[4]||(t[4]=r=>o(s).description=r),label:"Deskripsi Kategori",placeholder:"Tambahkan deskripsi untuk kategori ini (opsional)",error:o(s).errors.description,icon:"📝",rows:3,"show-counter":!0,"max-length":100,disabled:o(s).processing},null,8,["modelValue","error","disabled"]),e("div",Le,[re(e("input",{id:"is_active","onUpdate:modelValue":t[5]||(t[5]=r=>o(s).is_active=r),type:"checkbox","true-value":!0,"false-value":!1,class:"w-5 h-5 text-pink-500 bg-gray-100 border-gray-300 rounded focus:ring-pink-400 focus:ring-2",disabled:o(s).processing},null,8,Qe),[[oe,o(s).is_active]]),t[30]||(t[30]=e("label",{for:"is_active",class:"text-xs md:text-sm font-medium text-gray-700 flex items-center gap-2 cursor-pointer"},[e("span",{class:"text-base md:text-lg"},"🟢"),e("span",null,[i(" Kategori Aktif "),e("span",{class:"text-gray-500 text-xs block"},"Nonaktifkan untuk menyembunyikan kategori")])],-1))]),t[32]||(t[32]=e("div",{class:"p-3 md:p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl md:rounded-2xl border border-blue-200"},[e("p",{class:"text-xs md:text-sm text-gray-700 flex items-start gap-2"},[e("span",{class:"text-base md:text-lg mt-0.5"},"💡"),e("span",null,[e("strong",{class:"block"},"Informasi:"),i(" • "),e("strong",null,"Personal:"),i(" Hanya Anda yang bisa melihat dan mengelola"),e("br"),i(" • "),e("strong",null,"Joint:"),i(" Bisa dilihat dan digunakan oleh Anda dan partner ")])])],-1)),o(s).hasErrors?(y(),C("div",Re,[...t[31]||(t[31]=[e("p",{class:"text-xs md:text-sm text-red-600 flex items-center gap-2"},[e("span",null,"⚠️"),i(" Terdapat kesalahan dalam pengisian form. Silakan periksa kembali input Anda. ")],-1)])])):A("",!0)])]),_:1},8,["show","title","description","icon","confirm-text","confirm-loading"]),u(N,{show:f.value,"onUpdate:show":t[7]||(t[7]=r=>f.value=r),title:"Hapus Kategori",description:d.value?`Apakah Anda yakin ingin menghapus kategori ${d.value.name}?`:"Apakah Anda yakin ingin menghapus kategori ini?",icon:"🗑️","confirm-text":"Hapus","cancel-text":"Batal","confirm-variant":"danger","confirm-loading":h.value,onConfirm:O,onClose:t[8]||(t[8]=r=>f.value=!1)},{default:l(()=>[e("div",We,[t[40]||(t[40]=e("div",{class:"p-3 md:p-4 bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-xl md:rounded-2xl"},[e("p",{class:"text-xs md:text-sm text-red-600 flex items-start gap-2"},[e("span",{class:"text-base md:text-lg mt-0.5"},"⚠️"),e("span",null,[e("strong",{class:"block"},"Tindakan ini tidak dapat dibatalkan!"),i(" Semua data yang terkait dengan kategori ini akan terpengaruh. Pastikan tidak ada transaksi atau anggaran yang menggunakan kategori ini. ")])])],-1)),d.value?(y(),C("div",Xe,[t[39]||(t[39]=e("h4",{class:"font-semibold text-gray-800 text-sm md:text-base mb-2"},"Detail Kategori:",-1)),e("div",Ye,[e("div",null,[t[33]||(t[33]=e("span",{class:"text-gray-600"},"Nama:",-1)),e("p",Ze,n(d.value.name),1)]),e("div",null,[t[34]||(t[34]=e("span",{class:"text-gray-600"},"Tipe:",-1)),e("p",Fe,n(D(d.value.type)),1)]),e("div",null,[t[35]||(t[35]=e("span",{class:"text-gray-600"},"Jenis Anggaran:",-1)),e("p",et,n(V(d.value.budget_type)),1)]),e("div",null,[t[36]||(t[36]=e("span",{class:"text-gray-600"},"Status:",-1)),e("p",{class:B(["font-medium",d.value.is_active?"text-green-600":"text-red-600"])},n(d.value.is_active?"Aktif":"Nonaktif"),3)]),e("div",null,[t[37]||(t[37]=e("span",{class:"text-gray-600"},"Dibuat:",-1)),e("p",tt,n(new Date(d.value.created_at).toLocaleDateString("id-ID")),1)]),e("div",at,[t[38]||(t[38]=e("span",{class:"text-gray-600"},"Dibuat Oleh:",-1)),e("p",st,n(d.value.user_id===o(m).id?"Saya":d.value.user?.name||"Partner"),1)])])])):A("",!0)])]),_:1},8,["show","description","confirm-loading"])])])]),_:1}))}},xt=me(rt,[["__scopeId","data-v-72a2a9ff"]]);export{xt as default};
