import{r as k,Q as E,c as o,g as t,d as l,l as n,n as H,w as s,f as i,s as x,z as h,N,H as I,I as L,t as U,p as z,M as j,k as y,b as m,x as b,F as G,y as O,D as B}from"./vendor-_1bMFsGO.js";import{b as S,c as J,d as W,a as X}from"./SecondaryButton-DsNYSSag.js";import{_ as M}from"./InputError-cn88SIoF.js";import{_ as P}from"./PrimaryButton-DiXT_-aV.js";import{_ as R}from"./TextInput-kUoWsk2U.js";import{_ as Y}from"./InputLabel-Bimi20fQ.js";import"./app-DzK-MRpb.js";/* empty css            */const Z={class:"mt-4"},_={__name:"ConfirmsPassword",props:{title:{type:String,default:"Confirm Password"},content:{type:String,default:"For your security, please confirm your password to continue."},button:{type:String,default:"Confirm"}},emits:["confirmed"],setup(w,{emit:F}){const C=F,u=k(!1),e=E({password:"",error:"",processing:!1}),c=k(null),v=()=>{axios.get(route("password.confirmation")).then(r=>{r.data.confirmed?C("confirmed"):(u.value=!0,setTimeout(()=>c.value.focus(),250))})},p=()=>{e.processing=!0,axios.post(route("password.confirm"),{password:e.password}).then(()=>{e.processing=!1,f(),I().then(()=>C("confirmed"))}).catch(r=>{e.processing=!1,e.error=r.response.data.errors.password[0],c.value.focus()})},f=()=>{u.value=!1,e.password="",e.error=""};return(r,d)=>(t(),o("span",null,[l("span",{onClick:v},[H(r.$slots,"default")]),n(J,{show:u.value,onClose:f},{title:s(()=>[i(h(w.title),1)]),content:s(()=>[i(h(w.content)+" ",1),l("div",Z,[n(R,{ref_key:"passwordInput",ref:c,modelValue:e.password,"onUpdate:modelValue":d[0]||(d[0]=T=>e.password=T),type:"password",class:"mt-1 block w-3/4",placeholder:"Password",autocomplete:"current-password",onKeyup:N(p,["enter"])},null,8,["modelValue"]),n(M,{message:e.error,class:"mt-2"},null,8,["message"])])]),footer:s(()=>[n(S,{onClick:f},{default:s(()=>[...d[1]||(d[1]=[i(" Cancel ",-1)])]),_:1}),n(P,{class:x(["ms-3",{"opacity-25":e.processing}]),disabled:e.processing,onClick:p},{default:s(()=>[i(h(w.button),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}},ee={key:0,class:"text-lg font-medium text-gray-900"},ae={key:1,class:"text-lg font-medium text-gray-900"},te={key:2,class:"text-lg font-medium text-gray-900"},se={key:3},oe={key:0},ne={class:"mt-4 max-w-xl text-sm text-gray-600"},re={key:0,class:"font-semibold"},ie={key:1},le=["innerHTML"],ue={key:0,class:"mt-4 max-w-xl text-sm text-gray-600"},de={class:"font-semibold"},ce={class:"font-mono"},me={key:1,class:"mt-4"},fe={key:1},ke={class:"grid gap-1 max-w-xl mt-4 px-4 py-4 font-mono text-sm bg-gray-100 rounded-lg"},pe={class:"mt-5"},ve={key:0},ge={key:1},Se={__name:"TwoFactorAuthenticationForm",props:{requiresConfirmation:Boolean},setup(w){const F=w,C=L(),u=k(!1),e=k(!1),c=k(!1),v=k(null),p=k(null),f=k([]),r=U({code:""}),d=z(()=>!u.value&&C.props.auth.user?.two_factor_enabled);j(d,()=>{d.value||(r.reset(),r.clearErrors())});const T=()=>{u.value=!0,B.post(route("two-factor.enable"),{},{preserveScroll:!0,onSuccess:()=>Promise.all([q(),Q(),K()]),onFinish:()=>{u.value=!1,e.value=F.requiresConfirmation}})},q=()=>axios.get(route("two-factor.qr-code")).then(g=>{v.value=g.data.svg}),Q=()=>axios.get(route("two-factor.secret-key")).then(g=>{p.value=g.data.secretKey}),K=()=>axios.get(route("two-factor.recovery-codes")).then(g=>{f.value=g.data}),$=()=>{r.post(route("two-factor.confirm"),{errorBag:"confirmTwoFactorAuthentication",preserveScroll:!0,preserveState:!0,onSuccess:()=>{e.value=!1,v.value=null,p.value=null}})},D=()=>{axios.post(route("two-factor.recovery-codes")).then(()=>K())},V=()=>{c.value=!0,B.delete(route("two-factor.disable"),{preserveScroll:!0,onSuccess:()=>{c.value=!1,e.value=!1}})};return(g,a)=>(t(),y(X,null,{title:s(()=>[...a[1]||(a[1]=[i(" Autentikasi Dua Faktor ",-1)])]),description:s(()=>[...a[2]||(a[2]=[i(" Tambahkan keamanan tambahan ke akun Anda menggunakan autentikasi dua faktor. ",-1)])]),content:s(()=>[d.value&&!e.value?(t(),o("h3",ee," Anda telah mengaktifkan autentikasi dua faktor. ")):d.value&&e.value?(t(),o("h3",ae," Selesaikan pengaktifan autentikasi dua faktor. ")):(t(),o("h3",te," Anda belum mengaktifkan autentikasi dua faktor. ")),a[11]||(a[11]=l("div",{class:"mt-3 max-w-xl text-sm text-gray-600"},[l("p",null," Ketika autentikasi dua faktor diaktifkan, Anda akan diminta untuk memasukkan token acak yang aman selama autentikasi. Anda dapat mengambil token ini dari aplikasi Google Authenticator di ponsel Anda. ")],-1)),d.value?(t(),o("div",se,[v.value?(t(),o("div",oe,[l("div",ne,[e.value?(t(),o("p",re," Untuk menyelesaikan pengaktifan autentikasi dua faktor, pindai kode QR berikut menggunakan aplikasi autentikator di ponsel Anda atau masukkan kunci setup dan berikan kode OTP yang dihasilkan. ")):(t(),o("p",ie," Autentikasi dua faktor sekarang telah diaktifkan. Pindai kode QR berikut menggunakan aplikasi autentikator di ponsel Anda atau masukkan kunci setup. "))]),l("div",{class:"mt-4 p-2 inline-block bg-white",innerHTML:v.value},null,8,le),p.value?(t(),o("div",ue,[l("p",de,[a[3]||(a[3]=i(" Kunci Setup: ",-1)),l("span",ce,h(p.value),1)])])):m("",!0),e.value?(t(),o("div",me,[n(Y,{for:"code",value:"Kode"}),n(R,{id:"code",modelValue:b(r).code,"onUpdate:modelValue":a[0]||(a[0]=A=>b(r).code=A),type:"text",name:"code",class:"block mt-1 w-1/2",inputmode:"numeric",autofocus:"",autocomplete:"one-time-code",onKeyup:N($,["enter"])},null,8,["modelValue"]),n(M,{message:b(r).errors.code,class:"mt-2"},null,8,["message"])])):m("",!0)])):m("",!0),f.value.length>0&&!e.value?(t(),o("div",fe,[a[4]||(a[4]=l("div",{class:"mt-4 max-w-xl text-sm text-gray-600"},[l("p",{class:"font-semibold"}," Simpan kode pemulihan ini di pengelola kata sandi yang aman. Mereka dapat digunakan untuk memulihkan akses ke akun Anda jika perangkat autentikasi dua faktor hilang. ")],-1)),l("div",ke,[(t(!0),o(G,null,O(f.value,A=>(t(),o("div",{key:A},h(A),1))),128))])])):m("",!0)])):m("",!0),l("div",pe,[d.value?(t(),o("div",ge,[n(_,{onConfirmed:$},{default:s(()=>[e.value?(t(),y(P,{key:0,type:"button",class:x(["me-3",{"opacity-25":u.value||b(r).processing}]),disabled:u.value||b(r).processing},{default:s(()=>[...a[6]||(a[6]=[i(" Konfirmasi ",-1)])]),_:1},8,["class","disabled"])):m("",!0)]),_:1}),n(_,{onConfirmed:D},{default:s(()=>[f.value.length>0&&!e.value?(t(),y(S,{key:0,class:"me-3"},{default:s(()=>[...a[7]||(a[7]=[i(" Regenerasi Kode Pemulihan ",-1)])]),_:1})):m("",!0)]),_:1}),n(_,{onConfirmed:K},{default:s(()=>[f.value.length===0&&!e.value?(t(),y(S,{key:0,class:"me-3"},{default:s(()=>[...a[8]||(a[8]=[i(" Tampilkan Kode Pemulihan ",-1)])]),_:1})):m("",!0)]),_:1}),n(_,{onConfirmed:V},{default:s(()=>[e.value?(t(),y(S,{key:0,class:x({"opacity-25":c.value}),disabled:c.value},{default:s(()=>[...a[9]||(a[9]=[i(" Batal ",-1)])]),_:1},8,["class","disabled"])):m("",!0)]),_:1}),n(_,{onConfirmed:V},{default:s(()=>[e.value?m("",!0):(t(),y(W,{key:0,class:x({"opacity-25":c.value}),disabled:c.value},{default:s(()=>[...a[10]||(a[10]=[i(" Nonaktifkan ",-1)])]),_:1},8,["class","disabled"]))]),_:1})])):(t(),o("div",ve,[n(_,{onConfirmed:T},{default:s(()=>[n(P,{type:"button",class:x({"opacity-25":u.value}),disabled:u.value},{default:s(()=>[...a[5]||(a[5]=[i(" Aktifkan ",-1)])]),_:1},8,["class","disabled"])]),_:1})]))])]),_:1}))}};export{Se as default};
