import{A as ne}from"./AppLayout-C9Lt9nJP.js";import{I as le,r as c,L as ie,t as de,p as h,o as ue,k as ge,g as f,w as n,d as e,c as D,b as S,l as u,s as C,z as r,f as i,x as l,D as G}from"./vendor-CaulYgOW.js";import{_ as M,a as me}from"./BaseCard-B18XuVDn.js";import{_ as V,B as q,S as O}from"./SelectInput-CCmOdJSq.js";import{_ as L}from"./TextInput-X0I6SgWH.js";import{_ as pe}from"./AccountInput-DNx9eD28.js";import{_ as ce}from"./app-BXVwXSr1.js";/* empty css            */const ye={class:"py-2 min-h-screen relative overflow-hidden"},xe={class:"w-full px-4 sm:px-6 lg:px-8 relative z-10"},be={class:"flex items-center justify-between"},ve={class:"flex items-center gap-3"},fe={class:"text-xl"},_e={class:"font-medium"},ke={class:"grid grid-cols-2 lg:grid-cols-4 gap-2 mb-4"},we={class:"p-4"},Pe={class:"text-xl font-bold text-gray-800 mb-1"},je={class:"text-xs text-gray-500 mt-1"},Te={class:"p-4"},he={class:"text-xl font-bold text-gray-800 mb-1"},De={class:"text-xs text-gray-500 mt-1"},Se={class:"p-4"},Ce={class:"text-xl font-bold text-gray-800 mb-1"},Me={class:"text-xs text-gray-500 mt-1"},Ve={class:"p-4"},Be={class:"text-xl font-bold text-gray-800 mb-1"},Ee={class:"text-xs text-gray-500 mt-1"},$e={class:"flex items-center gap-2"},Ae={class:"text-lg"},Ie={class:"flex items-center gap-2"},Ne={class:"font-bold text-gray-800 text-sm text-green-700"},Ke={class:"flex items-center gap-2"},Ue={class:"font-medium text-gray-700 text-sm"},ze={class:"flex items-center gap-2"},He={class:"text-lg"},Ge={class:"flex items-center gap-2"},qe={class:"font-medium text-gray-700 text-sm"},Oe={key:1,class:"text-center mt-6"},Le={class:"bg-white/80 backdrop-blur-md rounded-3xl shadow-lg p-8 border border-gray-100"},Re={class:"space-y-3 max-h-[60vh] overflow-y-auto pr-2"},Je={key:0,class:"p-2 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-2xl"},Qe={class:"space-y-4"},We={key:0,class:"p-4 bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200 rounded-2xl"},Xe={class:"grid grid-cols-2 gap-4 text-sm"},Ye={class:"font-medium text-gray-800"},Ze={class:"font-medium text-gray-800"},Fe={class:"font-bold text-green-700"},et={class:"font-medium text-gray-800"},tt={class:"font-medium text-gray-800"},at={class:"font-medium text-gray-800"},st={class:"font-medium text-gray-800"},ot={class:"font-medium text-gray-800"},rt={__name:"Index",setup(nt){const B=le(),E=B.props.auth.user,R=E?.partner?.name??"Pasangan",$=`${E?.name??""} üíï ${R}`,_=c([]),k=c([]),m=c({}),w=c(!1),P=c(!1),y=c(!1),x=c(!1),p=c(null),d=c(null),g=c(null);ie(()=>B.props.flash,a=>{(a.success||a.error)&&(g.value={message:a.success||a.error,type:a.type||(a.success?"success":"error")},setTimeout(()=>{g.value=null},5e3))},{immediate:!0});const o=de({category_id:"",name:"",target_total_amount:0,target_completion_date:"",status:"planning"}),J=[{key:"name",label:"Nama Proyek",icon:"üíº",sortable:!0},{key:"category",label:"Kategori Tabungan",icon:"üìÅ",sortable:!0},{key:"target_total_amount",label:"Target Dana",icon:"üí∞",sortable:!0,type:"currency"},{key:"target_completion_date",label:"Target Selesai",icon:"üìÖ",sortable:!0,type:"date"},{key:"status",label:"Status",icon:"üìä",sortable:!0,type:"badge"},{key:"category_user.name",label:"Pemilik Kategori",icon:"üë§",sortable:!0},{key:"created_at",label:"Dibuat",icon:"üïí",sortable:!0,type:"date"}],Q=[{value:"planning",label:"üìã Planning"},{value:"on_going",label:"üöÄ On Going"},{value:"completed",label:"‚úÖ Completed"}],j=async()=>{w.value=!0;try{const a=await axios.get(route("projects.index"));_.value=a.data.projects||a.data,console.log("Projects loaded:",_.value)}catch(a){console.error("Error loading projects:",a),g.value={message:"Gagal memuat data proyek",type:"error"}}finally{w.value=!1}},A=async()=>{try{const a=await axios.get(route("projects.api.categories"));k.value=a.data,console.log("Categories loaded:",k.value)}catch(a){console.error("Error loading categories:",a),g.value={message:"Gagal memuat data kategori",type:"error"}}},W=async()=>{try{const a=await axios.get(route("projects.api.summary"));m.value=a.data,console.log("Project summary loaded:",m.value)}catch(a){console.error("Error loading project summary:",a)}},v=()=>{const a=new Date;a.setDate(a.getDate()+30),o.target_completion_date=a.toISOString().split("T")[0]},I=async()=>{p.value=null,o.reset(),o.status="planning",o.target_total_amount=0,v(),y.value=!0,await A()},N=async a=>{if(!a.is_owner){g.value={message:"Anda hanya dapat mengedit proyek pada kategori yang Anda buat",type:"error"};return}p.value=a,o.category_id=a.category_id,o.name=a.name,o.target_total_amount=a.target_total_amount,o.target_completion_date=a.target_completion_date,o.status=a.status,y.value=!0,await A()},K=a=>{if(!a.is_owner){g.value={message:"Anda hanya dapat menghapus proyek pada kategori yang Anda buat",type:"error"};return}d.value=a,x.value=!0},X=async a=>{try{G.visit(route("projects.items.index",{project:a}))}catch(t){console.error("Error generating encrypted link:",t),g.value={message:"Gagal membuka project",type:"error"}}},Y=()=>{p.value?o.put(route("projects.update",p.value.id),{preserveScroll:!0,onSuccess:()=>{y.value=!1,j(),o.reset(),p.value=null,v()},onError:a=>{console.error("Update error:",a)}}):o.post(route("projects.store"),{preserveScroll:!0,onSuccess:()=>{y.value=!1,j(),o.reset(),v()},onError:a=>{console.error("Create error:",a)}})},Z=()=>{d.value&&(P.value=!0,G.delete(route("projects.destroy",d.value.id),{preserveScroll:!0,onSuccess:()=>{x.value=!1,j(),d.value=null,P.value=!1},onError:a=>{console.error("Delete error:",a),x.value=!1,P.value=!1}}))},F=()=>{y.value=!1,p.value=null,o.clearErrors(),o.reset(),v()},b=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),U=a=>new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),z=a=>({planning:"Planning",on_going:"On Going",completed:"Completed"})[a]||a,ee=a=>({planning:"üìã",on_going:"üöÄ",completed:"‚úÖ"})[a]||"üíº",te=a=>({personal:"Personal",joint:"Joint"})[a]||a,ae=h(()=>m.value.total_budget||0),se=h(()=>m.value.planning_budget||0),oe=h(()=>m.value.ongoing_budget||0),re=h(()=>m.value.completed_budget||0),T=a=>a.is_owner;return ue(()=>{j(),W(),v()}),(a,t)=>(f(),ge(ne,{title:"Manajemen Proyek Tabungan"},{header:n(()=>[e("div",{class:"flex items-center justify-between"},[e("h2",{class:"font-semibold text-2xl text-gray-800 leading-tight flex items-center gap-2"}," üí∞ Manajemen Proyek Tabungan "+r($)),t[9]||(t[9]=e("span",{class:"text-sm text-gray-500 italic"},"Kelola proyek dan target tabungan bersama üíû",-1))])]),default:n(()=>[e("div",ye,[e("div",xe,[g.value?(f(),D("div",{key:0,class:C(["mb-6 p-4 rounded-2xl border backdrop-blur-sm transition-all duration-300",{"bg-green-50 border-green-200 text-green-800":g.value.type==="success","bg-red-50 border-red-200 text-red-800":g.value.type==="error"}])},[e("div",be,[e("div",ve,[e("span",fe,r(g.value.type==="success"?"‚úÖ":"‚ö†Ô∏è"),1),e("span",_e,r(g.value.message),1)]),e("button",{onClick:t[0]||(t[0]=s=>g.value=null),class:"text-gray-500 hover:text-gray-700 transition-colors"}," ‚úï ")])],2)):S("",!0),t[43]||(t[43]=e("div",{class:"text-center mb-4"},[e("h1",{class:"text-3xl md:text-4xl font-extrabold text-rose-600 drop-shadow-md mb-3"}," Manajemen Proyek Tabungan "),e("p",{class:"text-gray-600 text-lg max-w-2xl mx-auto"},[i(" Kelola semua proyek tabungan dan rencana keuangan masa depan "),e("span",{class:"text-blue-500 font-semibold"},"bersama pasangan"),i(". Pantau progress dan target dana untuk mencapai tujuan finansial üí´ ")])],-1)),e("div",ke,[u(M,{class:"text-center hover:scale-[1.02] transition transform border border-rose-100"},{default:n(()=>[e("div",we,[t[10]||(t[10]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-rose-400 to-pink-500 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md"},[e("span",{class:"text-xl text-white"},"üí∞")],-1)),e("h3",Pe,r(b(ae.value)),1),t[11]||(t[11]=e("p",{class:"text-sm text-gray-600"},"Total Target Dana",-1)),e("p",je,r(m.value.total_projects||0)+" Proyek",1)])]),_:1}),u(M,{class:"text-center hover:scale-[1.02] transition transform border border-blue-100"},{default:n(()=>[e("div",Te,[t[12]||(t[12]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md"},[e("span",{class:"text-xl text-white"},"üìã")],-1)),e("h3",he,r(m.value.planning_projects||0),1),t[13]||(t[13]=e("p",{class:"text-sm text-gray-600"},"Dalam Perencanaan",-1)),e("p",De,r(b(se.value)),1)])]),_:1}),u(M,{class:"text-center hover:scale-[1.02] transition transform border border-yellow-100"},{default:n(()=>[e("div",Se,[t[14]||(t[14]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md"},[e("span",{class:"text-xl text-white"},"üöÄ")],-1)),e("h3",Ce,r(m.value.ongoing_projects||0),1),t[15]||(t[15]=e("p",{class:"text-sm text-gray-600"},"Sedang Berjalan",-1)),e("p",Me,r(b(oe.value)),1)])]),_:1}),u(M,{class:"text-center hover:scale-[1.02] transition transform border border-green-100"},{default:n(()=>[e("div",Ve,[t[16]||(t[16]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-green-400 to-emerald-500 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md"},[e("span",{class:"text-xl text-white"},"‚úÖ")],-1)),e("h3",Be,r(m.value.completed_projects||0),1),t[17]||(t[17]=e("p",{class:"text-sm text-gray-600"},"Selesai",-1)),e("p",Ee,r(b(re.value)),1)])]),_:1})]),u(me,{title:"Data Proyek Tabungan",description:"Kelola semua proyek tabungan dan target keuangan kita berdua",columns:J,data:_.value,loading:w.value,"show-actions":!0,pagination:!0,"items-per-page":10,onCreate:I,onEdit:N,onDelete:K},{"column-status":n(({item:s})=>[e("div",$e,[e("span",Ae,r(ee(s.status)),1),e("span",{class:C(["px-2 py-1 rounded-full text-xs font-medium",s.status_badge])},r(z(s.status)),3)])]),"column-target_total_amount":n(({item:s})=>[e("div",Ie,[t[18]||(t[18]=e("span",{class:"text-lg text-green-600"},"üí∞",-1)),e("span",Ne,r(b(s.target_total_amount)),1)])]),"column-target_completion_date":n(({item:s})=>[e("div",Ke,[t[19]||(t[19]=e("span",{class:"text-lg"},"üìÖ",-1)),e("span",Ue,r(U(s.target_completion_date)),1)])]),"column-category_user.name":n(({item:s})=>[e("div",ze,[e("span",He,r(s.is_owner?"üë§":"üë•"),1),e("span",{class:C(["font-medium text-gray-700 text-sm",s.is_owner?"text-blue-600":"text-green-600"])},r(s.is_owner?"Saya":s.category_user?.name||"Partner"),3),e("span",{class:C(["text-xs px-2 py-1 rounded-full",s.is_owner?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"])},r(te(s.category_user?.type||"personal")),3)])]),"column-created_at":n(({item:s})=>[e("div",Ge,[t[20]||(t[20]=e("span",{class:"text-lg"},"üïí",-1)),e("span",qe,r(s.created_at),1)])]),actions:n(({item:s})=>[u(V,{onClick:H=>X(s),variant:"primary",size:"sm",class:"!px-3 !py-2",title:"Buka project dengan link aman"},{icon:n(()=>[...t[21]||(t[21]=[i("üîê",-1)])]),default:n(()=>[t[22]||(t[22]=i(" Buka Items ",-1))]),_:1},8,["onClick"]),u(V,{onClick:H=>N(s),variant:"secondary",size:"sm",class:"!px-2 !py-2",disabled:!T(s),title:T(s)?"Edit proyek":"Hanya dapat mengedit proyek pada kategori yang Anda buat"},{icon:n(()=>[...t[23]||(t[23]=[i("‚úèÔ∏è",-1)])]),default:n(()=>[t[24]||(t[24]=i(" Edit ",-1))]),_:1},8,["onClick","disabled","title"]),u(V,{onClick:H=>K(s),variant:"danger",size:"sm",class:"!px-2 !py-2",disabled:!T(s),title:T(s)?"Hapus proyek":"Hanya dapat menghapus proyek pada kategori yang Anda buat"},{icon:n(()=>[...t[25]||(t[25]=[i("üóëÔ∏è",-1)])]),default:n(()=>[t[26]||(t[26]=i(" Hapus ",-1))]),_:1},8,["onClick","disabled","title"])]),_:1},8,["data","loading"]),_.value.length===0&&!w.value?(f(),D("div",Oe,[e("div",Le,[t[29]||(t[29]=e("div",{class:"text-6xl mb-4"},"üí∞",-1)),t[30]||(t[30]=e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},"Belum ada proyek tabungan",-1)),e("p",{class:"text-gray-600 mb-6 max-w-md mx-auto"}," Mulai dengan membuat proyek tabungan pertama untuk mengelola target keuangan "+r($)),u(V,{onClick:I,class:"px-6 py-3"},{icon:n(()=>[...t[27]||(t[27]=[i("‚ûï",-1)])]),default:n(()=>[t[28]||(t[28]=i(" Buat Proyek Tabungan Pertama ",-1))]),_:1})])])):S("",!0),u(q,{show:y.value,"onUpdate:show":t[6]||(t[6]=s=>y.value=s),title:p.value?"Edit Proyek Tabungan":"Tambah Proyek Tabungan Baru",description:p.value?"Perbarui informasi proyek tabungan kita":"Tambahkan proyek tabungan baru untuk mengelola target keuangan bersama",icon:p.value?"‚úèÔ∏è":"‚ûï","confirm-text":p.value?"Perbarui":"Simpan","confirm-loading":l(o).processing,onConfirm:Y,onClose:F,size:"lg"},{default:n(()=>[e("div",Re,[u(O,{modelValue:l(o).category_id,"onUpdate:modelValue":t[1]||(t[1]=s=>l(o).category_id=s),label:"Kategori Tabungan",placeholder:"Pilih kategori tabungan",options:k.value.map(s=>({value:s.id,label:`${s.name} ${s.type==="joint"?"üë•":"üë§"}`})),error:l(o).errors.category_id,icon:"üìÅ",required:"",disabled:l(o).processing||k.value.length===0},null,8,["modelValue","options","error","disabled"]),u(L,{modelValue:l(o).name,"onUpdate:modelValue":t[2]||(t[2]=s=>l(o).name=s),label:"Nama Proyek",placeholder:"Contoh: Tabungan Pernikahan, Dana DP Rumah, Liburan Keluarga",error:l(o).errors.name,icon:"üíº",required:"",disabled:l(o).processing},null,8,["modelValue","error","disabled"]),u(pe,{modelValue:l(o).target_total_amount,"onUpdate:modelValue":t[3]||(t[3]=s=>l(o).target_total_amount=s),label:"Target Total Dana",placeholder:"Masukkan target total dana",error:l(o).errors.target_total_amount,icon:"üí∞","account-type":"account_number",required:"",disabled:l(o).processing},null,8,["modelValue","error","disabled"]),u(L,{modelValue:l(o).target_completion_date,"onUpdate:modelValue":t[4]||(t[4]=s=>l(o).target_completion_date=s),label:"Target Tanggal Selesai",type:"date",error:l(o).errors.target_completion_date,icon:"üìÖ",required:"",disabled:l(o).processing},null,8,["modelValue","error","disabled"]),u(O,{modelValue:l(o).status,"onUpdate:modelValue":t[5]||(t[5]=s=>l(o).status=s),label:"Status Proyek",placeholder:"Pilih status proyek",options:Q,error:l(o).errors.status,icon:"üìä",required:"",disabled:l(o).processing},null,8,["modelValue","error","disabled"]),t[32]||(t[32]=e("div",{class:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-200"},[e("p",{class:"text-sm text-gray-700 flex items-start gap-2"},[e("span",{class:"text-lg mt-0.5"},"üí°"),e("span",null,[e("strong",{class:"block"},"Informasi Proyek Tabungan:"),i(" ‚Ä¢ Hanya kategori dengan type "),e("strong",null,"savings"),i(" yang bisa digunakan"),e("br"),i(" ‚Ä¢ "),e("strong",null,"Planning:"),i(" Proyek dalam tahap perencanaan"),e("br"),i(" ‚Ä¢ "),e("strong",null,"On Going:"),i(" Proyek sedang berjalan dan menabung"),e("br"),i(" ‚Ä¢ "),e("strong",null,"Completed:"),i(" Target tabungan tercapai ")])])],-1)),l(o).hasErrors?(f(),D("div",Je,[...t[31]||(t[31]=[e("p",{class:"text-sm text-red-600 flex items-center gap-2"},[e("span",null,"‚ö†Ô∏è"),i(" Terdapat kesalahan dalam pengisian form. Silakan periksa kembali input Anda. ")],-1)])])):S("",!0)])]),_:1},8,["show","title","description","icon","confirm-text","confirm-loading"]),u(q,{show:x.value,"onUpdate:show":t[7]||(t[7]=s=>x.value=s),title:"Hapus Proyek Tabungan",description:d.value?`Apakah Anda yakin ingin menghapus proyek tabungan ${d.value.name}?`:"Apakah Anda yakin ingin menghapus proyek tabungan ini?",icon:"üóëÔ∏è","confirm-text":"Hapus","cancel-text":"Batal","confirm-variant":"danger","confirm-loading":P.value,onConfirm:Z,onClose:t[8]||(t[8]=s=>x.value=!1)},{default:n(()=>[e("div",Qe,[t[42]||(t[42]=e("div",{class:"p-4 bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-2xl"},[e("p",{class:"text-sm text-red-600 flex items-start gap-2"},[e("span",{class:"text-lg mt-0.5"},"‚ö†Ô∏è"),e("span",null,[e("strong",{class:"block"},"Tindakan ini tidak dapat dibatalkan!"),i(" Semua data item yang terkait dengan proyek tabungan ini akan ikut terhapus. Pastikan Anda sudah membackup data penting. ")])])],-1)),d.value?(f(),D("div",We,[t[41]||(t[41]=e("h4",{class:"font-semibold text-gray-800 mb-2"},"Detail Proyek Tabungan:",-1)),e("div",Xe,[e("div",null,[t[33]||(t[33]=e("span",{class:"text-gray-600"},"Nama:",-1)),e("p",Ye,r(d.value.name),1)]),e("div",null,[t[34]||(t[34]=e("span",{class:"text-gray-600"},"Kategori:",-1)),e("p",Ze,r(d.value.category),1)]),e("div",null,[t[35]||(t[35]=e("span",{class:"text-gray-600"},"Target Dana:",-1)),e("p",Fe,r(b(d.value.target_total_amount)),1)]),e("div",null,[t[36]||(t[36]=e("span",{class:"text-gray-600"},"Target Selesai:",-1)),e("p",et,r(U(d.value.target_completion_date)),1)]),e("div",null,[t[37]||(t[37]=e("span",{class:"text-gray-600"},"Status:",-1)),e("p",tt,r(z(d.value.status)),1)]),e("div",null,[t[38]||(t[38]=e("span",{class:"text-gray-600"},"Pemilik Kategori:",-1)),e("p",at,r(d.value.is_owner?"Saya":d.value.category_user?.name||"Partner"),1)]),e("div",null,[t[39]||(t[39]=e("span",{class:"text-gray-600"},"Item:",-1)),e("p",st,r(d.value.items_count)+" item",1)]),e("div",null,[t[40]||(t[40]=e("span",{class:"text-gray-600"},"Progress:",-1)),e("p",ot,r(Math.round(d.value.progress_percentage))+"%",1)])])])):S("",!0)])]),_:1},8,["show","description","confirm-loading"])])])]),_:1}))}},yt=ce(rt,[["__scopeId","data-v-bff31450"]]);export{yt as default};
