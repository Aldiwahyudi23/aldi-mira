import{A as re}from"./AppLayout-B-FfRgLz.js";import{I as ne,r as c,M as le,t as de,p as T,o as ie,k as ue,g as f,w as l,d as e,c as D,b as S,l as m,s as C,z as r,f as d,x as n,D as H}from"./vendor-_1bMFsGO.js";import{B as me}from"./BaseTable-C_vaDzBU.js";import{B,a as G,S as q}from"./SelectInput--H5tB_dZ.js";import{_ as O}from"./TextInput-CfF7StUs.js";import{_ as ge}from"./AccountInput-BwCpK7sc.js";import{_ as pe}from"./app-DzK-MRpb.js";/* empty css            */const ce={class:"py-2 min-h-screen relative overflow-hidden"},xe={class:"w-full px-3 sm:px-4 lg:px-6 relative z-10"},be={class:"flex items-center justify-between"},ye={class:"flex items-center gap-2 md:gap-3"},ve={class:"text-lg md:text-xl"},fe={class:"font-medium text-sm md:text-base"},_e={class:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3 mb-4"},ke={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-rose-100"},we={class:"text-center"},he={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},Pe={class:"text-xs text-gray-500 mt-1"},je={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-blue-100"},Te={class:"text-center"},De={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},Se={class:"text-xs text-gray-500 mt-1"},Ce={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-yellow-100"},Be={class:"text-center"},Me={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},Ve={class:"text-xs text-gray-500 mt-1"},Ee={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-green-100"},Ie={class:"text-center"},Ae={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},$e={class:"text-xs text-gray-500 mt-1"},Ne={class:"flex items-center gap-2"},Ke={class:"text-base md:text-lg"},Ue={class:"flex items-center gap-2"},ze={class:"font-bold text-gray-800 text-xs md:text-sm text-green-700"},He={class:"flex items-center gap-2"},Ge={class:"font-medium text-gray-700 text-xs md:text-sm"},qe={class:"flex items-center gap-2"},Oe={class:"text-base md:text-lg"},Le={class:"flex items-center gap-2"},Re={class:"font-medium text-gray-700 text-xs md:text-sm"},Je={key:1,class:"text-center mt-6"},Qe={class:"bg-white/80 backdrop-blur-md rounded-xl md:rounded-2xl shadow-lg p-6 md:p-8 border border-gray-100"},We={class:"space-y-3 max-h-[50vh] md:max-h-[60vh] overflow-y-auto pr-2"},Xe={key:0,class:"p-2 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl md:rounded-2xl"},Ye={class:"space-y-4"},Ze={key:0,class:"p-3 md:p-4 bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200 rounded-xl md:rounded-2xl"},Fe={class:"grid grid-cols-1 xs:grid-cols-2 gap-3 md:gap-4 text-xs md:text-sm"},et={class:"font-medium text-gray-800 truncate"},tt={class:"font-medium text-gray-800"},at={class:"font-bold text-green-700"},st={class:"font-medium text-gray-800"},ot={class:"font-medium text-gray-800"},rt={class:"font-medium text-gray-800"},nt={class:"font-medium text-gray-800"},lt={class:"xs:col-span-2"},dt={class:"font-medium text-gray-800"},it={__name:"Index",setup(ut){const M=ne(),V=M.props.auth.user,L=V?.partner?.name??"Pasangan",E=`${V?.name??""} 💕 ${L}`,_=c([]),k=c([]),g=c({}),w=c(!1),h=c(!1),x=c(!1),b=c(!1),p=c(null),i=c(null),u=c(null);le(()=>M.props.flash,a=>{(a.success||a.error)&&(u.value={message:a.success||a.error,type:a.type||(a.success?"success":"error")},setTimeout(()=>{u.value=null},5e3))},{immediate:!0});const o=de({category_id:"",name:"",target_total_amount:0,target_completion_date:"",status:"planning"}),R=[{key:"name",label:"Nama Proyek",icon:"💼",sortable:!0},{key:"category",label:"Kategori Tabungan",icon:"📁",sortable:!0},{key:"target_total_amount",label:"Target Dana",icon:"💰",sortable:!0,type:"currency"},{key:"target_completion_date",label:"Target Selesai",icon:"📅",sortable:!0,type:"date"},{key:"status",label:"Status",icon:"📊",sortable:!0,type:"badge"},{key:"category_user.name",label:"Pemilik Kategori",icon:"👤",sortable:!0},{key:"created_at",label:"Dibuat",icon:"🕒",sortable:!0,type:"date"}],J=[{value:"planning",label:"📋 Planning"},{value:"on_going",label:"🚀 On Going"},{value:"completed",label:"✅ Completed"}],P=async()=>{w.value=!0;try{const a=await axios.get(route("projects.index"));_.value=a.data.projects||a.data,console.log("Projects loaded:",_.value)}catch(a){console.error("Error loading projects:",a),u.value={message:"Gagal memuat data proyek",type:"error"}}finally{w.value=!1}},I=async()=>{try{const a=await axios.get(route("projects.api.categories"));k.value=a.data,console.log("Categories loaded:",k.value)}catch(a){console.error("Error loading categories:",a),u.value={message:"Gagal memuat data kategori",type:"error"}}},Q=async()=>{try{const a=await axios.get(route("projects.api.summary"));g.value=a.data,console.log("Project summary loaded:",g.value)}catch(a){console.error("Error loading project summary:",a)}},v=()=>{const a=new Date;a.setDate(a.getDate()+30),o.target_completion_date=a.toISOString().split("T")[0]},A=async()=>{p.value=null,o.reset(),o.status="planning",o.target_total_amount=0,v(),x.value=!0,await I()},$=async a=>{if(!a.is_owner){u.value={message:"Anda hanya dapat mengedit proyek pada kategori yang Anda buat",type:"error"};return}p.value=a,o.category_id=a.category_id,o.name=a.name,o.target_total_amount=a.target_total_amount,o.target_completion_date=a.target_completion_date,o.status=a.status,x.value=!0,await I()},N=a=>{if(!a.is_owner){u.value={message:"Anda hanya dapat menghapus proyek pada kategori yang Anda buat",type:"error"};return}i.value=a,b.value=!0},W=async a=>{try{H.visit(route("projects.items.index",{project:a}))}catch(t){console.error("Error generating encrypted link:",t),u.value={message:"Gagal membuka project",type:"error"}}},X=()=>{p.value?o.put(route("projects.update",p.value.id),{preserveScroll:!0,onSuccess:()=>{x.value=!1,P(),o.reset(),p.value=null,v()},onError:a=>{console.error("Update error:",a)}}):o.post(route("projects.store"),{preserveScroll:!0,onSuccess:()=>{x.value=!1,P(),o.reset(),v()},onError:a=>{console.error("Create error:",a)}})},Y=()=>{i.value&&(h.value=!0,H.delete(route("projects.destroy",i.value.id),{preserveScroll:!0,onSuccess:()=>{b.value=!1,P(),i.value=null,h.value=!1},onError:a=>{console.error("Delete error:",a),b.value=!1,h.value=!1}}))},Z=()=>{x.value=!1,p.value=null,o.clearErrors(),o.reset(),v()},y=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),K=a=>new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),U=a=>({planning:"Planning",on_going:"On Going",completed:"Completed"})[a]||a,F=a=>({planning:"📋",on_going:"🚀",completed:"✅"})[a]||"💼",ee=a=>({personal:"Personal",joint:"Joint"})[a]||a,te=T(()=>g.value.total_budget||0),ae=T(()=>g.value.planning_budget||0),se=T(()=>g.value.ongoing_budget||0),oe=T(()=>g.value.completed_budget||0),j=a=>a.is_owner;return ie(()=>{P(),Q(),v()}),(a,t)=>(f(),ue(re,{title:"Manajemen Proyek Tabungan"},{header:l(()=>[e("div",{class:"flex flex-col md:flex-row md:items-center justify-between gap-2 md:gap-0"},[e("h2",{class:"font-semibold text-xl md:text-2xl text-gray-800 leading-tight flex items-center gap-2"}," 💰 Manajemen Proyek "+r(E)),t[9]||(t[9]=e("span",{class:"text-xs md:text-sm text-gray-500 italic text-center md:text-right"}," Kelola proyek dan target tabungan bersama 💞 ",-1))])]),default:l(()=>[e("div",ce,[e("div",xe,[u.value?(f(),D("div",{key:0,class:C(["mb-4 md:mb-6 p-3 md:p-4 rounded-xl md:rounded-2xl border backdrop-blur-sm transition-all duration-300",{"bg-green-50 border-green-200 text-green-800":u.value.type==="success","bg-red-50 border-red-200 text-red-800":u.value.type==="error"}])},[e("div",be,[e("div",ye,[e("span",ve,r(u.value.type==="success"?"✅":"⚠️"),1),e("span",fe,r(u.value.message),1)]),e("button",{onClick:t[0]||(t[0]=s=>u.value=null),class:"text-gray-500 hover:text-gray-700 transition-colors text-lg"}," ✕ ")])],2)):S("",!0),t[43]||(t[43]=e("div",{class:"text-center mb-4"},[e("h1",{class:"text-xl md:text-2xl lg:text-3xl font-extrabold text-rose-600 drop-shadow-md mb-2 md:mb-3"}," Manajemen Proyek Tabungan "),e("p",{class:"text-gray-600 text-xs md:text-sm leading-relaxed px-2"},[d(" Kelola semua proyek tabungan dan rencana keuangan masa depan "),e("span",{class:"text-blue-500 font-semibold"},"bersama pasangan"),d(". Pantau progress dan target dana untuk mencapai tujuan finansial 💫 ")])],-1)),e("div",_e,[e("div",ke,[e("div",we,[t[10]||(t[10]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-rose-400 to-pink-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"💰")],-1)),e("h3",he,r(y(te.value)),1),t[11]||(t[11]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Total Target Dana",-1)),e("p",Pe,r(g.value.total_projects||0)+" Proyek",1)])]),e("div",je,[e("div",Te,[t[12]||(t[12]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"📋")],-1)),e("h3",De,r(g.value.planning_projects||0),1),t[13]||(t[13]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Dalam Perencanaan",-1)),e("p",Se,r(y(ae.value)),1)])]),e("div",Ce,[e("div",Be,[t[14]||(t[14]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"🚀")],-1)),e("h3",Me,r(g.value.ongoing_projects||0),1),t[15]||(t[15]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Sedang Berjalan",-1)),e("p",Ve,r(y(se.value)),1)])]),e("div",Ee,[e("div",Ie,[t[16]||(t[16]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-green-400 to-emerald-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"✅")],-1)),e("h3",Ae,r(g.value.completed_projects||0),1),t[17]||(t[17]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Selesai",-1)),e("p",$e,r(y(oe.value)),1)])])]),m(me,{title:"Data Proyek Tabungan",description:"Kelola semua proyek tabungan dan target keuangan kita berdua",columns:R,data:_.value,loading:w.value,"show-actions":!0,pagination:!0,"items-per-page":10,onCreate:A,onEdit:$,onDelete:N},{"column-status":l(({item:s})=>[e("div",Ne,[e("span",Ke,r(F(s.status)),1),e("span",{class:C(["px-2 py-1 rounded-full text-xs font-medium",s.status_badge])},r(U(s.status)),3)])]),"column-target_total_amount":l(({item:s})=>[e("div",Ue,[t[18]||(t[18]=e("span",{class:"text-base md:text-lg text-green-600"},"💰",-1)),e("span",ze,r(y(s.target_total_amount)),1)])]),"column-target_completion_date":l(({item:s})=>[e("div",He,[t[19]||(t[19]=e("span",{class:"text-base md:text-lg"},"📅",-1)),e("span",Ge,r(K(s.target_completion_date)),1)])]),"column-category_user.name":l(({item:s})=>[e("div",qe,[e("span",Oe,r(s.is_owner?"👤":"👥"),1),e("span",{class:C(["font-medium text-gray-700 text-xs md:text-sm",s.is_owner?"text-blue-600":"text-green-600"])},r(s.is_owner?"Saya":s.category_user?.name||"Partner"),3),e("span",{class:C(["text-xs px-2 py-1 rounded-full",s.is_owner?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"])},r(ee(s.category_user?.type||"personal")),3)])]),"column-created_at":l(({item:s})=>[e("div",Le,[t[20]||(t[20]=e("span",{class:"text-base md:text-lg"},"🕒",-1)),e("span",Re,r(s.created_at),1)])]),actions:l(({item:s})=>[m(B,{onClick:z=>W(s),variant:"primary",size:"sm",class:"!px-2 !py-1 text-xs",title:"Buka project dengan link aman"},{icon:l(()=>[...t[21]||(t[21]=[d("🔐",-1)])]),default:l(()=>[t[22]||(t[22]=e("span",{class:"hidden xs:inline"},"Buka Items",-1))]),_:1},8,["onClick"]),m(B,{onClick:z=>$(s),variant:"secondary",size:"sm",class:"!px-2 !py-1 text-xs",disabled:!j(s),title:j(s)?"Edit proyek":"Hanya dapat mengedit proyek pada kategori yang Anda buat"},{icon:l(()=>[...t[23]||(t[23]=[d("✏️",-1)])]),default:l(()=>[t[24]||(t[24]=e("span",{class:"hidden xs:inline"},"Edit",-1))]),_:1},8,["onClick","disabled","title"]),m(B,{onClick:z=>N(s),variant:"danger",size:"sm",class:"!px-2 !py-1 text-xs",disabled:!j(s),title:j(s)?"Hapus proyek":"Hanya dapat menghapus proyek pada kategori yang Anda buat"},{icon:l(()=>[...t[25]||(t[25]=[d("🗑️",-1)])]),default:l(()=>[t[26]||(t[26]=e("span",{class:"hidden xs:inline"},"Hapus",-1))]),_:1},8,["onClick","disabled","title"])]),_:1},8,["data","loading"]),_.value.length===0&&!w.value?(f(),D("div",Je,[e("div",Qe,[t[29]||(t[29]=e("div",{class:"text-4xl md:text-6xl mb-4"},"💰",-1)),t[30]||(t[30]=e("h3",{class:"text-lg md:text-xl font-bold text-gray-800 mb-2"},"Belum ada proyek tabungan",-1)),e("p",{class:"text-gray-600 mb-6 text-sm md:text-base max-w-md mx-auto"}," Mulai dengan membuat proyek tabungan pertama untuk mengelola target keuangan "+r(E)),m(B,{onClick:A,class:"px-4 py-2 md:px-6 md:py-3 text-sm md:text-base"},{icon:l(()=>[...t[27]||(t[27]=[d("➕",-1)])]),default:l(()=>[t[28]||(t[28]=d(" Buat Proyek Tabungan Pertama ",-1))]),_:1})])])):S("",!0),m(G,{show:x.value,"onUpdate:show":t[6]||(t[6]=s=>x.value=s),title:p.value?"Edit Proyek Tabungan":"Tambah Proyek Tabungan Baru",description:p.value?"Perbarui informasi proyek tabungan kita":"Tambahkan proyek tabungan baru untuk mengelola target keuangan bersama",icon:p.value?"✏️":"➕","confirm-text":p.value?"Perbarui":"Simpan","confirm-loading":n(o).processing,onConfirm:X,onClose:Z,size:"lg"},{default:l(()=>[e("div",We,[m(q,{modelValue:n(o).category_id,"onUpdate:modelValue":t[1]||(t[1]=s=>n(o).category_id=s),label:"Kategori Tabungan",placeholder:"Pilih kategori tabungan",options:k.value.map(s=>({value:s.id,label:`${s.name} ${s.type==="joint"?"👥":"👤"}`})),error:n(o).errors.category_id,icon:"📁",required:"",disabled:n(o).processing||k.value.length===0},null,8,["modelValue","options","error","disabled"]),m(O,{modelValue:n(o).name,"onUpdate:modelValue":t[2]||(t[2]=s=>n(o).name=s),label:"Nama Proyek",placeholder:"Contoh: Tabungan Pernikahan, Dana DP Rumah, Liburan Keluarga",error:n(o).errors.name,icon:"💼",required:"",disabled:n(o).processing},null,8,["modelValue","error","disabled"]),m(ge,{modelValue:n(o).target_total_amount,"onUpdate:modelValue":t[3]||(t[3]=s=>n(o).target_total_amount=s),label:"Target Total Dana",placeholder:"Masukkan target total dana",error:n(o).errors.target_total_amount,icon:"💰","account-type":"account_number",required:"",disabled:n(o).processing},null,8,["modelValue","error","disabled"]),m(O,{modelValue:n(o).target_completion_date,"onUpdate:modelValue":t[4]||(t[4]=s=>n(o).target_completion_date=s),label:"Target Tanggal Selesai",type:"date",error:n(o).errors.target_completion_date,icon:"📅",required:"",disabled:n(o).processing},null,8,["modelValue","error","disabled"]),m(q,{modelValue:n(o).status,"onUpdate:modelValue":t[5]||(t[5]=s=>n(o).status=s),label:"Status Proyek",placeholder:"Pilih status proyek",options:J,error:n(o).errors.status,icon:"📊",required:"",disabled:n(o).processing},null,8,["modelValue","error","disabled"]),t[32]||(t[32]=e("div",{class:"p-3 md:p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl md:rounded-2xl border border-blue-200"},[e("p",{class:"text-xs md:text-sm text-gray-700 flex items-start gap-2"},[e("span",{class:"text-base md:text-lg mt-0.5"},"💡"),e("span",null,[e("strong",{class:"block"},"Informasi Proyek Tabungan:"),d(" • Hanya kategori dengan type "),e("strong",null,"savings"),d(" yang bisa digunakan"),e("br"),d(" • "),e("strong",null,"Planning:"),d(" Proyek dalam tahap perencanaan"),e("br"),d(" • "),e("strong",null,"On Going:"),d(" Proyek sedang berjalan dan menabung"),e("br"),d(" • "),e("strong",null,"Completed:"),d(" Target tabungan tercapai ")])])],-1)),n(o).hasErrors?(f(),D("div",Xe,[...t[31]||(t[31]=[e("p",{class:"text-xs md:text-sm text-red-600 flex items-center gap-2"},[e("span",null,"⚠️"),d(" Terdapat kesalahan dalam pengisian form. ")],-1)])])):S("",!0)])]),_:1},8,["show","title","description","icon","confirm-text","confirm-loading"]),m(G,{show:b.value,"onUpdate:show":t[7]||(t[7]=s=>b.value=s),title:"Hapus Proyek Tabungan",description:i.value?`Apakah Anda yakin ingin menghapus proyek tabungan ${i.value.name}?`:"Apakah Anda yakin ingin menghapus proyek tabungan ini?",icon:"🗑️","confirm-text":"Hapus","cancel-text":"Batal","confirm-variant":"danger","confirm-loading":h.value,onConfirm:Y,onClose:t[8]||(t[8]=s=>b.value=!1)},{default:l(()=>[e("div",Ye,[t[42]||(t[42]=e("div",{class:"p-3 md:p-4 bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-xl md:rounded-2xl"},[e("p",{class:"text-xs md:text-sm text-red-600 flex items-start gap-2"},[e("span",{class:"text-base md:text-lg mt-0.5"},"⚠️"),e("span",null,[e("strong",{class:"block"},"Tindakan ini tidak dapat dibatalkan!"),d(" Semua data item yang terkait dengan proyek tabungan ini akan ikut terhapus. ")])])],-1)),i.value?(f(),D("div",Ze,[t[41]||(t[41]=e("h4",{class:"font-semibold text-gray-800 text-sm md:text-base mb-2"},"Detail Proyek Tabungan:",-1)),e("div",Fe,[e("div",null,[t[33]||(t[33]=e("span",{class:"text-gray-600"},"Nama:",-1)),e("p",et,r(i.value.name),1)]),e("div",null,[t[34]||(t[34]=e("span",{class:"text-gray-600"},"Kategori:",-1)),e("p",tt,r(i.value.category),1)]),e("div",null,[t[35]||(t[35]=e("span",{class:"text-gray-600"},"Target Dana:",-1)),e("p",at,r(y(i.value.target_total_amount)),1)]),e("div",null,[t[36]||(t[36]=e("span",{class:"text-gray-600"},"Target Selesai:",-1)),e("p",st,r(K(i.value.target_completion_date)),1)]),e("div",null,[t[37]||(t[37]=e("span",{class:"text-gray-600"},"Status:",-1)),e("p",ot,r(U(i.value.status)),1)]),e("div",null,[t[38]||(t[38]=e("span",{class:"text-gray-600"},"Pemilik Kategori:",-1)),e("p",rt,r(i.value.is_owner?"Saya":i.value.category_user?.name||"Partner"),1)]),e("div",null,[t[39]||(t[39]=e("span",{class:"text-gray-600"},"Item:",-1)),e("p",nt,r(i.value.items_count)+" item",1)]),e("div",lt,[t[40]||(t[40]=e("span",{class:"text-gray-600"},"Progress:",-1)),e("p",dt,r(Math.round(i.value.progress_percentage))+"%",1)])])])):S("",!0)])]),_:1},8,["show","description","confirm-loading"])])])]),_:1}))}},ft=pe(it,[["__scopeId","data-v-a101e57f"]]);export{ft as default};
