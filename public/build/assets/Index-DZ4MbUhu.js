import{C as ee,j as x,G as te,i as ae,f as v,s as se,c as re,w as n,a as e,d as A,h as K,b as i,o as y,n as P,t as l,l as d,k as o,z as N,e as oe,A as ne,y as le}from"./app-C489nyjC.js";import{A as ie}from"./AppLayout-CfTpRAuV.js";import{_ as k,a as de}from"./BaseCard-lQ3MIjT2.js";import{_ as j,B as $,S as I}from"./SelectInput-C-Xf7mME.js";import{_ as ue}from"./TextInput-D8n7FBw9.js";import{_ as ge}from"./TextAreaInput-DKgWE6Tj.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const me={class:"py-2 min-h-screen relative overflow-hidden"},ce={class:"w-full px-4 sm:px-6 lg:px-8 relative z-10"},xe={class:"flex items-center justify-between"},be={class:"flex items-center gap-3"},ve={class:"text-xl"},fe={class:"font-medium"},ye={class:"grid grid-cols-3 lg:grid-cols-5 gap-2 mb-4"},ke={class:"p-4"},_e={class:"text-xl font-bold text-gray-800 mb-1"},he={class:"p-4"},we={class:"text-xl font-bold text-gray-800 mb-1"},Ce={class:"p-4"},Ae={class:"text-xl font-bold text-gray-800 mb-1"},Ke={class:"p-4"},Pe={class:"text-xl font-bold text-gray-800 mb-1"},je={class:"p-4"},Be={class:"text-xl font-bold text-gray-800 mb-1"},Me={class:"grid grid-cols-2 lg:grid-cols-4 gap-2 mb-4"},Se={class:"flex items-center gap-2"},Te={class:"text-lg"},Ve={class:"font-medium text-gray-700 text-sm"},De={class:"flex items-center gap-2"},Ee={class:"text-lg"},Ne={class:"font-medium text-gray-700 text-sm"},$e={class:"flex items-center gap-2"},Ie={class:"text-lg"},Ue={key:1,class:"text-center mt-6"},He={class:"bg-white/80 backdrop-blur-md rounded-3xl shadow-lg p-8 border border-gray-100"},Je={class:"space-y-3 max-h-[60vh] overflow-y-auto pr-2"},ze={class:"flex items-center gap-3 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-200"},Oe=["disabled"],qe={key:0,class:"p-2 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-2xl"},Ge={class:"space-y-4"},Le={key:0,class:"p-4 bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200 rounded-2xl"},Qe={class:"grid grid-cols-2 gap-4 text-sm"},Re={class:"font-medium text-gray-800"},We={class:"font-medium text-gray-800"},Xe={class:"font-medium text-gray-800"},Ye={class:"font-medium text-gray-800"},Ze={class:"font-medium text-gray-800"},Fe={__name:"Index",setup(et){const B=ee(),g=B.props.auth.user,U=g?.partner?.name??"Pasangan",M=`${g?.name??""} 💕 ${U}`,m=x([]),_=x(!1),h=x(!1),b=x(!1),f=x(!1),c=x(null),u=x(null),p=x(null);te(()=>B.props.flash,a=>{(a.success||a.error)&&(p.value={message:a.success||a.error,type:a.type||(a.success?"success":"error")},setTimeout(()=>{p.value=null},5e3))},{immediate:!0});const s=ae({name:"",type:"",budget_type:"",description:"",is_active:!0}),H=[{key:"name",label:"Nama Kategori",icon:"📁",sortable:!0},{key:"type",label:"Tipe",type:"badge",icon:"👥",sortable:!0,badgeVariant:"romantic"},{key:"budget_type",label:"Jenis Anggaran",type:"badge",icon:"💰",sortable:!0},{key:"user.name",label:"Dibuat Oleh",icon:"👤",sortable:!0},{key:"description",label:"Deskripsi",icon:"📝",class:"max-w-xs"},{key:"is_active",label:"Status",type:"badge",icon:"🟢",sortable:!0}],J=[{value:"personal",label:"👤 Personal"},{value:"joint",label:"👥 Joint"}],z=[{value:"income",label:"💰 Pemasukan"},{value:"expense",label:"💸 Pengeluaran"},{value:"savings",label:"🏦 Tabungan"}],w=async()=>{_.value=!0;try{const a=await axios.get(route("master-data.categories.index"));m.value=a.data.categories||a.data}catch(a){console.error("Error loading categories:",a),p.value={message:"Gagal memuat data kategori",type:"error"}}finally{_.value=!1}},S=()=>{c.value=null,s.reset(),s.type="",s.budget_type="",s.is_active=!0,b.value=!0},T=a=>{if(a.user_id!==g.id){p.value={message:"Anda hanya dapat mengedit kategori yang Anda buat",type:"error"};return}c.value=a,s.name=a.name,s.type=a.type,s.budget_type=a.budget_type,s.description=a.description||"",s.is_active=a.is_active,b.value=!0},V=a=>{if(a.user_id!==g.id){p.value={message:"Anda hanya dapat menghapus kategori yang Anda buat",type:"error"};return}u.value=a,f.value=!0},O=()=>{c.value?s.put(route("master-data.categories.update",c.value.id),{preserveScroll:!0,onSuccess:()=>{b.value=!1,w(),s.reset(),c.value=null},onError:a=>{console.error("Update error:",a)}}):s.post(route("master-data.categories.store"),{preserveScroll:!0,onSuccess:()=>{b.value=!1,w(),s.reset()},onError:a=>{console.error("Create error:",a)}})},q=()=>{u.value&&(h.value=!0,le.delete(route("master-data.categories.destroy",u.value.id),{preserveScroll:!0,onSuccess:()=>{f.value=!1,w(),u.value=null,h.value=!1},onError:a=>{console.error("Delete error:",a),f.value=!1,h.value=!1}}))},G=()=>{b.value=!1,c.value=null,s.clearErrors(),s.reset()},D=a=>({personal:"Personal",joint:"Joint"})[a]||a,L=a=>({personal:"👤",joint:"👥"})[a]||"📁",E=a=>({income:"Pemasukan",expense:"Pengeluaran",savings:"Tabungan"})[a]||a,Q=a=>({income:"💰",expense:"💸",savings:"🏦"})[a]||"📊",R=v(()=>m.value.filter(a=>a.type==="personal")),W=v(()=>m.value.filter(a=>a.type==="joint")),X=v(()=>m.value.filter(a=>a.budget_type==="income")),Y=v(()=>m.value.filter(a=>a.budget_type==="expense"));v(()=>m.value.filter(a=>a.budget_type==="savings"));const Z=v(()=>m.value.filter(a=>a.user_id===g.id));v(()=>m.value.filter(a=>a.user_id!==g.id&&a.type==="joint"));const C=a=>a.user_id===g.id;return se(()=>{w()}),(a,t)=>(y(),re(ie,{title:"Kelola Kategori"},{header:n(()=>[e("div",{class:"flex items-center justify-between"},[e("h2",{class:"font-semibold text-2xl text-gray-800 leading-tight flex items-center gap-2"}," 📁 Kelola Kategori Keuangan "+l(M)),t[9]||(t[9]=e("span",{class:"text-sm text-gray-500 italic"},"Atur kategori untuk mengorganisir keuangan bersama 💞",-1))])]),default:n(()=>[e("div",me,[e("div",ce,[p.value?(y(),A("div",{key:0,class:P(["mb-6 p-4 rounded-2xl border backdrop-blur-sm transition-all duration-300",{"bg-green-50 border-green-200 text-green-800":p.value.type==="success","bg-red-50 border-red-200 text-red-800":p.value.type==="error"}])},[e("div",xe,[e("div",be,[e("span",ve,l(p.value.type==="success"?"✅":"⚠️"),1),e("span",fe,l(p.value.message),1)]),e("button",{onClick:t[0]||(t[0]=r=>p.value=null),class:"text-gray-500 hover:text-gray-700 transition-colors"}," ✕ ")])],2)):K("",!0),t[41]||(t[41]=e("div",{class:"text-center mb-4"},[e("h1",{class:"text-3xl md:text-4xl font-extrabold text-rose-600 drop-shadow-md mb-3"}," Kelola Kategori Keuangan "),e("p",{class:"text-gray-600 text-lg max-w-2xl mx-auto"},[d(" Atur kategori untuk mengorganisir "),e("span",{class:"text-rose-500 font-semibold"},"pemasukan"),d(", "),e("span",{class:"text-sky-500 font-semibold"},"pengeluaran"),d(", dan "),e("span",{class:"text-purple-500 font-semibold"},"tabungan"),d(" kita berdua. Setiap kategori adalah langkah kecil menuju keuangan yang lebih teratur 💫 ")])],-1)),e("div",ye,[i(k,{class:"text-center hover:scale-[1.02] transition transform border border-blue-100"},{default:n(()=>[e("div",ke,[t[10]||(t[10]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md"},[e("span",{class:"text-xl text-white"},"👤")],-1)),e("h3",_e,l(R.value.length),1),t[11]||(t[11]=e("p",{class:"text-sm text-gray-600"},"Personal",-1))])]),_:1}),i(k,{class:"text-center hover:scale-[1.02] transition transform border border-green-100"},{default:n(()=>[e("div",he,[t[12]||(t[12]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-green-400 to-emerald-500 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md"},[e("span",{class:"text-xl text-white"},"👥")],-1)),e("h3",we,l(W.value.length),1),t[13]||(t[13]=e("p",{class:"text-sm text-gray-600"},"Joint",-1))])]),_:1}),i(k,{class:"text-center hover:scale-[1.02] transition transform border border-green-100"},{default:n(()=>[e("div",Ce,[t[14]||(t[14]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-green-400 to-emerald-500 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md"},[e("span",{class:"text-xl text-white"},"💰")],-1)),e("h3",Ae,l(X.value.length),1),t[15]||(t[15]=e("p",{class:"text-sm text-gray-600"},"Pemasukan",-1))])]),_:1}),i(k,{class:"text-center hover:scale-[1.02] transition transform border border-orange-100"},{default:n(()=>[e("div",Ke,[t[16]||(t[16]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-orange-400 to-red-500 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md"},[e("span",{class:"text-xl text-white"},"💸")],-1)),e("h3",Pe,l(Y.value.length),1),t[17]||(t[17]=e("p",{class:"text-sm text-gray-600"},"Pengeluaran",-1))])]),_:1}),i(k,{class:"text-center hover:scale-[1.02] transition transform border border-purple-100"},{default:n(()=>[e("div",je,[t[18]||(t[18]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-purple-400 to-pink-500 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md"},[e("span",{class:"text-xl text-white"},"📊")],-1)),e("h3",Be,l(Z.value.length),1),t[19]||(t[19]=e("p",{class:"text-sm text-gray-600"},"Kategori Saya",-1))])]),_:1})]),e("div",Me,[i(o(N),{href:a.route("master-data.accounts.index"),class:"flex items-center justify-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-r from-pink-300 via-rose-400 to-rose-500 text-white font-semibold shadow-md hover:shadow-lg hover:from-pink-400 hover:to-rose-600 transition-all duration-300 ease-in-out transform hover:-translate-y-0.5 active:scale-95"},{default:n(()=>[...t[20]||(t[20]=[e("span",{class:"text-lg"},"🌸",-1),e("span",null,"Akun Baru",-1)])]),_:1},8,["href"]),i(o(N),{href:a.route("budgets.index"),class:"flex items-center justify-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-r from-pink-200 via-rose-300 to-rose-400 text-white font-semibold shadow-md hover:shadow-lg hover:from-pink-300 hover:to-rose-500 transition-all duration-300 ease-in-out transform hover:-translate-y-0.5 active:scale-95 animate-pulse"},{default:n(()=>[...t[21]||(t[21]=[e("span",{class:"text-lg"},"💰",-1),e("span",null,"Kelola Anggaran",-1)])]),_:1},8,["href"])]),i(de,{title:"Data Kategori",description:"Kelola semua kategori keuangan kita berdua",columns:H,data:m.value,loading:_.value,"show-actions":!0,pagination:!0,"items-per-page":10,onCreate:S,onEdit:T,onDelete:V},{"column-type":n(({item:r})=>[e("div",Se,[e("span",Te,l(L(r.type)),1),e("span",Ve,l(D(r.type)),1)])]),"column-budget_type":n(({item:r})=>[e("div",De,[e("span",Ee,l(Q(r.budget_type)),1),e("span",Ne,l(E(r.budget_type)),1)])]),"column-user.name":n(({item:r})=>[e("div",$e,[e("span",Ie,l(r.user_id===o(g).id?"👤":"👥"),1),e("span",{class:P(["font-medium text-gray-700 text-sm",r.user_id===o(g).id?"text-blue-600":"text-green-600"])},l(r.user_id===o(g).id?"Saya":r.user?.name||"Partner"),3)])]),"column-is_active":n(({item:r})=>[e("span",{class:P(["px-2 py-1 rounded-full text-xs font-medium border shadow-sm",r.is_active?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200"])},l(r.is_active?"🟢 Aktif":"🔴 Nonaktif"),3)]),actions:n(({item:r})=>[i(j,{onClick:F=>T(r),variant:"secondary",size:"sm",class:"!px-2 !py-2",disabled:!C(r),title:C(r)?"Edit kategori":"Hanya dapat mengedit kategori yang Anda buat"},{icon:n(()=>[...t[22]||(t[22]=[d("✏️",-1)])]),default:n(()=>[t[23]||(t[23]=d(" Edit ",-1))]),_:1},8,["onClick","disabled","title"]),i(j,{onClick:F=>V(r),variant:"danger",size:"sm",class:"!px-2 !py-2",disabled:!C(r),title:C(r)?"Hapus kategori":"Hanya dapat menghapus kategori yang Anda buat"},{icon:n(()=>[...t[24]||(t[24]=[d("🗑️",-1)])]),default:n(()=>[t[25]||(t[25]=d(" Hapus ",-1))]),_:1},8,["onClick","disabled","title"])]),_:1},8,["data","loading"]),m.value.length===0&&!_.value?(y(),A("div",Ue,[e("div",He,[t[28]||(t[28]=e("div",{class:"text-6xl mb-4"},"📁",-1)),t[29]||(t[29]=e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},"Belum ada kategori",-1)),e("p",{class:"text-gray-600 mb-6 max-w-md mx-auto"}," Mulai dengan membuat kategori pertama untuk mengorganisir keuangan "+l(M)),i(j,{onClick:S,class:"px-6 py-3"},{icon:n(()=>[...t[26]||(t[26]=[d("➕",-1)])]),default:n(()=>[t[27]||(t[27]=d(" Buat Kategori Pertama ",-1))]),_:1})])])):K("",!0),i($,{show:b.value,"onUpdate:show":t[6]||(t[6]=r=>b.value=r),title:c.value?"Edit Kategori":"Tambah Kategori Baru",description:c.value?"Perbarui informasi kategori keuangan kita":"Tambahkan kategori baru untuk mengorganisir keuangan bersama",icon:c.value?"✏️":"➕","confirm-text":c.value?"Perbarui":"Simpan","confirm-loading":o(s).processing,onConfirm:O,onClose:G,size:"lg"},{default:n(()=>[e("div",Je,[i(ue,{modelValue:o(s).name,"onUpdate:modelValue":t[1]||(t[1]=r=>o(s).name=r),label:"Nama Kategori",placeholder:"Contoh: Gaji Bulanan, Belanja Bulanan, Tabungan Pendidikan",error:o(s).errors.name,icon:"📁",required:"",disabled:o(s).processing},null,8,["modelValue","error","disabled"]),i(I,{modelValue:o(s).type,"onUpdate:modelValue":t[2]||(t[2]=r=>o(s).type=r),label:"Tipe Kategori",placeholder:"Pilih tipe kategori",options:J,error:o(s).errors.type,icon:"👥",required:"",disabled:o(s).processing},null,8,["modelValue","error","disabled"]),i(I,{modelValue:o(s).budget_type,"onUpdate:modelValue":t[3]||(t[3]=r=>o(s).budget_type=r),label:"Jenis Anggaran",placeholder:"Pilih jenis anggaran",options:z,error:o(s).errors.budget_type,icon:"💰",required:"",disabled:o(s).processing},null,8,["modelValue","error","disabled"]),i(ge,{modelValue:o(s).description,"onUpdate:modelValue":t[4]||(t[4]=r=>o(s).description=r),label:"Deskripsi Kategori",placeholder:"Tambahkan deskripsi untuk kategori ini (opsional)",error:o(s).errors.description,icon:"📝",rows:3,"show-counter":!0,"max-length":100,disabled:o(s).processing},null,8,["modelValue","error","disabled"]),e("div",ze,[oe(e("input",{id:"is_active","onUpdate:modelValue":t[5]||(t[5]=r=>o(s).is_active=r),type:"checkbox","true-value":!0,"false-value":!1,class:"w-5 h-5 text-pink-500 bg-gray-100 border-gray-300 rounded focus:ring-pink-400 focus:ring-2",disabled:o(s).processing},null,8,Oe),[[ne,o(s).is_active]]),t[30]||(t[30]=e("label",{for:"is_active",class:"text-sm font-medium text-gray-700 flex items-center gap-2 cursor-pointer"},[e("span",{class:"text-lg"},"🟢"),e("span",null,[d(" Kategori Aktif "),e("span",{class:"text-gray-500 text-xs block"},"Nonaktifkan untuk menyembunyikan kategori")])],-1))]),t[32]||(t[32]=e("div",{class:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-200"},[e("p",{class:"text-sm text-gray-700 flex items-start gap-2"},[e("span",{class:"text-lg mt-0.5"},"💡"),e("span",null,[e("strong",{class:"block"},"Informasi:"),d(" • "),e("strong",null,"Personal:"),d(" Hanya Anda yang bisa melihat dan mengelola"),e("br"),d(" • "),e("strong",null,"Joint:"),d(" Bisa dilihat dan digunakan oleh Anda dan partner ")])])],-1)),o(s).hasErrors?(y(),A("div",qe,[...t[31]||(t[31]=[e("p",{class:"text-sm text-red-600 flex items-center gap-2"},[e("span",null,"⚠️"),d(" Terdapat kesalahan dalam pengisian form. Silakan periksa kembali input Anda. ")],-1)])])):K("",!0)])]),_:1},8,["show","title","description","icon","confirm-text","confirm-loading"]),i($,{show:f.value,"onUpdate:show":t[7]||(t[7]=r=>f.value=r),title:"Hapus Kategori",description:u.value?`Apakah Anda yakin ingin menghapus kategori ${u.value.name}?`:"Apakah Anda yakin ingin menghapus kategori ini?",icon:"🗑️","confirm-text":"Hapus","cancel-text":"Batal","confirm-variant":"danger","confirm-loading":h.value,onConfirm:q,onClose:t[8]||(t[8]=r=>f.value=!1)},{default:n(()=>[e("div",Ge,[t[40]||(t[40]=e("div",{class:"p-4 bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-2xl"},[e("p",{class:"text-sm text-red-600 flex items-start gap-2"},[e("span",{class:"text-lg mt-0.5"},"⚠️"),e("span",null,[e("strong",{class:"block"},"Tindakan ini tidak dapat dibatalkan!"),d(" Semua data yang terkait dengan kategori ini akan terpengaruh. Pastikan tidak ada transaksi atau anggaran yang menggunakan kategori ini. ")])])],-1)),u.value?(y(),A("div",Le,[t[39]||(t[39]=e("h4",{class:"font-semibold text-gray-800 mb-2"},"Detail Kategori:",-1)),e("div",Qe,[e("div",null,[t[33]||(t[33]=e("span",{class:"text-gray-600"},"Nama:",-1)),e("p",Re,l(u.value.name),1)]),e("div",null,[t[34]||(t[34]=e("span",{class:"text-gray-600"},"Tipe:",-1)),e("p",We,l(D(u.value.type)),1)]),e("div",null,[t[35]||(t[35]=e("span",{class:"text-gray-600"},"Jenis Anggaran:",-1)),e("p",Xe,l(E(u.value.budget_type)),1)]),e("div",null,[t[36]||(t[36]=e("span",{class:"text-gray-600"},"Status:",-1)),e("p",{class:P(["font-medium",u.value.is_active?"text-green-600":"text-red-600"])},l(u.value.is_active?"Aktif":"Nonaktif"),3)]),e("div",null,[t[37]||(t[37]=e("span",{class:"text-gray-600"},"Dibuat:",-1)),e("p",Ye,l(new Date(u.value.created_at).toLocaleDateString("id-ID")),1)]),e("div",null,[t[38]||(t[38]=e("span",{class:"text-gray-600"},"Dibuat Oleh:",-1)),e("p",Ze,l(u.value.user_id===o(g).id?"Saya":u.value.user?.name||"Partner"),1)])])])):K("",!0)])]),_:1},8,["show","description","confirm-loading"])])])]),_:1}))}},it=pe(Fe,[["__scopeId","data-v-bb7b8331"]]);export{it as default};
