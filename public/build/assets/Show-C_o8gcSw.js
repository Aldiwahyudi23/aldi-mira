import{c as r,g as i,d as e,s as C,b as k,z as n,r as $,p as P,M as ue,f as u,K as pe,l as g,O as me,w as b,F as Q,y as W,m as J,Q as te,q as ke,H as he,o as fe,t as _e,a as we,k as oe,x as p,E as ge,S as je,N as $e,C as Ie,D as be}from"./vendor-D_AUDOEP.js";import{A as Ve}from"./AppLayout-gieJcwVc.js";import{B as M,a as de}from"./BaseModal-9V5i1c82.js";/* empty css                                                                         */import{_ as ie}from"./app-drKAwCSa.js";import{_ as Pe}from"./TextInput-CcKHPn8x.js";import{S as X}from"./SelectInput-BCjCidYQ.js";import{_ as ye}from"./TextInput-CECDkQeb.js";import{_ as ce}from"./TextAreaInput-D8j_jWuS.js";import{_ as ne}from"./AccountInput-ChwpvfZQ.js";import{_ as ve}from"./DateInput-Csttyi47.js";/* empty css            */const Ce={class:"flex items-start gap-2 md:gap-3 select-none"},Te=["disabled"],Me={class:"flex flex-col flex-1"},Se={key:0,class:"text-xs text-gray-500 mt-0.5"},De={__name:"ToggleInput",props:{modelValue:{type:Boolean,required:!0},label:{type:String,default:""},description:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(a,{emit:y}){const h=a,S=y,f=()=>{h.disabled||S("update:modelValue",!h.modelValue)};return(l,D)=>(i(),r("div",Ce,[e("button",{type:"button",class:C(["relative inline-flex items-center justify-center w-10 h-6 md:w-12 md:h-7 rounded-full transition-all duration-300 focus:outline-none",[a.modelValue?"bg-gradient-to-r from-pink-400 to-rose-500 shadow-md":"bg-gray-200",a.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer hover:scale-[1.05]"]]),onClick:f,disabled:a.disabled},[e("span",{class:C(["absolute left-0.5 md:left-1 top-0.5 md:top-1 w-4 h-4 md:w-5 md:h-5 bg-white rounded-full shadow-md transform transition-all duration-300",{"translate-x-4 md:translate-x-5":a.modelValue}])},null,2)],10,Te),e("div",Me,[e("label",{class:C(["text-xs md:text-sm font-medium",[a.disabled?"text-gray-400":a.modelValue?"text-pink-600":"text-gray-800"]]),onClick:f},n(a.label),3),a.description?(i(),r("p",Se,n(a.description),1)):k("",!0)])]))}},Be=ie(De,[["__scopeId","data-v-999cdc0b"]]),Ue={class:"checklist-manager bg-gradient-to-br from-white via-pink-50 to-rose-50 rounded-xl md:rounded-2xl shadow-sm p-3 md:p-4 border border-pink-100"},Ae={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-3 md:mb-4 gap-2"},Ee={class:"flex items-center gap-2 md:gap-3"},qe={class:"text-xs md:text-sm text-gray-600"},Oe={class:"font-semibold text-pink-600"},ze={class:"text-rose-500 font-semibold ml-1"},Le={class:"flex items-center gap-2 md:gap-3"},Fe={class:"text-right"},Ke={class:"text-xs md:text-sm font-semibold text-gray-700"},Je={class:"w-24 md:w-28 bg-gray-200 rounded-full h-1.5 md:h-2 overflow-hidden"},Ne={class:"mb-4"},Ge={class:"flex flex-nowrap items-center gap-2 bg-white/70 backdrop-blur-sm border border-pink-100 rounded-xl md:rounded-2xl p-2 md:p-3"},He={class:"space-y-2 md:space-y-3"},Re={key:0,class:"text-center py-4 bg-white/60 backdrop-blur-sm rounded-xl md:rounded-2xl border border-pink-100"},Qe={class:"text-gray-600 text-xs md:text-sm max-w-md mx-auto"},We={key:0,class:"flex flex-nowrap items-center gap-2"},Xe=["onKeypress","onBlur"],Ye={class:"flex gap-1 md:gap-2 flex-shrink-0"},Ze={key:1,class:"flex flex-nowrap items-center justify-between gap-2"},et={class:"flex-1 min-w-0"},tt={class:"flex items-center gap-1 md:gap-2 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity flex-shrink-0"},at={key:2,class:"flex items-center gap-2 mt-2 pl-1 text-xs text-green-600"},st={key:0,class:"fixed inset-0 flex items-center justify-center z-50 bg-black/50 backdrop-blur-sm"},lt={class:"flex gap-2 md:gap-3 justify-center"},nt={class:"bg-white rounded-2xl md:rounded-3xl p-6 md:p-8 text-center max-w-sm mx-4 animate-bounce shadow-lg"},ot={__name:"ChecklistManager",props:{projectItem:Object,checklists:Array,itemName:String},emits:["checklist-updated"],setup(a,{emit:y}){const h=a,S=y,f=$(h.checklists||[]),l=$(""),D=$(!1),O=$(null),z=$(null),L=$(null),T=$(""),B=$(!1),A=$(!1),I=$(null),w=$(null),j=P(()=>f.value.length),Y=P(()=>f.value.filter(v=>v.is_completed).length),G=P(()=>j.value>0?Math.round(Y.value/j.value*100):0),ae=P(()=>[...f.value].sort((v,o)=>v.is_completed&&!o.is_completed?1:!v.is_completed&&o.is_completed?-1:new Date(v.created_at)-new Date(o.created_at)));ue(G,(v,o)=>{v===100&&o<100&&j.value>0&&(B.value=!0,setTimeout(()=>B.value=!1,3e3))});const U=async()=>{if(l.value.trim()){D.value=!0;try{const v=await axios.post(route("project-items.checklists.store",{projectItem:h.projectItem.id}),{task_description:l.value.trim()});v.data.success&&(f.value.push(v.data.checklist),l.value="",S("checklist-updated"))}catch(v){console.error("Error adding checklist:",v),alert("Gagal menambahkan checklist")}finally{D.value=!1}}},H=async v=>{O.value=v.id;try{const o=await axios.patch(route("project-items.checklists.toggle",{projectItem:h.projectItem.id,checklist:v.id}));if(o.data.success){const _=f.value.findIndex(m=>m.id===v.id);_!==-1&&(f.value[_]=o.data.checklist),S("checklist-updated")}}catch(o){console.error("Error toggling checklist:",o),v.is_completed=!v.is_completed}finally{O.value=null}},F=v=>{L.value=v.id,T.value=v.task_description,he(()=>{w.value&&(w.value.focus(),w.value.select())})},q=async v=>{if(!T.value.trim()){N();return}try{const o=await axios.put(route("project-items.checklists.update",{projectItem:h.projectItem.id,checklist:v.id}),{task_description:T.value.trim()});if(o.data.success){const _=f.value.findIndex(m=>m.id===v.id);_!==-1&&(f.value[_]=o.data.checklist),S("checklist-updated")}}catch(o){console.error("Error updating checklist:",o),alert("Gagal memperbarui checklist")}finally{L.value=null,T.value=""}},N=()=>{L.value=null,T.value=""},Z=v=>{I.value=v,A.value=!0},R=()=>{A.value=!1,I.value=null},ee=async()=>{if(I.value){z.value=I.value.id;try{(await axios.delete(route("project-items.checklists.destroy",{projectItem:h.projectItem.id,checklist:I.value.id}))).data.success&&(f.value=f.value.filter(o=>o.id!==I.value.id),S("checklist-updated"))}catch(v){console.error("Error deleting checklist:",v),alert("Gagal menghapus checklist")}finally{z.value=null,A.value=!1,I.value=null}}},K=v=>new Date(v).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return(v,o)=>(i(),r("div",Ue,[e("div",Ae,[e("div",Ee,[o[7]||(o[7]=e("div",{class:"w-8 h-8 md:w-10 md:h-10 bg-gradient-to-r from-pink-400 to-rose-500 rounded-lg md:rounded-xl flex items-center justify-center shadow-md"},[e("span",{class:"text-base md:text-lg text-white"},"ðŸ“‹")],-1)),e("div",null,[o[6]||(o[6]=e("h3",{class:"font-bold text-gray-800 text-base md:text-lg"},"Checklist Detail",-1)),e("p",qe,[o[5]||(o[5]=u(" Kelola langkah-langkah untuk ",-1)),e("span",Oe,n(a.itemName),1),e("span",ze,"("+n(G.value)+"%)",1)])])]),e("div",Le,[e("div",Fe,[e("div",Ke,n(Y.value)+" / "+n(j.value)+" selesai ",1),e("div",Je,[e("div",{class:"h-1.5 md:h-2 rounded-full transition-all duration-500 bg-gradient-to-r from-pink-400 to-rose-500",style:pe({width:G.value+"%"})},null,4)])])])]),e("div",Ne,[e("div",Ge,[g(Pe,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=_=>l.value=_),onKeypress:me(U,["enter"]),placeholder:"Tambahkan langkah baru...",class:"flex-1 min-w-0 px-3 md:px-4 py-2 md:py-2.5 rounded-lg md:rounded-xl border border-pink-200 focus:ring-2 focus:ring-pink-400 focus:border-transparent bg-white transition-all text-sm",disabled:D.value},null,8,["modelValue","disabled"]),g(M,{onClick:U,loading:D.value,size:"sm",class:"flex-shrink-0 whitespace-nowrap"},{icon:b(()=>[...o[8]||(o[8]=[e("span",{class:"text-xs"},"âž•",-1)])]),default:b(()=>[o[9]||(o[9]=e("span",{class:"hidden xs:inline"},"Tambah",-1))]),_:1},8,["loading"])])]),e("div",He,[f.value.length===0?(i(),r("div",Re,[o[10]||(o[10]=e("div",{class:"text-4xl md:text-6xl mb-2"},"ðŸ“",-1)),o[11]||(o[11]=e("h4",{class:"text-base md:text-lg font-semibold text-gray-700 mb-2"},"Belum ada checklist",-1)),e("p",Qe," Tambahkan langkah-langkah romantis untuk mencapai tujuan "+n(a.itemName.toLowerCase())+" ini ðŸ’– ",1)])):k("",!0),(i(!0),r(Q,null,W(ae.value,_=>(i(),r("div",{key:_.id,class:C(["group bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border-2 transition-all duration-300 hover:shadow-lg",[_.is_completed?"border-green-200 bg-gradient-to-r from-green-50 to-emerald-50":"border-pink-100 hover:border-pink-200"]])},[L.value===_.id?(i(),r("div",We,[J(e("input",{ref_for:!0,ref_key:"editInput",ref:w,"onUpdate:modelValue":o[1]||(o[1]=m=>T.value=m),onKeypress:[me(m=>q(_),["enter"]),me(N,["escape"])],onBlur:m=>q(_),class:"flex-1 px-3 py-2 rounded-lg border border-blue-300 focus:ring-2 focus:ring-blue-400 focus:border-transparent text-sm"},null,40,Xe),[[te,T.value]]),e("div",Ye,[g(M,{onClick:m=>q(_),variant:"success",size:"sm",class:"!px-2 !py-1 text-xs",title:"Simpan"},{icon:b(()=>[...o[12]||(o[12]=[u("âœ“",-1)])]),default:b(()=>[o[13]||(o[13]=e("span",{class:"hidden xs:inline"},"Simpan",-1))]),_:1},8,["onClick"]),g(M,{onClick:N,variant:"secondary",size:"sm",class:"!px-2 !py-1 text-xs",title:"Batal"},{icon:b(()=>[...o[14]||(o[14]=[u("âœ•",-1)])]),default:b(()=>[o[15]||(o[15]=e("span",{class:"hidden xs:inline"},"Batal",-1))]),_:1})])])):(i(),r("div",Ze,[e("div",et,[g(Be,{modelValue:_.is_completed,"onUpdate:modelValue":[m=>_.is_completed=m,m=>H(_)],label:_.task_description,description:_.is_completed?"Selesai dikerjakan ðŸ’«":"Belum selesai",class:"w-full"},null,8,["modelValue","onUpdate:modelValue","label","description"])]),e("div",tt,[g(M,{onClick:m=>F(_),variant:"secondary",size:"sm",class:"!px-2 !py-1 text-xs",title:"Edit checklist"},{icon:b(()=>[...o[16]||(o[16]=[u("âœï¸",-1)])]),default:b(()=>[o[17]||(o[17]=e("span",{class:"hidden xs:inline"},"Edit",-1))]),_:1},8,["onClick"]),g(M,{onClick:m=>Z(_),disabled:z.value===_.id,variant:"danger",size:"sm",class:"!px-2 !py-1 text-xs",title:"Hapus checklist"},{icon:b(()=>[...o[18]||(o[18]=[u("ðŸ—‘ï¸",-1)])]),default:b(()=>[o[19]||(o[19]=e("span",{class:"hidden xs:inline"},"Hapus",-1))]),_:1},8,["onClick","disabled"])])])),_.is_completed&&_.completed_at?(i(),r("div",at,[e("span",null,"âœ… Selesai: "+n(K(_.completed_at)),1)])):k("",!0)],2))),128))]),A.value?(i(),r("div",st,[e("div",{class:"bg-white rounded-2xl md:rounded-3xl p-4 md:p-6 text-center max-w-sm mx-4 shadow-lg",onClick:o[2]||(o[2]=ke(()=>{},["stop"]))},[o[24]||(o[24]=e("div",{class:"text-3xl md:text-4xl mb-3 md:mb-4"},"âš ï¸",-1)),o[25]||(o[25]=e("h3",{class:"text-lg md:text-xl font-bold text-gray-800 mb-2"},"Hapus Checklist?",-1)),o[26]||(o[26]=e("p",{class:"text-gray-600 text-sm md:text-base mb-4 md:mb-6"},"Apakah Anda yakin ingin menghapus checklist ini? Tindakan ini tidak dapat dibatalkan.",-1)),e("div",lt,[g(M,{onClick:R,variant:"secondary",size:"sm",class:"!px-3 md:!px-4 text-xs md:text-sm"},{icon:b(()=>[...o[20]||(o[20]=[u("âœ•",-1)])]),default:b(()=>[o[21]||(o[21]=u(" Batal ",-1))]),_:1}),g(M,{onClick:ee,loading:z.value===I.value?.id,variant:"danger",size:"sm",class:"!px-3 md:!px-4 text-xs md:text-sm"},{icon:b(()=>[...o[22]||(o[22]=[u("ðŸ—‘ï¸",-1)])]),default:b(()=>[o[23]||(o[23]=u(" Hapus ",-1))]),_:1},8,["loading"])])])])):k("",!0),B.value?(i(),r("div",{key:1,class:"fixed inset-0 flex items-center justify-center z-50 bg-black/50 backdrop-blur-sm",onClick:o[4]||(o[4]=_=>B.value=!1)},[e("div",nt,[o[29]||(o[29]=e("div",{class:"text-4xl md:text-6xl mb-3 md:mb-4"},"ðŸŽ‰",-1)),o[30]||(o[30]=e("h3",{class:"text-xl md:text-2xl font-bold text-gray-800 mb-2"},"Selamat! ðŸŽŠ",-1)),o[31]||(o[31]=e("p",{class:"text-gray-600 text-sm md:text-base mb-4"},"Semua checklist sudah selesai ðŸ’–",-1)),g(M,{onClick:o[3]||(o[3]=_=>B.value=!1),variant:"primary",size:"sm",class:"!px-4 md:!px-6 text-xs md:text-sm"},{icon:b(()=>[...o[27]||(o[27]=[u("âœ¨",-1)])]),default:b(()=>[o[28]||(o[28]=u(" Lanjutkan ",-1))]),_:1})])])):k("",!0)]))}},dt=ie(ot,[["__scopeId","data-v-c2996bca"]]),it={class:"payment-manager bg-gradient-to-br from-white via-blue-50 to-indigo-50 rounded-xl md:rounded-2xl shadow-sm p-3 md:p-4 border border-blue-100"},rt={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-3 md:mb-4 gap-2"},mt={class:"flex items-center gap-2 md:gap-3"},ut={class:"text-xs md:text-sm text-gray-600"},ct={class:"font-semibold text-blue-600"},pt={class:"flex items-center gap-2 md:gap-4"},xt={class:"text-right"},gt={key:0,class:"space-y-1"},bt={key:0,class:"text-xs text-green-600 font-medium"},yt={key:1,class:"text-xs text-red-600 font-medium"},vt={key:2,class:"text-xs text-gray-500"},ft={key:1},kt={class:"text-xs md:text-sm font-semibold text-gray-700 mb-1"},ht={class:"w-24 md:w-32 bg-gray-200 rounded-full h-1.5 md:h-2"},_t={class:"text-xs text-gray-500 mt-1"},wt={key:0,class:"mb-3 md:mb-4"},jt={key:1,class:"mb-3 md:mb-4"},$t={class:"bg-white/70 backdrop-blur-sm border border-green-100 rounded-xl md:rounded-2xl p-3 md:p-4 text-center"},It={class:"text-xs md:text-sm text-gray-600 mb-3 md:mb-4"},Vt={key:2,class:"mb-4 md:mb-6"},Pt={class:"bg-white/70 backdrop-blur-sm border border-orange-100 rounded-xl md:rounded-2xl p-3 md:p-4 text-center"},Ct={key:3,class:"mb-3 md:mb-4"},Tt={class:"bg-white/70 backdrop-blur-sm border border-green-100 rounded-xl md:rounded-2xl p-4 md:p-6 text-center"},Mt={class:"text-xs md:text-sm text-gray-600 mb-3 md:mb-4"},St={class:"mt-3 md:mt-4"},Dt={key:0,class:"text-center py-3 md:py-4 bg-white/60 backdrop-blur-sm rounded-xl md:rounded-2xl border border-blue-100"},Bt={key:1,class:"space-y-2 md:space-y-3"},Ut={class:"flex flex-row items-center justify-between gap-2 md:gap-3 bg-white/70 border border-pink-100 rounded-xl md:rounded-2xl p-2 md:p-3 group transition-all flex-wrap sm:flex-nowrap"},At={class:"flex items-center gap-2 md:gap-3 flex-1 min-w-[150px] md:min-w-[200px]"},Et={class:"text-xs md:text-sm"},qt={class:"flex flex-col justify-center truncate"},Ot={class:"flex items-center flex-wrap gap-1 md:gap-2 mb-1"},zt={class:"font-semibold text-gray-800 text-xs md:text-sm truncate max-w-[120px] sm:max-w-[160px] md:max-w-[200px]"},Lt={class:"text-xs text-gray-600 space-y-0.5 md:space-y-1 truncate"},Ft={key:0,class:"truncate"},Kt={key:1,class:"text-blue-600 truncate text-xs"},Jt={class:"text-xs text-gray-500"},Nt={class:"flex items-center gap-2 md:gap-3 flex-shrink-0"},Gt={class:"text-right"},Ht={class:"text-xs text-gray-500 hidden md:block"},Rt={class:"opacity-0 group-hover:opacity-100 transition-opacity"},Qt={class:"space-y-4"},Wt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Xt={class:"p-3 bg-blue-50 border border-blue-200 rounded-lg"},Yt={class:"text-xs text-blue-700"},Zt={class:"font-bold"},ea={class:"space-y-4"},ta={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},aa={class:"p-3 bg-orange-50 border border-orange-200 rounded-lg"},sa={class:"text-xs text-orange-700"},la={class:"font-bold"},na={class:"space-y-3 md:space-y-4"},oa={key:0,class:"p-3 md:p-4 bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200 rounded-xl md:rounded-2xl"},da={class:"grid grid-cols-1 xs:grid-cols-2 gap-3 md:gap-4 text-xs md:text-sm"},ia={class:"font-medium text-gray-800 truncate"},ra={class:"font-medium text-gray-800 truncate"},ma={class:"font-medium text-gray-800 truncate"},ua={class:"font-medium text-gray-800"},ca={key:0,class:"xs:col-span-2"},pa={class:"font-medium text-gray-800"},xa={__name:"PaymentManager",props:{projectItem:Object},emits:["payment-updated"],setup(a,{emit:y}){const h=a,S=y,f=$([]),l=$([]),D=$(!1),O=$(!1),z=$(!1),L=$(!1),T=$(!1),B=$(!1),A=$(!1),I=$(null),w=$({amount:"",account_id:"",payment_method:"transfer",transaction_date:new Date().toISOString().split("T")[0],note:""}),j=$({amount:"",account_id:"",payment_method:"transfer",transaction_date:new Date().toISOString().split("T")[0],note:""}),Y=P(()=>({pending:"Belum Dimulai",in_progress:"Dalam Progress",ready:"Siap Belanja",complete:"Selesai"})[h.projectItem.status]||h.projectItem.status),G=P(()=>({pending:"bg-gray-100 text-gray-800",in_progress:"bg-blue-100 text-blue-800",ready:"bg-orange-100 text-orange-800",complete:"bg-green-100 text-green-800"})[h.projectItem.status]||"bg-gray-100 text-gray-800"),ae=P(()=>h.projectItem.status==="complete"?"bg-green-500":h.projectItem.status==="ready"?"bg-orange-500":"bg-blue-500"),U=P(()=>l.value.length?l.value.map(c=>({value:c.id,label:`${c.name} - ${c.formatted_balance}${c.type==="joint"?" ðŸ‘¥":" ðŸ‘¤"}`,metadata:{type:c.type,balance:c.current_balance,balance_status:c.balance_status,balance_status_color:c.balance_status_color,balance_status_text:c.balance_status_text}})):[]),H=P(()=>[{value:"transfer",label:"Transfer Bank"},{value:"cash",label:"Tunai"}]),F=P(()=>{const c={};return!w.value.amount||w.value.amount<=0?c.amount="Jumlah tabungan harus lebih dari 0":w.value.amount>h.projectItem.remaining_amount&&(c.amount=`Jumlah tabungan tidak boleh melebihi ${E(h.projectItem.remaining_amount)}`),w.value.account_id||(c.account_id="Akun tujuan harus dipilih"),w.value.payment_method||(c.payment_method="Metode pembayaran harus dipilih"),w.value.transaction_date||(c.transaction_date="Tanggal transaksi harus diisi"),c}),q=P(()=>{const c={};return!j.value.amount||j.value.amount<=0?c.amount="Jumlah pembelian harus lebih dari 0":j.value.amount>h.projectItem.actual_spent&&(c.amount=`Jumlah pembelian tidak boleh melebihi ${E(h.projectItem.actual_spent)}`),j.value.account_id||(c.account_id="Akun sumber harus dipilih"),j.value.payment_method||(c.payment_method="Metode pembayaran harus dipilih"),j.value.transaction_date||(c.transaction_date="Tanggal pembelian harus diisi"),c}),N=P(()=>Object.keys(F.value).length===0&&w.value.amount>0&&w.value.account_id&&w.value.payment_method&&w.value.transaction_date),Z=P(()=>Object.keys(q.value).length===0&&j.value.amount>0&&j.value.account_id&&j.value.payment_method&&j.value.transaction_date);P(()=>h.projectItem.planned_amount-h.projectItem.actual_spent);const R=async()=>{try{const c=await axios.get(route("project-items.payments.index",{projectItem:h.projectItem.id}));c.data.success&&(f.value=c.data.payments,Object.assign(h.projectItem,c.data.project_item))}catch(c){console.error("Error loading payments:",c)}},ee=async()=>{D.value=!0;try{const c=await axios.get(route("project-items.api.accounts"));l.value=c.data,console.log("Accounts loaded from project API:",l.value)}catch(c){console.error("Error loading accounts from project API:",c);try{const s=await axios.get("/api/accounts");l.value=s.data,console.log("Accounts loaded from fallback API:",l.value)}catch(s){console.error("Fallback also failed:",s),alert("Gagal memuat data akun. Silakan refresh halaman.")}}finally{D.value=!1}},K=()=>{T.value=!0},v=()=>{B.value=!0},o=()=>{T.value=!1,se()},_=()=>{B.value=!1,re()},m=async()=>{if(N.value){O.value=!0;try{const c=await axios.post(route("project-items.payments.store",{projectItem:h.projectItem.id}),w.value);c.data.success&&(f.value.unshift(c.data.payment),Object.assign(h.projectItem,c.data.project_item),se(),T.value=!1,S("payment-updated"))}catch(c){console.error("Error adding savings:",c),alert(c.response?.data?.error||"Gagal menambah tabungan")}finally{O.value=!1}}},t=async()=>{if(Z.value){z.value=!0;try{const c=await axios.post(route("project-items.payments.purchase",{projectItem:h.projectItem.id}),j.value);c.data.success&&(f.value.unshift(c.data.payment),Object.assign(h.projectItem,c.data.project_item),re(),B.value=!1,S("payment-updated"))}catch(c){console.error("Error making purchase:",c),alert(c.response?.data?.error||"Gagal melakukan pembelian")}finally{z.value=!1}}},d=c=>{I.value=c,A.value=!0},V=async()=>{if(I.value){L.value=!0;try{(await axios.delete(route("project-items.payments.destroy",{projectItem:h.projectItem.id,payment:I.value.id}))).data.success&&(f.value=f.value.filter(s=>s.id!==I.value.id),await R(),S("payment-updated"))}catch(c){console.error("Error deleting payment:",c),alert("Gagal menghapus transaksi")}finally{L.value=!1,A.value=!1,I.value=null}}},se=()=>{w.value={amount:"",account_id:"",payment_method:"transfer",transaction_date:new Date().toISOString().split("T")[0],note:""}},re=()=>{j.value={amount:"",account_id:"",payment_method:"transfer",transaction_date:new Date().toISOString().split("T")[0],note:""}},E=c=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(Math.abs(c)),le=(c,s="full")=>{const x=new Date(c);return s==="time"?x.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):x.toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},xe=c=>({transfer:"Transfer",cash:"Tunai"})[c]||c;return fe(()=>{R(),ee()}),(c,s)=>(i(),r("div",it,[e("div",rt,[e("div",mt,[s[16]||(s[16]=e("div",{class:"w-8 h-8 md:w-10 md:h-10 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-lg md:rounded-xl flex items-center justify-center shadow-md"},[e("span",{class:"text-base md:text-lg text-white"},"ðŸ’°")],-1)),e("div",null,[s[15]||(s[15]=e("h3",{class:"font-bold text-gray-800 text-base md:text-lg"},"Tabungan Proyek",-1)),e("p",ut,[s[14]||(s[14]=u(" Progress tabungan untuk ",-1)),e("span",ct,n(a.projectItem.item_name),1)])])]),e("div",pt,[e("div",xt,[a.projectItem.status==="complete"?(i(),r("div",gt,[a.projectItem.actual_spent>0?(i(),r("div",bt," ðŸ’° Sisa: "+n(E(a.projectItem.actual_spent)),1)):a.projectItem.actual_spent<0?(i(),r("div",yt," âš ï¸ Kurang: "+n(E(Math.abs(a.projectItem.actual_spent))),1)):(i(),r("div",vt," âœ… Terpakai semua "))])):(i(),r("div",ft,[e("div",kt,n(E(a.projectItem.actual_spent))+" / "+n(E(a.projectItem.planned_amount)),1),e("div",ht,[e("div",{class:C(["h-1.5 md:h-2 rounded-full transition-all duration-500",ae.value]),style:pe({width:Math.min(a.projectItem.savings_progress,100)+"%"})},null,6)]),e("div",_t,n(Math.round(a.projectItem.savings_progress))+"% tercapai ",1)]))]),e("div",{class:C([G.value,"px-2 py-1 md:px-3 md:py-1 rounded-full text-xs md:text-sm font-semibold"])},n(Y.value),3)])]),D.value?(i(),r("div",wt,[...s[17]||(s[17]=[e("div",{class:"bg-white/70 backdrop-blur-sm border border-blue-100 rounded-xl md:rounded-2xl p-4 md:p-6 text-center"},[e("div",{class:"animate-spin rounded-full h-6 w-6 md:h-8 md:w-8 border-b-2 border-blue-500 mx-auto mb-2 md:mb-4"}),e("p",{class:"text-gray-600 text-xs md:text-sm"},"Memuat data akun...")],-1)])])):k("",!0),!a.projectItem.is_ready_for_purchase&&a.projectItem.status!=="complete"&&!D.value?(i(),r("div",jt,[e("div",$t,[s[21]||(s[21]=e("div",{class:"text-3xl md:text-4xl mb-2 md:mb-4"},"ðŸ’°",-1)),s[22]||(s[22]=e("h4",{class:"text-lg md:text-xl font-bold text-gray-800 mb-1 md:mb-2"},"Tambah Tabungan",-1)),e("p",It,[s[18]||(s[18]=u(" Kumpulkan tabungan untuk item ",-1)),e("strong",null,n(a.projectItem.item_name),1)]),g(M,{onClick:K,disabled:U.value.length===0,class:"!px-4 !py-2 md:!px-6 md:!py-3 text-xs md:text-sm bg-gradient-to-r from-green-400 to-emerald-500 text-white shadow-md hover:shadow-lg"},{icon:b(()=>[...s[19]||(s[19]=[u("ðŸ’°",-1)])]),default:b(()=>[s[20]||(s[20]=u(" Tambah Tabungan ",-1))]),_:1},8,["disabled"])])])):k("",!0),a.projectItem.is_ready_for_purchase&&a.projectItem.status!=="complete"&&!D.value?(i(),r("div",Vt,[e("div",Pt,[s[25]||(s[25]=e("div",{class:"text-3xl md:text-4xl mb-2 md:mb-4"},"ðŸ›ï¸",-1)),s[26]||(s[26]=e("h4",{class:"text-lg md:text-xl font-bold text-gray-800 mb-1 md:mb-2"},"Pembelian Item",-1)),s[27]||(s[27]=e("p",{class:"text-xs md:text-sm text-gray-600 mb-3 md:mb-4"}," Tabungan sudah mencukupi! Silakan lakukan pembelian. ",-1)),g(M,{onClick:v,disabled:U.value.length===0,class:"!px-4 !py-2 md:!px-6 md:!py-3 text-xs md:text-sm bg-gradient-to-r from-orange-400 to-red-500 text-white shadow-md hover:shadow-lg"},{icon:b(()=>[...s[23]||(s[23]=[u("ðŸ›ï¸",-1)])]),default:b(()=>[s[24]||(s[24]=u(" Proses Pembelian ",-1))]),_:1},8,["disabled"])])])):k("",!0),a.projectItem.status==="complete"?(i(),r("div",Ct,[e("div",Tt,[s[31]||(s[31]=e("div",{class:"text-3xl md:text-4xl mb-2 md:mb-4"},"ðŸŽ‰",-1)),s[32]||(s[32]=e("h4",{class:"text-lg md:text-xl font-bold text-gray-800 mb-1 md:mb-2"},"Pembelian Selesai!",-1)),e("p",Mt,[s[28]||(s[28]=u(" Item ",-1)),e("strong",null,n(a.projectItem.item_name),1),s[29]||(s[29]=u(" telah berhasil dibeli dengan total ",-1)),e("strong",null,n(E(a.projectItem.actual_spent)),1),s[30]||(s[30]=u(". ",-1))]),s[33]||(s[33]=e("div",{class:"bg-green-50 text-green-700 px-3 py-2 md:px-4 md:py-3 rounded-lg text-xs md:text-sm"},[e("p",null,[u("Status: "),e("strong",null,"Completed")])],-1))])])):k("",!0),e("div",St,[s[37]||(s[37]=e("h4",{class:"font-semibold text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"ðŸ“Š"),e("span",{class:"text-sm md:text-base"},"Riwayat Transaksi")],-1)),f.value.length===0?(i(),r("div",Dt,[...s[34]||(s[34]=[e("div",{class:"text-4xl md:text-6xl mb-1 md:mb-2"},"ðŸ’¸",-1),e("h4",{class:"text-base md:text-lg font-semibold text-gray-700 mb-1 md:mb-2"},"Belum ada transaksi",-1),e("p",{class:"text-xs md:text-sm text-gray-600 max-w-md mx-auto px-2"}," Mulai menabung untuk proyek ini ðŸ’– ",-1)])])):(i(),r("div",Bt,[(i(!0),r(Q,null,W(f.value,x=>(i(),r("div",{key:x.id,class:C(["group bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border-2 transition-all duration-300 hover:shadow-lg",x.amount>0?"border-green-100":"border-red-100"])},[e("div",Ut,[e("div",At,[e("div",{class:C(["w-6 h-6 md:w-8 md:h-8 rounded-md md:rounded-lg flex items-center justify-center text-white flex-shrink-0",x.amount>0?"bg-green-500":"bg-red-500"])},[e("span",Et,n(x.amount>0?"ðŸ’°":"ðŸ›ï¸"),1)],2),e("div",qt,[e("div",Ot,[e("h4",zt,n(x.amount>0?"Tabungan":"Pembelian"),1),e("span",{class:C(["px-1.5 py-0.5 md:px-2 md:py-1 text-xs rounded-full font-medium whitespace-nowrap",x.amount>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(xe(x.payment_method)),3)]),e("div",Lt,[x.transaction?(i(),r("p",Ft,[s[35]||(s[35]=e("span",{class:"font-medium"},"Akun:",-1)),u(" "+n(x.transaction.account.name),1)])):k("",!0),x.note?(i(),r("p",Kt,"ðŸ“ "+n(x.note),1)):k("",!0),e("p",Jt,n(le(x.created_at)),1)])])]),e("div",Nt,[e("div",Gt,[e("div",{class:C(["text-base md:text-lg font-bold",x.amount>0?"text-green-600":"text-red-600"])},n(x.amount>0?"+":"")+n(E(x.amount)),3),e("div",Ht,n(le(x.created_at,"time")),1)]),e("div",Rt,[g(M,{onClick:tn=>d(x),variant:"danger",size:"sm",class:"!px-3 md:!px-4 text-xs md:text-sm",title:"Hapus transaksi"},{default:b(()=>[...s[36]||(s[36]=[u(" ðŸ—‘ï¸ ",-1)])]),_:1},8,["onClick"])])])])],2))),128))]))]),g(de,{show:T.value,"onUpdate:show":s[5]||(s[5]=x=>T.value=x),title:"Tambah Tabungan",description:"Isi form untuk menambah tabungan proyek",icon:"ðŸ’°","confirm-text":"Simpan Tabungan","cancel-text":"Batal","confirm-variant":"primary","confirm-loading":O.value,"confirm-disabled":!N.value,onConfirm:m,onClose:o,size:"lg"},{default:b(()=>[e("div",Qt,[g(ne,{modelValue:w.value.amount,"onUpdate:modelValue":s[0]||(s[0]=x=>w.value.amount=x),label:"Jumlah Tabungan *",placeholder:`Contoh: ${Math.round(a.projectItem.remaining_amount/1e3)*1e3}`,icon:"ðŸ’°","account-type":"account_number",max:a.projectItem.remaining_amount,error:F.value.amount,required:""},null,8,["modelValue","placeholder","max","error"]),g(X,{modelValue:w.value.account_id,"onUpdate:modelValue":s[1]||(s[1]=x=>w.value.account_id=x),label:"Akun Tujuan *",placeholder:U.value.length>0?"Pilih akun untuk menabung":"Memuat akun...",options:U.value,error:F.value.account_id,icon:"ðŸ¦",disabled:U.value.length===0,required:""},null,8,["modelValue","placeholder","options","error","disabled"]),e("div",Wt,[g(X,{modelValue:w.value.payment_method,"onUpdate:modelValue":s[2]||(s[2]=x=>w.value.payment_method=x),label:"Metode Pembayaran *",options:H.value,error:F.value.payment_method,icon:"ðŸ’³",required:""},null,8,["modelValue","options","error"]),g(ve,{modelValue:w.value.transaction_date,"onUpdate:modelValue":s[3]||(s[3]=x=>w.value.transaction_date=x),label:"Tanggal Transaksi *",icon:"ðŸ“…",error:F.value.transaction_date,required:""},null,8,["modelValue","error"])]),g(ce,{modelValue:w.value.note,"onUpdate:modelValue":s[4]||(s[4]=x=>w.value.note=x),label:"Catatan (Opsional)",placeholder:"Contoh: Tabungan gaji bulanan, Bonus, dll...",icon:"ðŸ“",rows:2,"show-counter":!0,"max-length":255},null,8,["modelValue"]),e("div",Xt,[e("p",Yt,[s[38]||(s[38]=e("strong",null,"Info:",-1)),s[39]||(s[39]=u(" Sisa tabungan yang dibutuhkan: ",-1)),e("span",Zt,n(E(a.projectItem.remaining_amount)),1)])])])]),_:1},8,["show","confirm-loading","confirm-disabled"]),g(de,{show:B.value,"onUpdate:show":s[11]||(s[11]=x=>B.value=x),title:"Pembelian Item",description:"Lakukan pembelian untuk item proyek",icon:"ðŸ›ï¸","confirm-text":"Proses Pembelian","cancel-text":"Batal","confirm-variant":"primary","confirm-loading":z.value,"confirm-disabled":!Z.value,onConfirm:t,onClose:_,size:"lg"},{default:b(()=>[e("div",ea,[g(ne,{modelValue:j.value.amount,"onUpdate:modelValue":s[6]||(s[6]=x=>j.value.amount=x),label:"Jumlah Pembelian *",placeholder:`Maksimal: ${E(a.projectItem.actual_spent)}`,icon:"ðŸ’°","account-type":"account_number",max:a.projectItem.actual_spent,error:q.value.amount,required:""},null,8,["modelValue","placeholder","max","error"]),g(X,{modelValue:j.value.account_id,"onUpdate:modelValue":s[7]||(s[7]=x=>j.value.account_id=x),label:"Akun Sumber *",placeholder:U.value.length>0?"Pilih akun untuk pembelian":"Memuat akun...",options:U.value,error:q.value.account_id,icon:"ðŸ¦",disabled:U.value.length===0,required:""},null,8,["modelValue","placeholder","options","error","disabled"]),e("div",ta,[g(X,{modelValue:j.value.payment_method,"onUpdate:modelValue":s[8]||(s[8]=x=>j.value.payment_method=x),label:"Metode Pembayaran *",options:H.value,error:q.value.payment_method,icon:"ðŸ’³",required:""},null,8,["modelValue","options","error"]),g(ve,{modelValue:j.value.transaction_date,"onUpdate:modelValue":s[9]||(s[9]=x=>j.value.transaction_date=x),label:"Tanggal Pembelian *",icon:"ðŸ“…",error:q.value.transaction_date,required:""},null,8,["modelValue","error"])]),g(ce,{modelValue:j.value.note,"onUpdate:modelValue":s[10]||(s[10]=x=>j.value.note=x),label:"Catatan Pembelian",placeholder:"Contoh: Beli material, Bayar vendor, dll...",icon:"ðŸ“",rows:2,"show-counter":!0,"max-length":255},null,8,["modelValue"]),e("div",aa,[e("p",sa,[s[40]||(s[40]=e("strong",null,"Info:",-1)),s[41]||(s[41]=u(" Total tabungan tersedia: ",-1)),e("span",la,n(E(a.projectItem.actual_spent)),1)])])])]),_:1},8,["show","confirm-loading","confirm-disabled"]),g(de,{show:A.value,"onUpdate:show":s[12]||(s[12]=x=>A.value=x),title:"Hapus Transaksi",description:(I.value,"Apakah Anda yakin ingin menghapus transaksi ini?"),icon:"ðŸ—‘ï¸","confirm-text":"Hapus","cancel-text":"Batal","confirm-variant":"danger","confirm-loading":L.value,onConfirm:V,onClose:s[13]||(s[13]=x=>A.value=!1)},{default:b(()=>[e("div",na,[s[49]||(s[49]=e("div",{class:"p-3 md:p-4 bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-xl md:rounded-2xl"},[e("p",{class:"text-xs md:text-sm text-red-600 flex items-start gap-2"},[e("span",{class:"text-base md:text-lg mt-0.5"},"âš ï¸"),e("span",null,[e("strong",{class:"block"},"Tindakan ini tidak dapat dibatalkan!"),u(" Transaksi yang dihapus akan mempengaruhi saldo akun dan progress tabungan. ")])])],-1)),I.value?(i(),r("div",oa,[s[48]||(s[48]=e("h4",{class:"font-semibold text-gray-800 text-sm md:text-base mb-2"},"Detail Transaksi:",-1)),e("div",da,[e("div",null,[s[42]||(s[42]=e("span",{class:"text-gray-600"},"Jenis:",-1)),e("p",ia,n(I.value.amount>0?"Tabungan":"Pembelian"),1)]),e("div",null,[s[43]||(s[43]=e("span",{class:"text-gray-600"},"Jumlah:",-1)),e("p",{class:C(["font-bold",I.value.amount>0?"text-green-600":"text-red-600"])},n(E(I.value.amount)),3)]),e("div",null,[s[44]||(s[44]=e("span",{class:"text-gray-600"},"Akun:",-1)),e("p",ra,n(I.value.transaction?.account?.name),1)]),e("div",null,[s[45]||(s[45]=e("span",{class:"text-gray-600"},"Metode:",-1)),e("p",ma,n(xe(I.value.payment_method)),1)]),e("div",null,[s[46]||(s[46]=e("span",{class:"text-gray-600"},"Tanggal:",-1)),e("p",ua,n(le(I.value.created_at)),1)]),I.value.note?(i(),r("div",ca,[s[47]||(s[47]=e("span",{class:"text-gray-600"},"Catatan:",-1)),e("p",pa,n(I.value.note),1)])):k("",!0)])])):k("",!0)])]),_:1},8,["show","description","confirm-loading"])]))}},ga=ie(xa,[["__scopeId","data-v-05300392"]]),ba={class:"py-2 min-h-screen relative overflow-hidden"},ya={class:"w-full px-3 sm:px-4 lg:px-6 relative z-10"},va={class:"flex items-center justify-between"},fa={class:"flex items-center gap-2 md:gap-3"},ka={class:"text-lg md:text-xl"},ha={class:"font-medium text-sm md:text-base"},_a={class:"flex mb-4","aria-label":"Breadcrumb"},wa={class:"flex items-center space-x-2 text-sm"},ja={class:"flex items-center"},$a={class:"flex items-center"},Ia={class:"text-gray-700 font-medium text-xs md:text-sm truncate max-w-[120px] md:max-w-none"},Va={class:"relative overflow-hidden bg-gradient-to-br from-pink-50 via-white to-blue-50 rounded-xl md:rounded-2xl border border-pink-100/40 shadow-md p-4 mb-4"},Pa={class:"relative flex flex-col md:flex-row md:items-center justify-between gap-3 md:gap-0 mb-3 md:mb-2"},Ca={class:"flex items-center gap-3 md:gap-4"},Ta={class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-pink-400 to-rose-500 rounded-lg md:rounded-xl flex items-center justify-center shadow-md"},Ma={class:"text-xl md:text-2xl text-white"},Sa={class:"text-lg md:text-2xl font-bold text-gray-800 line-clamp-2"},Da={class:"flex flex-wrap items-center gap-2 mt-2"},Ba={key:0,class:"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},Ua={class:"flex items-center gap-2"},Aa={key:1,class:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs"},Ea={class:"relative grid grid-cols-2 md:grid-cols-4 gap-2 mt-3 md:mt-4"},qa={class:"text-center p-3 md:p-4 bg-white/80 backdrop-blur-sm rounded-lg md:rounded-xl border border-blue-200/50 shadow-sm"},Oa={class:"text-base md:text-xl font-bold text-blue-700"},za={class:"text-center p-3 md:p-4 bg-white/80 backdrop-blur-sm rounded-lg md:rounded-xl border border-orange-200/50 shadow-sm"},La={class:"text-base md:text-xl font-bold text-orange-700"},Fa={class:"text-center p-3 md:p-4 bg-white/80 backdrop-blur-sm rounded-lg md:rounded-xl border border-green-200/50 shadow-sm"},Ka={class:"text-center p-3 md:p-4 bg-white/80 backdrop-blur-sm rounded-lg md:rounded-xl border border-purple-200/50 shadow-sm"},Ja={class:"text-base md:text-xl font-bold text-purple-700"},Na={class:"grid grid-cols-1 lg:grid-cols-3 gap-3 md:gap-4"},Ga={class:"lg:col-span-2 space-y-3 md:space-y-4"},Ha={key:0,class:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl md:rounded-2xl p-4 md:p-6 border border-indigo-100"},Ra={class:"grid grid-cols-2 gap-3 md:gap-4"},Qa={class:"space-y-1"},Wa={class:"font-bold text-gray-800 text-base md:text-lg"},Xa={class:"space-y-1"},Ya={class:"font-bold text-green-600 text-base md:text-lg"},Za={class:"col-span-2 space-y-1"},es={class:"bg-white/70 rounded-lg md:rounded-xl p-2 md:p-3 border border-gray-200"},ts={class:"flex items-center justify-between"},as={class:"text-xs md:text-sm text-gray-600"},ss={class:"font-bold text-blue-600 text-base md:text-lg"},ls={class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},ns={class:"space-y-3 md:space-y-4"},os={class:"flex justify-between text-xs md:text-sm"},ds={class:"font-medium text-gray-700"},is={class:"text-gray-600"},rs={class:"w-full bg-gray-200 rounded-full h-3 md:h-4"},ms={class:"flex justify-between text-xs text-gray-500"},us={key:0,class:"text-red-500 font-semibold"},cs={key:1,class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},ps={class:"text-gray-700 leading-relaxed text-sm md:text-base"},xs={key:2,class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},gs={class:"space-y-3 md:space-y-4"},bs={key:0,class:"flex items-center justify-between p-3 md:p-4 bg-gradient-to-r from-pink-50 to-rose-50 rounded-lg md:rounded-xl border border-pink-200"},ys={class:"font-medium text-gray-800 flex items-center gap-2 text-sm"},vs={key:0,class:"text-base md:text-lg"},fs={key:1,class:"text-base md:text-lg"},ks={key:1,class:"space-y-3 md:space-y-4"},hs={key:0,class:"flex items-center justify-between p-3 md:p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg md:rounded-xl border border-blue-200"},_s={class:"text-base md:text-lg"},ws={key:1,class:"p-3 md:p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg md:rounded-xl border border-green-200"},js={class:"flex items-center justify-between mb-2 md:mb-3"},$s={class:"text-xs text-gray-500 break-all bg-white/50 p-2 rounded-lg"},Is={key:2,class:"space-y-3 md:space-y-4"},Vs={key:0,class:"p-3 md:p-4 bg-gradient-to-r from-purple-50 to-violet-50 rounded-lg md:rounded-xl border border-purple-200"},Ps={class:"flex items-center justify-between mb-2 md:mb-3"},Cs={class:"text-xs text-gray-500 break-all bg-white/50 p-2 rounded-lg"},Ts={key:1,class:"p-3 md:p-4 bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg md:rounded-xl border border-orange-200"},Ms={class:"text-xs md:text-sm text-gray-700 bg-white/50 p-2 md:p-3 rounded-lg"},Ss={key:3,class:"grid grid-cols-2 gap-2"},Ds={key:0,class:"p-2 md:p-3 bg-white rounded-lg md:rounded-xl border border-gray-200 text-center hover:shadow-md transition-shadow"},Bs={class:"text-xs text-gray-500 block capitalize mb-2"},Us={class:"font-medium text-gray-800 text-xs md:text-sm"},As={key:3,class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-4 md:p-6 border border-white/20 shadow-lg"},Es={class:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4"},qs={class:"text-xs text-gray-500 block capitalize mb-2"},Os={class:"font-medium text-gray-800 text-xs md:text-sm"},zs={class:"space-y-3 md:space-y-4"},Ls={class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},Fs={class:"space-y-3 md:space-y-4"},Ks={class:"flex items-center justify-between p-2 md:p-3 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg md:rounded-xl"},Js={class:"font-medium text-gray-800 text-xs md:text-sm"},Ns={class:"flex items-center justify-between p-2 md:p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg md:rounded-xl"},Gs={class:"font-medium text-gray-800 text-xs md:text-sm"},Hs={class:"flex items-center justify-between p-2 md:p-3 bg-gradient-to-r from-purple-50 to-violet-50 rounded-lg md:rounded-xl"},Rs={class:"font-medium text-gray-800 text-xs md:text-sm capitalize"},Qs={class:"flex items-center justify-between p-2 md:p-3 bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg md:rounded-xl"},Ws={class:"font-bold text-orange-700 text-xs md:text-sm"},Xs={class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},Ys={class:"space-y-2 md:space-y-3"},Zs={key:1,class:"text-center p-2 md:p-3 bg-gray-50 rounded-lg md:rounded-xl"},el={class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},tl={class:"space-y-3 md:space-y-4"},al={class:"flex items-center gap-2 md:gap-3"},sl={class:"text-xs text-gray-500"},ll={class:"flex items-center gap-2 md:gap-3"},nl={class:"text-xs text-gray-500"},ol={class:"space-y-4 md:space-y-6 max-h-[50vh] md:max-h-[60vh] overflow-y-auto pr-2"},dl={class:"space-y-3 md:space-y-4"},il={class:"flex items-center justify-between"},rl={key:0,class:"flex gap-2"},ml={key:0},ul={class:"text-xs text-gray-500 mt-1"},cl={key:1},pl={key:0,class:"text-xs text-gray-500 mt-1"},xl={key:0,class:"space-y-3 md:space-y-4"},gl={class:"grid grid-cols-2 gap-3 md:gap-4"},bl={class:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl md:rounded-2xl p-3 md:p-4 border border-green-200"},yl={class:"flex items-center justify-between"},vl={class:"text-xs text-gray-500"},fl={class:"text-right"},kl={class:"text-lg md:text-xl font-bold text-green-600"},hl={key:1,class:"grid grid-cols-1 gap-3 md:gap-4"},_l={key:2,class:"space-y-3 md:space-y-4"},wl={class:"bg-gradient-to-r from-pink-50 to-rose-50 rounded-xl md:rounded-2xl p-3 md:p-4 border border-pink-100"},jl={class:"space-y-3 md:space-y-4"},$l={key:0,class:"space-y-2 md:space-y-3"},Il={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},Vl={class:"text-base md:text-lg"},Pl={class:"flex gap-2 md:gap-4"},Cl=["value","onUpdate:modelValue"],Tl={class:"text-xs md:text-sm font-medium text-gray-700"},Ml={key:1,class:"space-y-2"},Sl={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},Dl={class:"text-base md:text-lg"},Bl=["onUpdate:modelValue"],Ul={value:""},Al=["value"],El={key:2,class:"space-y-2"},ql={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},Ol={class:"text-base md:text-lg"},zl=["type","onUpdate:modelValue","placeholder"],Ll={key:3,class:"space-y-2"},Fl={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},Kl={class:"text-base md:text-lg"},Jl=["onUpdate:modelValue","placeholder"],Nl={key:4,class:"space-y-2"},Gl={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},Hl={class:"text-base md:text-lg"},Rl=["onUpdate:modelValue","placeholder"],Ql={key:5,class:"space-y-2"},Wl={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},Xl={class:"text-base md:text-lg"},Yl=["onUpdate:modelValue"],Zl={key:3,class:"p-2 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl md:rounded-2xl"},en={__name:"Show",props:{item:Object,project:Object,canEdit:Boolean},setup(a){const y=a,h=$(!1);$(1),$(0);const S=$(!1),f=$([]);fe(()=>{L()});const l=_e({item_type:y.item.item_type,item_category:y.item.item_category||"",name:y.item.name,description:y.item.description||"",planned_amount:y.item.planned_amount,actual_spent:y.item.actual_spent,status:y.item.status,details:y.item.details||{}}),D=P(()=>f.value&&f.value.length>0),O=P(()=>S.value||!D.value),z=P(()=>!f.value||!Array.isArray(f.value)?[]:f.value.map(m=>({value:m,label:m}))),L=async()=>{try{console.log("Loading categories for project:",y.project.id);const m=await we.get(route("projects.items.api.categories",{project:y.project.id}));console.log("Categories API response:",m.data),m.data&&m.data.success?f.value=m.data.categories||[]:Array.isArray(m.data)?f.value=m.data:m.data&&Array.isArray(m.data.categories)?f.value=m.data.categories:(console.warn("Unexpected categories response format:",m.data),f.value=[]),console.log("Final available categories:",f.value)}catch(m){console.error("Error loading categories:",m),f.value=[]}},T=P(()=>["goods","material"].includes(l.item_type)),B=P(()=>{if(!T.value)return l.planned_amount;const m=parseFloat(l.details.quantity)||0,t=parseFloat(l.details.unit_price)||0;return m*t}),A=P(()=>y.canEdit&&y.item.status!=="complete"),I=P(()=>["goods","material"].includes(y.item.item_type)),w=P(()=>y.item.details?["ukuran","warna","material","merk"].some(t=>y.item.details[t]):!1),j=P(()=>{if(!y.item.details)return!1;const m={...y.item.details};return delete m.quantity,delete m.unit_price,Object.keys(m).length>0}),Y=[{value:"goods",label:"ðŸ›ï¸ Barang"},{value:"service",label:"ðŸ‘¨â€ðŸ’¼ Jasa"},{value:"document",label:"ðŸ“„ Dokumen"},{value:"task",label:"âœ… Tugas"},{value:"material",label:"ðŸ—ï¸ Material"}],G=[{value:"needed",label:"â³ Diperlukan"},{value:"in_progress",label:"ðŸš§ Dalam Proses"},{value:"ready",label:"ðŸ“¦ Siap"},{value:"complete",label:"âœ… Selesai"},{value:"cancelled",label:"âŒ Dibatalkan"}],ae=[{value:"online",label:"ðŸ›’ Beli Online"},{value:"store",label:"ðŸª Beli di Toko"}],U={shopee:{name:"Shopee",icon:"ðŸŸ ",color:"text-orange-500"},tokopedia:{name:"Tokopedia",icon:"ðŸŸ¢",color:"text-green-500"},lazada:{name:"Lazada",icon:"ðŸ”µ",color:"text-blue-500"},blibli:{name:"Blibli",icon:"ðŸ”´",color:"text-red-500"},bukalapak:{name:"Bukalapak",icon:"ðŸŸ¡",color:"text-yellow-500"},other:{name:"Lainnya",icon:"ðŸ›’",color:"text-gray-500"}},H=P(()=>({goods:[{key:"purchase_type",label:"Cara Pembelian",type:"radio",icon:"ðŸ›’",options:ae},...l.details?.purchase_type==="online"?[{key:"ecommerce_platform",label:"Platform Online",type:"select",icon:"ðŸ“±",options:Object.entries(U).map(([t,d])=>({value:t,label:`${d.icon} ${d.name}`}))},{key:"online_link",label:"Link Produk",type:"url",icon:"ðŸ”—",placeholder:"https://..."}]:[],...l.details?.purchase_type==="store"?[{key:"store_maps",label:"Link Google Maps",type:"url",icon:"ðŸ—ºï¸",placeholder:"https://maps.google.com/..."},{key:"store_address",label:"Alamat Toko",type:"textarea",icon:"ðŸª",placeholder:"Alamat lengkap toko..."}]:[],{key:"ukuran",label:"Ukuran",type:"text",icon:"ðŸ“"},{key:"warna",label:"Warna",type:"text",icon:"ðŸŽ¨"},{key:"material",label:"Material",type:"text",icon:"âš™ï¸"},{key:"merk",label:"Merk",type:"text",icon:"ðŸ·ï¸"}],service:[{key:"vendor_kontak",label:"Kontak Vendor",type:"text",icon:"ðŸ“ž"},{key:"tanggal_kontrak",label:"Tanggal Kontrak",type:"date",icon:"ðŸ“…"},{key:"sisa_pembayaran",label:"Sisa Pembayaran",type:"number",icon:"ðŸ’°"},{key:"menu_pilihan",label:"Menu Pilihan",type:"text",icon:"ðŸ½ï¸"},{key:"lokasi",label:"Lokasi",type:"text",icon:"ðŸ“"}],document:[{key:"tanggal_kadaluarsa",label:"Tanggal Kadaluarsa",type:"date",icon:"ðŸ“…"},{key:"lokasi_fisik",label:"Lokasi Fisik",type:"text",icon:"ðŸ“"},{key:"status_legalitas",label:"Status Legalitas",type:"text",icon:"âš–ï¸"},{key:"nomor_dokumen",label:"Nomor Dokumen",type:"text",icon:"ðŸ”¢"}],task:[{key:"pihak_pengurus",label:"Pihak Pengurus",type:"text",icon:"ðŸ‘¤"},{key:"biaya_administrasi",label:"Biaya Administrasi",type:"number",icon:"ðŸ’°"},{key:"progress_persentase",label:"Progress (%)",type:"number",icon:"ðŸ“Š"},{key:"deadline",label:"Deadline",type:"date",icon:"â°"}],material:[{key:"kuantitas_target",label:"Kuantitas Target",type:"number",icon:"ðŸ“¦"},{key:"satuan",label:"Satuan",type:"text",icon:"âš–ï¸"},{key:"supplier_preferensi",label:"Supplier Preferensi",type:"text",icon:"ðŸª"},{key:"spesifikasi",label:"Spesifikasi",type:"text",icon:"ðŸ“‹"}]})[l.item_type]||[]);ue([()=>l.details.quantity,()=>l.details.unit_price],()=>{T.value&&(l.planned_amount=B.value)}),ue(()=>l.item_type,(m,t)=>{if(m!==t){if(m!=="goods"){const{purchase_type:d,ecommerce_platform:V,online_link:se,store_maps:re,store_address:E,...le}=l.details;l.details=le}["goods","material"].includes(m)&&(l.details.quantity||(l.details.quantity=1),l.details.unit_price||(l.details.unit_price=0),l.planned_amount=B.value)}});const F=()=>{l.item_type=y.item.item_type,l.item_category=y.item.item_category||"",l.name=y.item.name,l.description=y.item.description||"",l.planned_amount=y.item.planned_amount,l.actual_spent=y.item.actual_spent,l.status=y.item.status,l.details=y.item.details||{},S.value=!0,["goods","material"].includes(y.item.item_type)&&(l.details.quantity=y.item.details?.quantity||1,l.details.unit_price=y.item.details?.unit_price||0),h.value=!0},q=()=>{l.put(route("projects.items.update",{project:y.project.id,item:y.item.id}),{preserveScroll:!0,onSuccess:()=>{h.value=!1,l.reset(),be.reload()},onError:m=>{console.error("Update error:",m)}})},N=()=>{h.value=!1,l.clearErrors(),l.reset()},Z=()=>{be.reload({only:["item"]})},R=m=>{m&&window.open(m,"_blank")},ee=()=>{T.value&&(l.planned_amount=B.value)},K=m=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(m),v=m=>({goods:"Barang",service:"Jasa",document:"Dokumen",task:"Tugas",material:"Material"})[m]||m,o=m=>({needed:"Diperlukan",in_progress:"Dalam Proses",ready:"Siap",complete:"Selesai",cancelled:"Dibatalkan"})[m]||m,_=m=>({planning:"Perencanaan",on_going:"Berjalan",completed:"Selesai",cancelled:"Dibatalkan"})[m]||m;return(m,t)=>(i(),oe(Ve,{title:`${a.item.name} - ${a.project.name}`},{default:b(()=>[e("div",ba,[e("div",ya,[m.$page.props.flash.message?(i(),r("div",{key:0,class:C(["mb-4 md:mb-6 p-3 md:p-4 rounded-xl md:rounded-2xl border backdrop-blur-sm transition-all duration-300",{"bg-green-50 border-green-200 text-green-800":m.$page.props.flash.message.type==="success","bg-red-50 border-red-200 text-red-800":m.$page.props.flash.message.type==="error"}])},[e("div",va,[e("div",fa,[e("span",ka,n(m.$page.props.flash.message.type==="success"?"âœ…":"âš ï¸"),1),e("span",ha,n(m.$page.props.flash.message.message),1)]),e("button",{onClick:t[0]||(t[0]=d=>m.$page.props.flash.message=null),class:"text-gray-500 hover:text-gray-700 transition-colors text-lg"}," âœ• ")])],2)):k("",!0),e("nav",_a,[e("ol",wa,[e("li",null,[g(p(ge),{href:m.route("projects.index"),class:"text-gray-600 hover:text-pink-600 transition-colors flex items-center gap-1"},{default:b(()=>[...t[18]||(t[18]=[e("span",{class:"text-base md:text-lg"},"ðŸ’¼",-1),e("span",{class:"hidden xs:inline"},"Projects",-1)])]),_:1},8,["href"])]),e("li",ja,[t[19]||(t[19]=e("span",{class:"text-gray-400 mx-2"},"â€º",-1)),g(p(ge),{href:m.route("projects.items.index",{project:a.project.id}),class:"text-gray-600 hover:text-pink-600 transition-colors text-xs md:text-sm"},{default:b(()=>[u(n(a.project.name),1)]),_:1},8,["href"])]),e("li",$a,[t[20]||(t[20]=e("span",{class:"text-gray-400 mx-2"},"â€º",-1)),e("span",Ia,n(a.item.name),1)])])]),e("div",Va,[t[31]||(t[31]=e("div",{class:"absolute -top-10 -right-10 w-40 h-40 bg-pink-100/40 rounded-full blur-3xl"},null,-1)),t[32]||(t[32]=e("div",{class:"absolute -bottom-12 -left-12 w-48 h-48 bg-blue-100/40 rounded-full blur-3xl"},null,-1)),e("div",Pa,[e("div",Ca,[e("div",Ta,[e("span",Ma,n(a.item.item_type_icon),1)]),e("div",null,[e("h1",Sa,n(a.item.name),1),e("div",Da,[e("span",{class:C(["px-2 py-1 rounded-full text-xs font-medium",a.item.item_type_badge])},n(v(a.item.item_type)),3),e("span",{class:C(["px-2 py-1 rounded-full text-xs font-medium",a.item.status_badge])},n(a.item.status_icon)+" "+n(o(a.item.status)),3),a.item.item_category&&a.item.item_category!=="Uncategorized"?(i(),r("span",Ba," ðŸ“‚ "+n(a.item.item_category),1)):k("",!0)])])]),e("div",Ua,[A.value?(i(),oe(M,{key:0,onClick:F,variant:"primary",size:"sm",class:"!px-3 !py-2 text-xs"},{icon:b(()=>[...t[21]||(t[21]=[u("âœï¸",-1)])]),default:b(()=>[t[22]||(t[22]=e("span",{class:"hidden xs:inline"},"Edit Item",-1))]),_:1})):(i(),r("div",Aa," ðŸ”’ Read Only "))])]),e("div",Ea,[e("div",qa,[t[23]||(t[23]=e("div",{class:"text-xl md:text-2xl mb-2"},"ðŸ’°",-1)),e("div",Oa,n(a.item.formatted_planned_amount),1),t[24]||(t[24]=e("div",{class:"text-xs md:text-sm text-gray-600"},"Rencana Biaya",-1))]),e("div",za,[t[25]||(t[25]=e("div",{class:"text-xl md:text-2xl mb-2"},"ðŸ’¸",-1)),e("div",La,n(a.item.formatted_actual_spent),1),t[26]||(t[26]=e("div",{class:"text-xs md:text-sm text-gray-600"},"Realisasi",-1))]),e("div",Fa,[t[27]||(t[27]=e("div",{class:"text-xl md:text-2xl mb-2"},"ðŸ“Š",-1)),e("div",{class:C(["text-base md:text-xl font-bold",a.item.remaining_amount>=0?"text-green-700":"text-red-700"])},n(a.item.formatted_remaining_amount),3),t[28]||(t[28]=e("div",{class:"text-xs md:text-sm text-gray-600"},"Sisa Anggaran",-1))]),e("div",Ka,[t[29]||(t[29]=e("div",{class:"text-xl md:text-2xl mb-2"},"ðŸ“ˆ",-1)),e("div",Ja,n(a.item.progress_percentage.toFixed(1))+"%",1),t[30]||(t[30]=e("div",{class:"text-xs md:text-sm text-gray-600"},"Progress",-1))])])]),e("div",Na,[e("div",Ga,[I.value&&a.item.details?(i(),r("div",Ha,[t[38]||(t[38]=e("h3",{class:"font-semibold text-gray-800 text-base md:text-lg mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"ðŸ“Š"),u(" Informasi Kuantitas & Harga ")],-1)),e("div",Ra,[e("div",Qa,[t[34]||(t[34]=e("span",{class:"text-xs md:text-sm text-gray-600 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"ðŸ“¦"),u(" Quantity ")],-1)),e("p",Wa,[u(n(a.item.details.quantity||0)+" ",1),t[33]||(t[33]=e("span",{class:"text-xs font-normal text-gray-500"},"unit",-1))])]),e("div",Xa,[t[35]||(t[35]=e("span",{class:"text-xs md:text-sm text-gray-600 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"ðŸ’°"),u(" Harga Satuan ")],-1)),e("p",Ya,n(K(a.item.details.unit_price||0)),1)]),e("div",Za,[t[37]||(t[37]=e("span",{class:"text-xs md:text-sm text-gray-600 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"ðŸ§®"),u(" Perhitungan Total ")],-1)),e("div",es,[e("div",ts,[e("span",as,n(a.item.details.quantity||0)+" Ã— "+n(K(a.item.details.unit_price||0)),1),e("span",ss," = "+n(K(a.item.planned_amount)),1)]),t[36]||(t[36]=e("p",{class:"text-xs text-gray-500 mt-1"}," Total rencana biaya dihitung otomatis dari quantity Ã— harga satuan ",-1))])])])])):k("",!0),e("div",ls,[t[39]||(t[39]=e("h2",{class:"font-semibold text-lg md:text-xl text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"ðŸ“ˆ"),u(" Progress Keuangan ")],-1)),e("div",ns,[e("div",os,[e("span",ds,n(a.item.progress_percentage.toFixed(1))+"%",1),e("span",is,n(a.item.formatted_actual_spent)+" / "+n(a.item.formatted_planned_amount),1)]),e("div",rs,[e("div",{class:"h-3 md:h-4 rounded-full transition-all duration-1000 bg-gradient-to-r from-pink-400 to-rose-500 shadow-lg",style:pe({width:Math.min(a.item.progress_percentage,100)+"%"})},null,4)]),e("div",ms,[e("span",null,"Sisa: "+n(a.item.formatted_remaining_amount),1),a.item.remaining_amount<0?(i(),r("span",us," âš ï¸ Melebihi budget ")):k("",!0)])])]),a.item.description?(i(),r("div",cs,[t[40]||(t[40]=e("h2",{class:"font-semibold text-lg md:text-xl text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"ðŸ“„"),u(" Deskripsi ")],-1)),e("p",ps,n(a.item.description),1)])):k("",!0),a.item.item_type==="goods"&&a.item.details&&j.value?(i(),r("div",xs,[t[50]||(t[50]=e("h2",{class:"font-semibold text-lg md:text-xl text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"ðŸ›ï¸"),u(" Informasi Pembelian ")],-1)),e("div",gs,[a.item.details.purchase_type?(i(),r("div",bs,[t[41]||(t[41]=e("span",{class:"text-xs md:text-sm text-gray-600 font-medium"},"Cara Pembelian:",-1)),e("span",ys,[a.item.details.purchase_type==="online"?(i(),r("span",vs,"ðŸ›’")):(i(),r("span",fs,"ðŸª")),u(" "+n(a.item.details.purchase_type==="online"?"Beli Online":"Beli di Toko"),1)])])):k("",!0),a.item.details.purchase_type==="online"?(i(),r("div",ks,[a.item.details.ecommerce_platform?(i(),r("div",hs,[t[42]||(t[42]=e("span",{class:"text-xs md:text-sm text-gray-600 font-medium"},"Platform:",-1)),e("span",{class:C(["font-medium flex items-center gap-2 text-sm",U[a.item.details.ecommerce_platform]?.color])},[e("span",_s,n(U[a.item.details.ecommerce_platform]?.icon),1),u(" "+n(U[a.item.details.ecommerce_platform]?.name),1)],2)])):k("",!0),a.item.details.online_link?(i(),r("div",ws,[e("div",js,[t[45]||(t[45]=e("span",{class:"text-xs md:text-sm text-gray-600 font-medium"},"Link Produk:",-1)),g(M,{onClick:t[1]||(t[1]=d=>R(a.item.details.online_link)),variant:"primary",size:"sm",class:"!px-3 !py-2 text-xs"},{icon:b(()=>[...t[43]||(t[43]=[u("ðŸ”—",-1)])]),default:b(()=>[t[44]||(t[44]=e("span",{class:"hidden xs:inline"},"Buka Link",-1))]),_:1})]),e("p",$s,n(a.item.details.online_link),1)])):k("",!0)])):k("",!0),a.item.details.purchase_type==="store"?(i(),r("div",Is,[a.item.details.store_maps?(i(),r("div",Vs,[e("div",Ps,[t[48]||(t[48]=e("span",{class:"text-xs md:text-sm text-gray-600 font-medium"},"Lokasi Toko:",-1)),g(M,{onClick:t[2]||(t[2]=d=>R(a.item.details.store_maps)),variant:"primary",size:"sm",class:"!px-3 !py-2 text-xs"},{icon:b(()=>[...t[46]||(t[46]=[u("ðŸ—ºï¸",-1)])]),default:b(()=>[t[47]||(t[47]=e("span",{class:"hidden xs:inline"},"Buka Maps",-1))]),_:1})]),e("p",Cs,n(a.item.details.store_maps),1)])):k("",!0),a.item.details.store_address?(i(),r("div",Ts,[t[49]||(t[49]=e("span",{class:"text-xs md:text-sm text-gray-600 font-medium block mb-2 md:mb-3"},"Alamat Toko:",-1)),e("p",Ms,n(a.item.details.store_address),1)])):k("",!0)])):k("",!0),w.value?(i(),r("div",Ss,[(i(),r(Q,null,W(["ukuran","warna","material","merk"],d=>e("div",{key:d},[a.item.details[d]?(i(),r("div",Ds,[e("span",Bs,n(d),1),e("span",Us,n(a.item.details[d]),1)])):k("",!0)])),64))])):k("",!0)])])):k("",!0),a.item.details&&Object.keys(a.item.details).length>0&&a.item.item_type!=="goods"?(i(),r("div",As,[t[51]||(t[51]=e("h2",{class:"font-semibold text-lg md:text-xl text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"ðŸ”§"),u(" Detail Tambahan ")],-1)),e("div",Es,[(i(!0),r(Q,null,W(a.item.details,(d,V)=>(i(),r("div",{key:V,class:"p-3 md:p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg md:rounded-xl border border-gray-200 hover:shadow-md transition-shadow"},[e("span",qs,n(V.replace("_"," ")),1),e("span",Os,n(d),1)]))),128))])])):k("",!0),I.value?k("",!0):(i(),oe(dt,{key:4,"project-item":a.item,checklists:a.item.checklists||[],"item-name":a.item.name,onChecklistUpdated:Z},null,8,["project-item","checklists","item-name"])),g(ga,{"project-item":a.item,payments:a.item.payments||[],"item-name":a.item.name,onPaymentUpdated:m.loadPayments},null,8,["project-item","payments","item-name","onPaymentUpdated"])]),e("div",zs,[e("div",Ls,[t[56]||(t[56]=e("h3",{class:"font-semibold text-base md:text-lg text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"ðŸ’¼"),u(" Project Info ")],-1)),e("div",Fs,[e("div",Ks,[t[52]||(t[52]=e("span",{class:"text-xs md:text-sm text-gray-600"},"Project",-1)),e("p",Js,n(a.project.name),1)]),e("div",Ns,[t[53]||(t[53]=e("span",{class:"text-xs md:text-sm text-gray-600"},"Kategori",-1)),e("p",Gs,n(a.project.category.name),1)]),e("div",Hs,[t[54]||(t[54]=e("span",{class:"text-xs md:text-sm text-gray-600"},"Status Project",-1)),e("p",Rs,n(_(a.project.status)),1)]),e("div",Qs,[t[55]||(t[55]=e("span",{class:"text-xs md:text-sm text-gray-600"},"Target Budget",-1)),e("p",Ws,n(K(a.project.target_total_amount)),1)])])]),e("div",Xs,[t[60]||(t[60]=e("h3",{class:"font-semibold text-base md:text-lg text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"âš¡"),u(" Quick Actions ")],-1)),e("div",Ys,[A.value?(i(),oe(M,{key:0,onClick:F,variant:"primary",class:"w-full justify-center !px-3 !py-2 text-xs md:text-sm"},{icon:b(()=>[...t[57]||(t[57]=[u("âœï¸",-1)])]),default:b(()=>[t[58]||(t[58]=e("span",{class:"hidden xs:inline"},"Edit Item",-1))]),_:1})):(i(),r("div",Zs,[...t[59]||(t[59]=[e("p",{class:"text-xs text-gray-600"},"Item sudah selesai, tidak dapat diedit",-1)])]))])]),e("div",el,[t[65]||(t[65]=e("h3",{class:"font-semibold text-base md:text-lg text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"ðŸ•’"),u(" Timeline ")],-1)),e("div",tl,[e("div",al,[t[62]||(t[62]=e("div",{class:"w-6 h-6 md:w-8 md:h-8 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0"},[e("span",{class:"text-white text-xs"},"âœ“")],-1)),e("div",null,[t[61]||(t[61]=e("p",{class:"text-xs md:text-sm font-medium text-gray-800"},"Dibuat",-1)),e("p",sl,n(a.item.created_at),1)])]),e("div",ll,[t[64]||(t[64]=e("div",{class:"w-6 h-6 md:w-8 md:h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0"},[e("span",{class:"text-white text-xs"},"â†»")],-1)),e("div",null,[t[63]||(t[63]=e("p",{class:"text-xs md:text-sm font-medium text-gray-800"},"Terakhir Diupdate",-1)),e("p",nl,n(a.item.updated_at),1)])])])])])]),g(de,{show:h.value,"onUpdate:show":t[17]||(t[17]=d=>h.value=d),title:"Edit Item Project",description:"Perbarui informasi item project "+a.item.name,icon:"âœï¸","confirm-text":"Perbarui","confirm-loading":p(l).processing,onConfirm:q,onClose:N,size:"xl"},{default:b(()=>[e("div",ol,[g(X,{modelValue:p(l).item_type,"onUpdate:modelValue":t[3]||(t[3]=d=>p(l).item_type=d),label:"Jenis Item",placeholder:"Pilih jenis item",options:Y,error:p(l).errors.item_type,icon:"ðŸ·ï¸",required:"",disabled:p(l).processing},null,8,["modelValue","error","disabled"]),e("div",dl,[e("div",il,[t[70]||(t[70]=e("label",{class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"ðŸ“‚"),u(" Kategori Item ")],-1)),D.value?(i(),r("div",rl,[g(M,{onClick:t[4]||(t[4]=d=>S.value=!1),variant:"secondary",size:"xs",class:C(O.value?"":"ring-2 ring-pink-400")},{icon:b(()=>[...t[66]||(t[66]=[u("ðŸ“‹",-1)])]),default:b(()=>[t[67]||(t[67]=e("span",{class:"hidden xs:inline"},"Pilih",-1))]),_:1},8,["class"]),g(M,{onClick:t[5]||(t[5]=d=>S.value=!0),variant:"secondary",size:"xs",class:C(O.value?"ring-2 ring-pink-400":"")},{icon:b(()=>[...t[68]||(t[68]=[u("âž•",-1)])]),default:b(()=>[t[69]||(t[69]=e("span",{class:"hidden xs:inline"},"Baru",-1))]),_:1},8,["class"])])):k("",!0)]),!O.value&&D.value?(i(),r("div",ml,[g(X,{modelValue:p(l).item_category,"onUpdate:modelValue":t[6]||(t[6]=d=>p(l).item_category=d),label:"Pilih Kategori",placeholder:"Pilih kategori yang sudah ada",options:z.value,error:p(l).errors.item_category,icon:"ðŸ“‚",disabled:p(l).processing},null,8,["modelValue","options","error","disabled"]),e("p",ul," Pilih dari "+n(f.value.length)+" kategori yang sudah ada ",1)])):(i(),r("div",cl,[g(ye,{modelValue:p(l).item_category,"onUpdate:modelValue":t[7]||(t[7]=d=>p(l).item_category=d),label:"Kategori Item",placeholder:"Contoh: Perlengkapan Kamar, Dekorasi, Katering, dll.",error:p(l).errors.item_category,icon:"ðŸ“‚",disabled:p(l).processing},null,8,["modelValue","error","disabled"]),D.value?(i(),r("p",pl,[t[71]||(t[71]=u(" Atau ",-1)),e("button",{type:"button",onClick:t[8]||(t[8]=d=>S.value=!1),class:"text-pink-500 hover:text-pink-700 underline"}," pilih dari kategori yang sudah ada ")])):k("",!0)]))]),g(ye,{modelValue:p(l).name,"onUpdate:modelValue":t[9]||(t[9]=d=>p(l).name=d),label:"Nama Item",placeholder:"Contoh: Cincin Nikah, Vendor Katering, IMB, Semen Portland",error:p(l).errors.name,icon:"ðŸ“",required:"",disabled:p(l).processing},null,8,["modelValue","error","disabled"]),g(ce,{modelValue:p(l).description,"onUpdate:modelValue":t[10]||(t[10]=d=>p(l).description=d),label:"Deskripsi",placeholder:"Deskripsi detail tentang item ini...",error:p(l).errors.description,icon:"ðŸ“„",disabled:p(l).processing},null,8,["modelValue","error","disabled"]),T.value?(i(),r("div",xl,[e("div",gl,[g(ne,{label:"Qty Barang",modelValue:p(l).details.quantity,"onUpdate:modelValue":t[11]||(t[11]=d=>p(l).details.quantity=d),placeholder:"Jumlah barang",icon:"ðŸ’°",required:"",min:"1",disabled:p(l).processing,onInput:ee},null,8,["modelValue","disabled"]),g(ne,{label:"Rencana Biaya",modelValue:p(l).details.unit_price,"onUpdate:modelValue":t[12]||(t[12]=d=>p(l).details.unit_price=d),placeholder:"Harga per unit",icon:"ðŸ’°",required:"","account-type":"account_number",min:"0",disabled:p(l).processing,onInput:ee},null,8,["modelValue","disabled"])]),e("div",bl,[e("div",yl,[e("div",null,[t[72]||(t[72]=e("p",{class:"text-sm font-medium text-gray-700"},"Total Rencana Biaya:",-1)),e("p",vl,n(p(l).details.quantity||0)+" Ã— "+n(K(p(l).details.unit_price||0)),1)]),e("div",fl,[e("p",kl,n(K(B.value)),1),t[73]||(t[73]=e("p",{class:"text-xs text-gray-500"},"Terhitung otomatis",-1))])])]),J(e("input",{type:"hidden","onUpdate:modelValue":t[13]||(t[13]=d=>p(l).planned_amount=d)},null,512),[[te,p(l).planned_amount]])])):(i(),r("div",hl,[g(ne,{modelValue:p(l).planned_amount,"onUpdate:modelValue":t[14]||(t[14]=d=>p(l).planned_amount=d),label:"Rencana Biaya",placeholder:"Biaya yang direncanakan",error:p(l).errors.planned_amount,icon:"ðŸ’°","account-type":"account_number",disabled:p(l).processing},null,8,["modelValue","error","disabled"])])),J(e("input",{type:"hidden","onUpdate:modelValue":t[15]||(t[15]=d=>p(l).actual_spent=d)},null,512),[[te,p(l).actual_spent]]),g(X,{modelValue:p(l).status,"onUpdate:modelValue":t[16]||(t[16]=d=>p(l).status=d),label:"Status Item",placeholder:"Pilih status item",options:G,error:p(l).errors.status,icon:"ðŸŸ¢",required:"",disabled:p(l).processing},null,8,["modelValue","error","disabled"]),H.value.length>0?(i(),r("div",_l,[e("div",wl,[t[74]||(t[74]=e("h4",{class:"font-semibold text-gray-800 flex items-center gap-2 text-base md:text-lg mb-3 md:mb-4"},[e("span",null,"âœ¨"),u(" Detail Tambahan ")],-1)),e("div",jl,[(i(!0),r(Q,null,W(H.value,d=>(i(),r("div",{key:d.key,class:"space-y-2"},[d.type==="radio"?(i(),r("div",$l,[e("label",Il,[e("span",Vl,n(d.icon),1),u(" "+n(d.label),1)]),e("div",Pl,[(i(!0),r(Q,null,W(d.options,V=>(i(),r("label",{key:V.value,class:C(["flex items-center space-x-2 cursor-pointer p-2 md:p-3 rounded-lg md:rounded-xl border-2 transition-all",p(l).details[d.key]===V.value?"border-pink-400 bg-pink-50 shadow-sm":"border-gray-200 hover:border-pink-200"])},[J(e("input",{type:"radio",value:V.value,"onUpdate:modelValue":se=>p(l).details[d.key]=se,class:"text-pink-500 focus:ring-pink-400"},null,8,Cl),[[je,p(l).details[d.key]]]),e("span",Tl,n(V.label),1)],2))),128))])])):d.type==="select"?(i(),r("div",Ml,[e("label",Sl,[e("span",Dl,n(d.icon),1),u(" "+n(d.label),1)]),J(e("select",{"onUpdate:modelValue":V=>p(l).details[d.key]=V,class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all bg-white text-sm"},[e("option",Ul,"Pilih "+n(d.label.toLowerCase()),1),(i(!0),r(Q,null,W(d.options,V=>(i(),r("option",{key:V.value,value:V.value},n(V.label),9,Al))),128))],8,Bl),[[$e,p(l).details[d.key]]])])):d.type==="text"||d.type==="url"?(i(),r("div",El,[e("label",ql,[e("span",Ol,n(d.icon),1),u(" "+n(d.label),1)]),J(e("input",{type:d.type,"onUpdate:modelValue":V=>p(l).details[d.key]=V,placeholder:d.placeholder||`Masukkan ${d.label.toLowerCase()}`,class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all text-sm"},null,8,zl),[[Ie,p(l).details[d.key]]])])):d.type==="textarea"?(i(),r("div",Ll,[e("label",Fl,[e("span",Kl,n(d.icon),1),u(" "+n(d.label),1)]),J(e("textarea",{"onUpdate:modelValue":V=>p(l).details[d.key]=V,placeholder:d.placeholder||`Masukkan ${d.label.toLowerCase()}`,rows:"3",class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all resize-none text-sm"},null,8,Jl),[[te,p(l).details[d.key]]])])):d.type==="number"?(i(),r("div",Nl,[e("label",Gl,[e("span",Hl,n(d.icon),1),u(" "+n(d.label),1)]),J(e("input",{type:"number","onUpdate:modelValue":V=>p(l).details[d.key]=V,placeholder:d.placeholder||`Masukkan ${d.label.toLowerCase()}`,class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all text-sm"},null,8,Rl),[[te,p(l).details[d.key]]])])):d.type==="date"?(i(),r("div",Ql,[e("label",Wl,[e("span",Xl,n(d.icon),1),u(" "+n(d.label),1)]),J(e("input",{type:"date","onUpdate:modelValue":V=>p(l).details[d.key]=V,class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all text-sm"},null,8,Yl),[[te,p(l).details[d.key]]])])):k("",!0)]))),128))])])])):k("",!0),t[76]||(t[76]=e("div",{class:"p-3 md:p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl md:rounded-2xl border border-blue-200"},[e("p",{class:"text-xs md:text-sm text-gray-700 flex items-start gap-2"},[e("span",{class:"text-base md:text-lg mt-0.5"},"ðŸ’¡"),e("span",null,[e("strong",{class:"block"},"Jenis Item:"),u(" â€¢ "),e("strong",null,"Barang ðŸ›ï¸"),u(": Physical goods yang dibeli (hitung otomatis dari quantity Ã— harga satuan)"),e("br"),u(" â€¢ "),e("strong",null,"Jasa ðŸ‘¨â€ðŸ’¼"),u(": Services dari vendor/penyedia jasa"),e("br"),u(" â€¢ "),e("strong",null,"Dokumen ðŸ“„"),u(": Legal documents dan surat-surat"),e("br"),u(" â€¢ "),e("strong",null,"Tugas âœ…"),u(": Tasks dan pekerjaan yang perlu diselesaikan"),e("br"),u(" â€¢ "),e("strong",null,"Material ðŸ—ï¸"),u(": Bahan bangunan dan material konstruksi (hitung otomatis dari quantity Ã— harga satuan) ")])])],-1)),p(l).hasErrors?(i(),r("div",Zl,[...t[75]||(t[75]=[e("p",{class:"text-xs md:text-sm text-red-600 flex items-center gap-2"},[e("span",null,"âš ï¸"),u(" Terdapat kesalahan dalam pengisian form. Silakan periksa kembali input Anda. ")],-1)])])):k("",!0)])]),_:1},8,["show","description","confirm-loading"])])])]),_:1},8,["title"]))}},gn=ie(en,[["__scopeId","data-v-40728576"]]);export{gn as default};
