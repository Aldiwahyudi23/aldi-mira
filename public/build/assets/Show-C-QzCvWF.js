import{c as u,g as m,d as e,s as P,b as k,z as n,r as I,p as V,M as ne,f as c,K as de,l as g,N as le,w as b,F as G,y as H,m as z,O as Z,q as be,H as ye,o as ce,t as ve,a as fe,k as ae,x as p,E as ie,S as ke,P as he,C as _e,D as re}from"./vendor-_1bMFsGO.js";import{A as we}from"./AppLayout-B-FfRgLz.js";import{B as T,S as R,a as pe}from"./SelectInput--H5tB_dZ.js";/* empty css                                                                         */import{_ as se}from"./app-DzK-MRpb.js";import{_ as je}from"./TextInput-kUoWsk2U.js";import{_ as me}from"./TextInput-CfF7StUs.js";import{_ as oe}from"./TextAreaInput-CuZUnRRb.js";import{_ as te}from"./AccountInput-BwCpK7sc.js";import{_ as ue}from"./DateInput-BCLoSeid.js";/* empty css            */const $e={class:"flex items-start gap-2 md:gap-3 select-none"},Ie=["disabled"],Ve={class:"flex flex-col flex-1"},Pe={key:0,class:"text-xs text-gray-500 mt-0.5"},Ce={__name:"ToggleInput",props:{modelValue:{type:Boolean,required:!0},label:{type:String,default:""},description:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(a,{emit:y}){const _=a,S=y,f=()=>{_.disabled||S("update:modelValue",!_.modelValue)};return(s,M)=>(m(),u("div",$e,[e("button",{type:"button",class:P(["relative inline-flex items-center justify-center w-10 h-6 md:w-12 md:h-7 rounded-full transition-all duration-300 focus:outline-none",[a.modelValue?"bg-gradient-to-r from-pink-400 to-rose-500 shadow-md":"bg-gray-200",a.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer hover:scale-[1.05]"]]),onClick:f,disabled:a.disabled},[e("span",{class:P(["absolute left-0.5 md:left-1 top-0.5 md:top-1 w-4 h-4 md:w-5 md:h-5 bg-white rounded-full shadow-md transform transition-all duration-300",{"translate-x-4 md:translate-x-5":a.modelValue}])},null,2)],10,Ie),e("div",Ve,[e("label",{class:P(["text-xs md:text-sm font-medium",[a.disabled?"text-gray-400":a.modelValue?"text-pink-600":"text-gray-800"]]),onClick:f},n(a.label),3),a.description?(m(),u("p",Pe,n(a.description),1)):k("",!0)])]))}},Te=se(Ce,[["__scopeId","data-v-999cdc0b"]]),Se={class:"checklist-manager bg-gradient-to-br from-white via-pink-50 to-rose-50 rounded-xl md:rounded-2xl shadow-sm p-3 md:p-4 border border-pink-100"},Me={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-3 md:mb-4 gap-2"},De={class:"flex items-center gap-2 md:gap-3"},Be={class:"text-xs md:text-sm text-gray-600"},Ue={class:"font-semibold text-pink-600"},Ae={class:"text-rose-500 font-semibold ml-1"},Ee={class:"flex items-center gap-2 md:gap-3"},qe={class:"text-right"},Oe={class:"text-xs md:text-sm font-semibold text-gray-700"},ze={class:"w-24 md:w-28 bg-gray-200 rounded-full h-1.5 md:h-2 overflow-hidden"},Fe={class:"mb-4"},Le={class:"flex flex-nowrap items-center gap-2 bg-white/70 backdrop-blur-sm border border-pink-100 rounded-xl md:rounded-2xl p-2 md:p-3"},Ke={class:"space-y-2 md:space-y-3"},Je={key:0,class:"text-center py-4 bg-white/60 backdrop-blur-sm rounded-xl md:rounded-2xl border border-pink-100"},Ne={class:"text-gray-600 text-xs md:text-sm max-w-md mx-auto"},Ge={key:0,class:"flex flex-nowrap items-center gap-2"},He=["onKeypress","onBlur"],Re={class:"flex gap-1 md:gap-2 flex-shrink-0"},Qe={key:1,class:"flex flex-nowrap items-center justify-between gap-2"},We={class:"flex-1 min-w-0"},Xe={class:"flex items-center gap-1 md:gap-2 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity flex-shrink-0"},Ye={key:2,class:"flex items-center gap-2 mt-2 pl-1 text-xs text-green-600"},Ze={key:0,class:"fixed inset-0 flex items-center justify-center z-50 bg-black/50 backdrop-blur-sm"},et={class:"flex gap-2 md:gap-3 justify-center"},tt={class:"bg-white rounded-2xl md:rounded-3xl p-6 md:p-8 text-center max-w-sm mx-4 animate-bounce shadow-lg"},at={__name:"ChecklistManager",props:{projectItem:Object,checklists:Array,itemName:String},emits:["checklist-updated"],setup(a,{emit:y}){const _=a,S=y,f=I(_.checklists||[]),s=I(""),M=I(!1),U=I(null),A=I(null),E=I(null),C=I(""),$=I(!1),j=I(!1),h=I(null),F=I(null),L=V(()=>f.value.length),Q=V(()=>f.value.filter(v=>v.is_completed).length),D=V(()=>L.value>0?Math.round(Q.value/L.value*100):0),W=V(()=>[...f.value].sort((v,d)=>v.is_completed&&!d.is_completed?1:!v.is_completed&&d.is_completed?-1:new Date(v.created_at)-new Date(d.created_at)));ne(D,(v,d)=>{v===100&&d<100&&L.value>0&&($.value=!0,setTimeout(()=>$.value=!1,3e3))});const B=async()=>{if(s.value.trim()){M.value=!0;try{const v=await axios.post(route("project-items.checklists.store",{projectItem:_.projectItem.id}),{task_description:s.value.trim()});v.data.success&&(f.value.push(v.data.checklist),s.value="",S("checklist-updated"))}catch(v){console.error("Error adding checklist:",v),alert("Gagal menambahkan checklist")}finally{M.value=!1}}},q=async v=>{U.value=v.id;try{const d=await axios.patch(route("project-items.checklists.toggle",{projectItem:_.projectItem.id,checklist:v.id}));if(d.data.success){const w=f.value.findIndex(r=>r.id===v.id);w!==-1&&(f.value[w]=d.data.checklist),S("checklist-updated")}}catch(d){console.error("Error toggling checklist:",d),v.is_completed=!v.is_completed}finally{U.value=null}},N=v=>{E.value=v.id,C.value=v.task_description,ye(()=>{F.value&&(F.value.focus(),F.value.select())})},K=async v=>{if(!C.value.trim()){J();return}try{const d=await axios.put(route("project-items.checklists.update",{projectItem:_.projectItem.id,checklist:v.id}),{task_description:C.value.trim()});if(d.data.success){const w=f.value.findIndex(r=>r.id===v.id);w!==-1&&(f.value[w]=d.data.checklist),S("checklist-updated")}}catch(d){console.error("Error updating checklist:",d),alert("Gagal memperbarui checklist")}finally{E.value=null,C.value=""}},J=()=>{E.value=null,C.value=""},ee=v=>{h.value=v,j.value=!0},X=()=>{j.value=!1,h.value=null},Y=async()=>{if(h.value){A.value=h.value.id;try{(await axios.delete(route("project-items.checklists.destroy",{projectItem:_.projectItem.id,checklist:h.value.id}))).data.success&&(f.value=f.value.filter(d=>d.id!==h.value.id),S("checklist-updated"))}catch(v){console.error("Error deleting checklist:",v),alert("Gagal menghapus checklist")}finally{A.value=null,j.value=!1,h.value=null}}},O=v=>new Date(v).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return(v,d)=>(m(),u("div",Se,[e("div",Me,[e("div",De,[d[7]||(d[7]=e("div",{class:"w-8 h-8 md:w-10 md:h-10 bg-gradient-to-r from-pink-400 to-rose-500 rounded-lg md:rounded-xl flex items-center justify-center shadow-md"},[e("span",{class:"text-base md:text-lg text-white"},"ðŸ“‹")],-1)),e("div",null,[d[6]||(d[6]=e("h3",{class:"font-bold text-gray-800 text-base md:text-lg"},"Checklist Detail",-1)),e("p",Be,[d[5]||(d[5]=c(" Kelola langkah-langkah untuk ",-1)),e("span",Ue,n(a.itemName),1),e("span",Ae,"("+n(D.value)+"%)",1)])])]),e("div",Ee,[e("div",qe,[e("div",Oe,n(Q.value)+" / "+n(L.value)+" selesai ",1),e("div",ze,[e("div",{class:"h-1.5 md:h-2 rounded-full transition-all duration-500 bg-gradient-to-r from-pink-400 to-rose-500",style:de({width:D.value+"%"})},null,4)])])])]),e("div",Fe,[e("div",Le,[g(je,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=w=>s.value=w),onKeypress:le(B,["enter"]),placeholder:"Tambahkan langkah baru...",class:"flex-1 min-w-0 px-3 md:px-4 py-2 md:py-2.5 rounded-lg md:rounded-xl border border-pink-200 focus:ring-2 focus:ring-pink-400 focus:border-transparent bg-white transition-all text-sm",disabled:M.value},null,8,["modelValue","disabled"]),g(T,{onClick:B,loading:M.value,size:"sm",class:"flex-shrink-0 whitespace-nowrap"},{icon:b(()=>[...d[8]||(d[8]=[e("span",{class:"text-xs"},"âž•",-1)])]),default:b(()=>[d[9]||(d[9]=e("span",{class:"hidden xs:inline"},"Tambah",-1))]),_:1},8,["loading"])])]),e("div",Ke,[f.value.length===0?(m(),u("div",Je,[d[10]||(d[10]=e("div",{class:"text-4xl md:text-6xl mb-2"},"ðŸ“",-1)),d[11]||(d[11]=e("h4",{class:"text-base md:text-lg font-semibold text-gray-700 mb-2"},"Belum ada checklist",-1)),e("p",Ne," Tambahkan langkah-langkah romantis untuk mencapai tujuan "+n(a.itemName.toLowerCase())+" ini ðŸ’– ",1)])):k("",!0),(m(!0),u(G,null,H(W.value,w=>(m(),u("div",{key:w.id,class:P(["group bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border-2 transition-all duration-300 hover:shadow-lg",[w.is_completed?"border-green-200 bg-gradient-to-r from-green-50 to-emerald-50":"border-pink-100 hover:border-pink-200"]])},[E.value===w.id?(m(),u("div",Ge,[z(e("input",{ref_for:!0,ref_key:"editInput",ref:F,"onUpdate:modelValue":d[1]||(d[1]=r=>C.value=r),onKeypress:[le(r=>K(w),["enter"]),le(J,["escape"])],onBlur:r=>K(w),class:"flex-1 px-3 py-2 rounded-lg border border-blue-300 focus:ring-2 focus:ring-blue-400 focus:border-transparent text-sm"},null,40,He),[[Z,C.value]]),e("div",Re,[g(T,{onClick:r=>K(w),variant:"success",size:"sm",class:"!px-2 !py-1 text-xs",title:"Simpan"},{icon:b(()=>[...d[12]||(d[12]=[c("âœ“",-1)])]),default:b(()=>[d[13]||(d[13]=e("span",{class:"hidden xs:inline"},"Simpan",-1))]),_:1},8,["onClick"]),g(T,{onClick:J,variant:"secondary",size:"sm",class:"!px-2 !py-1 text-xs",title:"Batal"},{icon:b(()=>[...d[14]||(d[14]=[c("âœ•",-1)])]),default:b(()=>[d[15]||(d[15]=e("span",{class:"hidden xs:inline"},"Batal",-1))]),_:1})])])):(m(),u("div",Qe,[e("div",We,[g(Te,{modelValue:w.is_completed,"onUpdate:modelValue":[r=>w.is_completed=r,r=>q(w)],label:w.task_description,description:w.is_completed?"Selesai dikerjakan ðŸ’«":"Belum selesai",class:"w-full"},null,8,["modelValue","onUpdate:modelValue","label","description"])]),e("div",Xe,[g(T,{onClick:r=>N(w),variant:"secondary",size:"sm",class:"!px-2 !py-1 text-xs",title:"Edit checklist"},{icon:b(()=>[...d[16]||(d[16]=[c("âœï¸",-1)])]),default:b(()=>[d[17]||(d[17]=e("span",{class:"hidden xs:inline"},"Edit",-1))]),_:1},8,["onClick"]),g(T,{onClick:r=>ee(w),disabled:A.value===w.id,variant:"danger",size:"sm",class:"!px-2 !py-1 text-xs",title:"Hapus checklist"},{icon:b(()=>[...d[18]||(d[18]=[c("ðŸ—‘ï¸",-1)])]),default:b(()=>[d[19]||(d[19]=e("span",{class:"hidden xs:inline"},"Hapus",-1))]),_:1},8,["onClick","disabled"])])])),w.is_completed&&w.completed_at?(m(),u("div",Ye,[e("span",null,"âœ… Selesai: "+n(O(w.completed_at)),1)])):k("",!0)],2))),128))]),j.value?(m(),u("div",Ze,[e("div",{class:"bg-white rounded-2xl md:rounded-3xl p-4 md:p-6 text-center max-w-sm mx-4 shadow-lg",onClick:d[2]||(d[2]=be(()=>{},["stop"]))},[d[24]||(d[24]=e("div",{class:"text-3xl md:text-4xl mb-3 md:mb-4"},"âš ï¸",-1)),d[25]||(d[25]=e("h3",{class:"text-lg md:text-xl font-bold text-gray-800 mb-2"},"Hapus Checklist?",-1)),d[26]||(d[26]=e("p",{class:"text-gray-600 text-sm md:text-base mb-4 md:mb-6"},"Apakah Anda yakin ingin menghapus checklist ini? Tindakan ini tidak dapat dibatalkan.",-1)),e("div",et,[g(T,{onClick:X,variant:"secondary",size:"sm",class:"!px-3 md:!px-4 text-xs md:text-sm"},{icon:b(()=>[...d[20]||(d[20]=[c("âœ•",-1)])]),default:b(()=>[d[21]||(d[21]=c(" Batal ",-1))]),_:1}),g(T,{onClick:Y,loading:A.value===h.value?.id,variant:"danger",size:"sm",class:"!px-3 md:!px-4 text-xs md:text-sm"},{icon:b(()=>[...d[22]||(d[22]=[c("ðŸ—‘ï¸",-1)])]),default:b(()=>[d[23]||(d[23]=c(" Hapus ",-1))]),_:1},8,["loading"])])])])):k("",!0),$.value?(m(),u("div",{key:1,class:"fixed inset-0 flex items-center justify-center z-50 bg-black/50 backdrop-blur-sm",onClick:d[4]||(d[4]=w=>$.value=!1)},[e("div",tt,[d[29]||(d[29]=e("div",{class:"text-4xl md:text-6xl mb-3 md:mb-4"},"ðŸŽ‰",-1)),d[30]||(d[30]=e("h3",{class:"text-xl md:text-2xl font-bold text-gray-800 mb-2"},"Selamat! ðŸŽŠ",-1)),d[31]||(d[31]=e("p",{class:"text-gray-600 text-sm md:text-base mb-4"},"Semua checklist sudah selesai ðŸ’–",-1)),g(T,{onClick:d[3]||(d[3]=w=>$.value=!1),variant:"primary",size:"sm",class:"!px-4 md:!px-6 text-xs md:text-sm"},{icon:b(()=>[...d[27]||(d[27]=[c("âœ¨",-1)])]),default:b(()=>[d[28]||(d[28]=c(" Lanjutkan ",-1))]),_:1})])])):k("",!0)]))}},st=se(at,[["__scopeId","data-v-c2996bca"]]),lt={class:"payment-manager bg-gradient-to-br from-white via-blue-50 to-indigo-50 rounded-xl md:rounded-2xl shadow-sm p-3 md:p-4 border border-blue-100"},nt={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-3 md:mb-4 gap-2"},ot={class:"flex items-center gap-2 md:gap-3"},dt={class:"text-xs md:text-sm text-gray-600"},it={class:"font-semibold text-blue-600"},rt={class:"flex items-center gap-2 md:gap-4"},mt={class:"text-right"},ut={key:0,class:"space-y-1"},ct={key:0,class:"text-xs text-green-600 font-medium"},pt={key:1,class:"text-xs text-red-600 font-medium"},xt={key:2,class:"text-xs text-gray-500"},gt={key:1},bt={class:"text-xs md:text-sm font-semibold text-gray-700 mb-1"},yt={class:"w-24 md:w-32 bg-gray-200 rounded-full h-1.5 md:h-2"},vt={class:"text-xs text-gray-500 mt-1"},ft={key:0,class:"mb-3 md:mb-4"},kt={key:1,class:"mb-3 md:mb-4"},ht={class:"bg-white/70 backdrop-blur-sm border border-green-100 rounded-xl md:rounded-2xl p-3 md:p-4"},_t={class:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-3 md:mb-4"},wt={class:"flex justify-end mt-3 md:mt-4"},jt={key:2,class:"mb-4 md:mb-6"},$t={class:"bg-white/70 backdrop-blur-sm border border-orange-100 rounded-xl md:rounded-2xl p-3 md:p-4"},It={class:"text-xs md:text-sm text-gray-600 mb-3 md:mb-4"},Vt={class:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-3 md:mb-4"},Pt={class:"flex justify-end mt-3 md:mt-4"},Ct={key:3,class:"mb-3 md:mb-4"},Tt={class:"bg-white/70 backdrop-blur-sm border border-green-100 rounded-xl md:rounded-2xl p-4 md:p-6 text-center"},St={class:"text-xs md:text-sm text-gray-600 mb-3 md:mb-4"},Mt={class:"mt-3 md:mt-4"},Dt={key:0,class:"text-center py-3 md:py-4 bg-white/60 backdrop-blur-sm rounded-xl md:rounded-2xl border border-blue-100"},Bt={key:1,class:"space-y-2 md:space-y-3"},Ut={class:"flex flex-row items-center justify-between gap-2 md:gap-3 bg-white/70 border border-pink-100 rounded-xl md:rounded-2xl p-2 md:p-3 group transition-all flex-wrap sm:flex-nowrap"},At={class:"flex items-center gap-2 md:gap-3 flex-1 min-w-[150px] md:min-w-[200px]"},Et={class:"text-xs md:text-sm"},qt={class:"flex flex-col justify-center truncate"},Ot={class:"flex items-center flex-wrap gap-1 md:gap-2 mb-1"},zt={class:"font-semibold text-gray-800 text-xs md:text-sm truncate max-w-[120px] sm:max-w-[160px] md:max-w-[200px]"},Ft={class:"text-xs text-gray-600 space-y-0.5 md:space-y-1 truncate"},Lt={key:0,class:"truncate"},Kt={key:1,class:"text-blue-600 truncate text-xs"},Jt={class:"text-xs text-gray-500"},Nt={class:"flex items-center gap-2 md:gap-3 flex-shrink-0"},Gt={class:"text-right"},Ht={class:"text-xs text-gray-500 hidden md:block"},Rt={class:"opacity-0 group-hover:opacity-100 transition-opacity"},Qt={class:"space-y-3 md:space-y-4"},Wt={key:0,class:"p-3 md:p-4 bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200 rounded-xl md:rounded-2xl"},Xt={class:"grid grid-cols-1 xs:grid-cols-2 gap-3 md:gap-4 text-xs md:text-sm"},Yt={class:"font-medium text-gray-800 truncate"},Zt={class:"font-medium text-gray-800 truncate"},ea={class:"font-medium text-gray-800 truncate"},ta={class:"font-medium text-gray-800"},aa={key:0,class:"xs:col-span-2"},sa={class:"font-medium text-gray-800"},la={__name:"PaymentManager",props:{projectItem:Object},emits:["payment-updated"],setup(a,{emit:y}){const _=a,S=y,f=I([]),s=I([]),M=I(!1),U=I(!1),A=I(!1),E=I(!1),C=I(!1),$=I(null),j=I({amount:"",account_id:"",payment_method:"transfer",transaction_date:new Date().toISOString().split("T")[0],note:""}),h=I({amount:"",account_id:"",payment_method:"transfer",transaction_date:new Date().toISOString().split("T")[0],note:""}),F=V(()=>({pending:"Belum Dimulai",in_progress:"Dalam Progress",ready:"Siap Belanja",complete:"Selesai"})[_.projectItem.status]||_.projectItem.status),L=V(()=>({pending:"bg-gray-100 text-gray-800",in_progress:"bg-blue-100 text-blue-800",ready:"bg-orange-100 text-orange-800",complete:"bg-green-100 text-green-800"})[_.projectItem.status]||"bg-gray-100 text-gray-800"),Q=V(()=>_.projectItem.status==="complete"?"bg-green-500":_.projectItem.status==="ready"?"bg-orange-500":"bg-blue-500"),D=V(()=>s.value.length?s.value.map(i=>({value:i.id,label:`${i.name} - ${i.formatted_balance}${i.type==="joint"?" ðŸ‘¥":" ðŸ‘¤"}`,metadata:{type:i.type,balance:i.current_balance,balance_status:i.balance_status,balance_status_color:i.balance_status_color,balance_status_text:i.balance_status_text}})):[]),W=V(()=>[{value:"transfer",label:"Transfer Bank"},{value:"cash",label:"Tunai"}]),B=V(()=>{const i={};return!j.value.amount||j.value.amount<=0?i.amount="Jumlah tabungan harus lebih dari 0":j.value.amount>_.projectItem.remaining_amount&&(i.amount=`Jumlah tabungan tidak boleh melebihi ${r(_.projectItem.remaining_amount)}`),j.value.account_id||(i.account_id="Akun tujuan harus dipilih"),j.value.payment_method||(i.payment_method="Metode pembayaran harus dipilih"),j.value.transaction_date||(i.transaction_date="Tanggal transaksi harus diisi"),i}),q=V(()=>{const i={};return!h.value.amount||h.value.amount<=0?i.amount="Jumlah pembelian harus lebih dari 0":h.value.amount>_.projectItem.actual_spent&&(i.amount=`Jumlah pembelian tidak boleh melebihi ${r(_.projectItem.actual_spent)}`),h.value.account_id||(i.account_id="Akun sumber harus dipilih"),h.value.payment_method||(i.payment_method="Metode pembayaran harus dipilih"),h.value.transaction_date||(i.transaction_date="Tanggal pembelian harus diisi"),i}),N=V(()=>Object.keys(B.value).length===0&&j.value.amount>0&&j.value.account_id&&j.value.payment_method&&j.value.transaction_date),K=V(()=>Object.keys(q.value).length===0&&h.value.amount>0&&h.value.account_id&&h.value.payment_method&&h.value.transaction_date),J=async()=>{try{const i=await axios.get(route("project-items.payments.index",{projectItem:_.projectItem.id}));i.data.success&&(f.value=i.data.payments,Object.assign(_.projectItem,i.data.project_item))}catch(i){console.error("Error loading payments:",i)}},ee=async()=>{M.value=!0;try{const i=await axios.get(route("project-items.api.accounts"));s.value=i.data,console.log("Accounts loaded from project API:",s.value)}catch(i){console.error("Error loading accounts from project API:",i);try{const l=await axios.get("/api/accounts");s.value=l.data,console.log("Accounts loaded from fallback API:",s.value)}catch(l){console.error("Fallback also failed:",l),alert("Gagal memuat data akun. Silakan refresh halaman.")}}finally{M.value=!1}},X=async()=>{if(N.value){U.value=!0;try{const i=await axios.post(route("project-items.payments.store",{projectItem:_.projectItem.id}),j.value);i.data.success&&(f.value.unshift(i.data.payment),Object.assign(_.projectItem,i.data.project_item),d(),S("payment-updated"))}catch(i){console.error("Error adding savings:",i),alert(i.response?.data?.error||"Gagal menambah tabungan")}finally{U.value=!1}}},Y=async()=>{if(K.value){A.value=!0;try{const i=await axios.post(route("project-items.payments.purchase",{projectItem:_.projectItem.id}),h.value);i.data.success&&(f.value.unshift(i.data.payment),Object.assign(_.projectItem,i.data.project_item),w(),S("payment-updated"))}catch(i){console.error("Error making purchase:",i),alert(i.response?.data?.error||"Gagal melakukan pembelian")}finally{A.value=!1}}},O=i=>{$.value=i,C.value=!0},v=async()=>{if($.value){E.value=!0;try{(await axios.delete(route("project-items.payments.destroy",{projectItem:_.projectItem.id,payment:$.value.id}))).data.success&&(f.value=f.value.filter(l=>l.id!==$.value.id),await J(),S("payment-updated"))}catch(i){console.error("Error deleting payment:",i),alert("Gagal menghapus transaksi")}finally{E.value=!1,C.value=!1,$.value=null}}},d=()=>{j.value={amount:"",account_id:"",payment_method:"transfer",transaction_date:new Date().toISOString().split("T")[0],note:""}},w=()=>{h.value={amount:"",account_id:"",payment_method:"transfer",transaction_date:new Date().toISOString().split("T")[0],note:""}},r=i=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(Math.abs(i)),t=(i,l="full")=>{const x=new Date(i);return l==="time"?x.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):x.toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},o=i=>({transfer:"Transfer",cash:"Tunai"})[i]||i;return V(()=>_.projectItem.planned_amount-_.projectItem.actual_spent),ce(()=>{J(),ee()}),(i,l)=>(m(),u("div",lt,[e("div",nt,[e("div",ot,[l[14]||(l[14]=e("div",{class:"w-8 h-8 md:w-10 md:h-10 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-lg md:rounded-xl flex items-center justify-center shadow-md"},[e("span",{class:"text-base md:text-lg text-white"},"ðŸ’°")],-1)),e("div",null,[l[13]||(l[13]=e("h3",{class:"font-bold text-gray-800 text-base md:text-lg"},"Tabungan Proyek",-1)),e("p",dt,[l[12]||(l[12]=c(" Progress tabungan untuk ",-1)),e("span",it,n(a.projectItem.item_name),1)])])]),e("div",rt,[e("div",mt,[a.projectItem.status==="complete"?(m(),u("div",ut,[a.projectItem.actual_spent>0?(m(),u("div",ct," ðŸ’° Sisa: "+n(r(a.projectItem.actual_spent)),1)):a.projectItem.actual_spent<0?(m(),u("div",pt," âš ï¸ Kurang: "+n(r(Math.abs(a.projectItem.actual_spent))),1)):(m(),u("div",xt," âœ… Terpakai semua "))])):(m(),u("div",gt,[e("div",bt,n(r(a.projectItem.actual_spent))+" / "+n(r(a.projectItem.planned_amount)),1),e("div",yt,[e("div",{class:P(["h-1.5 md:h-2 rounded-full transition-all duration-500",Q.value]),style:de({width:Math.min(a.projectItem.savings_progress,100)+"%"})},null,6)]),e("div",vt,n(Math.round(a.projectItem.savings_progress))+"% tercapai ",1)]))]),e("div",{class:P([L.value,"px-2 py-1 md:px-3 md:py-1 rounded-full text-xs md:text-sm font-semibold"])},n(F.value),3)])]),M.value?(m(),u("div",ft,[...l[15]||(l[15]=[e("div",{class:"bg-white/70 backdrop-blur-sm border border-blue-100 rounded-xl md:rounded-2xl p-4 md:p-6 text-center"},[e("div",{class:"animate-spin rounded-full h-6 w-6 md:h-8 md:w-8 border-b-2 border-blue-500 mx-auto mb-2 md:mb-4"}),e("p",{class:"text-gray-600 text-xs md:text-sm"},"Memuat data akun...")],-1)])])):k("",!0),!a.projectItem.is_ready_for_purchase&&a.projectItem.status!=="complete"&&!M.value?(m(),u("div",kt,[e("div",ht,[l[18]||(l[18]=e("h4",{class:"font-semibold text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"ðŸ’°"),e("span",{class:"text-sm md:text-base"},"Tambah Tabungan")],-1)),e("div",_t,[g(te,{modelValue:j.value.amount,"onUpdate:modelValue":l[0]||(l[0]=x=>j.value.amount=x),label:"Jumlah Tabungan *",placeholder:`Contoh: ${Math.round(a.projectItem.remaining_amount/1e3)*1e3}`,icon:"ðŸ’°","account-type":"account_number",max:a.projectItem.remaining_amount,error:B.value.amount,required:""},null,8,["modelValue","placeholder","max","error"]),g(R,{modelValue:j.value.account_id,"onUpdate:modelValue":l[1]||(l[1]=x=>j.value.account_id=x),label:"Akun Tujuan *",placeholder:D.value.length>0?"Pilih akun untuk menabung":"Memuat akun...",options:D.value,error:B.value.account_id,icon:"ðŸ¦",disabled:D.value.length===0,required:""},null,8,["modelValue","placeholder","options","error","disabled"]),g(R,{modelValue:j.value.payment_method,"onUpdate:modelValue":l[2]||(l[2]=x=>j.value.payment_method=x),label:"Metode Pembayaran *",options:W.value,error:B.value.payment_method,icon:"ðŸ’³",required:""},null,8,["modelValue","options","error"]),g(ue,{modelValue:j.value.transaction_date,"onUpdate:modelValue":l[3]||(l[3]=x=>j.value.transaction_date=x),label:"Tanggal Transaksi *",icon:"ðŸ“…",error:B.value.transaction_date,required:""},null,8,["modelValue","error"])]),g(oe,{modelValue:j.value.note,"onUpdate:modelValue":l[4]||(l[4]=x=>j.value.note=x),label:"Catatan (Opsional)",placeholder:"Contoh: Tabungan gaji bulanan, Bonus, dll...",icon:"ðŸ“",rows:2,"show-counter":!0,"max-length":255},null,8,["modelValue"]),e("div",wt,[g(T,{onClick:X,loading:U.value,disabled:!N.value||D.value.length===0,class:"!px-4 !py-2 md:!px-6 md:!py-3 text-xs md:text-sm bg-gradient-to-r from-green-400 to-emerald-500 text-white shadow-md hover:shadow-lg"},{icon:b(()=>[...l[16]||(l[16]=[c("ðŸ’°",-1)])]),default:b(()=>[l[17]||(l[17]=e("span",{class:"hidden xs:inline"},"Simpan Tabungan",-1))]),_:1},8,["loading","disabled"])])])])):k("",!0),a.projectItem.is_ready_for_purchase&&a.projectItem.status!=="complete"&&!M.value?(m(),u("div",jt,[e("div",$t,[l[23]||(l[23]=e("h4",{class:"font-semibold text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"ðŸ›ï¸"),e("span",{class:"text-sm md:text-base"},"Pembelian Item")],-1)),e("p",It,[l[19]||(l[19]=c(" Tabungan sudah mencukupi! Silakan lakukan pembelian untuk item ",-1)),e("strong",null,n(a.projectItem.item_name),1),l[20]||(l[20]=c(". ",-1))]),e("div",Vt,[g(te,{modelValue:h.value.amount,"onUpdate:modelValue":l[5]||(l[5]=x=>h.value.amount=x),label:"Jumlah Pembelian *",placeholder:`Maksimal: ${r(a.projectItem.actual_spent)}`,icon:"ðŸ’°","account-type":"account_number",max:a.projectItem.actual_spent,error:q.value.amount,required:""},null,8,["modelValue","placeholder","max","error"]),g(R,{modelValue:h.value.account_id,"onUpdate:modelValue":l[6]||(l[6]=x=>h.value.account_id=x),label:"Akun Sumber *",placeholder:D.value.length>0?"Pilih akun untuk pembelian":"Memuat akun...",options:D.value,error:q.value.account_id,icon:"ðŸ¦",disabled:D.value.length===0,required:""},null,8,["modelValue","placeholder","options","error","disabled"]),g(R,{modelValue:h.value.payment_method,"onUpdate:modelValue":l[7]||(l[7]=x=>h.value.payment_method=x),label:"Metode Pembayaran *",options:W.value,error:q.value.payment_method,icon:"ðŸ’³",required:""},null,8,["modelValue","options","error"]),g(ue,{modelValue:h.value.transaction_date,"onUpdate:modelValue":l[8]||(l[8]=x=>h.value.transaction_date=x),label:"Tanggal Pembelian *",icon:"ðŸ“…",error:q.value.transaction_date,required:""},null,8,["modelValue","error"])]),g(oe,{modelValue:h.value.note,"onUpdate:modelValue":l[9]||(l[9]=x=>h.value.note=x),label:"Catatan Pembelian",placeholder:"Contoh: Beli material, Bayar vendor, dll...",icon:"ðŸ“",rows:2,"show-counter":!0,"max-length":255},null,8,["modelValue"]),e("div",Pt,[g(T,{onClick:Y,loading:A.value,disabled:!K.value||D.value.length===0,class:"!px-4 !py-2 md:!px-6 md:!py-3 text-xs md:text-sm bg-gradient-to-r from-orange-400 to-red-500 text-white shadow-md hover:shadow-lg"},{icon:b(()=>[...l[21]||(l[21]=[c("ðŸ›ï¸",-1)])]),default:b(()=>[l[22]||(l[22]=e("span",{class:"hidden xs:inline"},"Proses Pembelian",-1))]),_:1},8,["loading","disabled"])])])])):k("",!0),a.projectItem.status==="complete"?(m(),u("div",Ct,[e("div",Tt,[l[27]||(l[27]=e("div",{class:"text-3xl md:text-4xl mb-2 md:mb-4"},"ðŸŽ‰",-1)),l[28]||(l[28]=e("h4",{class:"text-lg md:text-xl font-bold text-gray-800 mb-1 md:mb-2"},"Pembelian Selesai!",-1)),e("p",St,[l[24]||(l[24]=c(" Item ",-1)),e("strong",null,n(a.projectItem.item_name),1),l[25]||(l[25]=c(" telah berhasil dibeli dengan total ",-1)),e("strong",null,n(r(a.projectItem.actual_spent)),1),l[26]||(l[26]=c(". ",-1))]),l[29]||(l[29]=e("div",{class:"bg-green-50 text-green-700 px-3 py-2 md:px-4 md:py-3 rounded-lg text-xs md:text-sm"},[e("p",null,[c("Status: "),e("strong",null,"Completed")])],-1))])])):k("",!0),e("div",Mt,[l[33]||(l[33]=e("h4",{class:"font-semibold text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"ðŸ“Š"),e("span",{class:"text-sm md:text-base"},"Riwayat Transaksi")],-1)),f.value.length===0?(m(),u("div",Dt,[...l[30]||(l[30]=[e("div",{class:"text-4xl md:text-6xl mb-1 md:mb-2"},"ðŸ’¸",-1),e("h4",{class:"text-base md:text-lg font-semibold text-gray-700 mb-1 md:mb-2"},"Belum ada transaksi",-1),e("p",{class:"text-xs md:text-sm text-gray-600 max-w-md mx-auto px-2"}," Mulai menabung untuk proyek ini ðŸ’– ",-1)])])):(m(),u("div",Bt,[(m(!0),u(G,null,H(f.value,x=>(m(),u("div",{key:x.id,class:P(["group bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border-2 transition-all duration-300 hover:shadow-lg",x.amount>0?"border-green-100":"border-red-100"])},[e("div",Ut,[e("div",At,[e("div",{class:P(["w-6 h-6 md:w-8 md:h-8 rounded-md md:rounded-lg flex items-center justify-center text-white flex-shrink-0",x.amount>0?"bg-green-500":"bg-red-500"])},[e("span",Et,n(x.amount>0?"ðŸ’°":"ðŸ›ï¸"),1)],2),e("div",qt,[e("div",Ot,[e("h4",zt,n(x.amount>0?"Tabungan":"Pembelian"),1),e("span",{class:P(["px-1.5 py-0.5 md:px-2 md:py-1 text-xs rounded-full font-medium whitespace-nowrap",x.amount>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(o(x.payment_method)),3)]),e("div",Ft,[x.transaction?(m(),u("p",Lt,[l[31]||(l[31]=e("span",{class:"font-medium"},"Akun:",-1)),c(" "+n(x.transaction.account.name),1)])):k("",!0),x.note?(m(),u("p",Kt,"ðŸ“ "+n(x.note),1)):k("",!0),e("p",Jt,n(t(x.created_at)),1)])])]),e("div",Nt,[e("div",Gt,[e("div",{class:P(["text-base md:text-lg font-bold",x.amount>0?"text-green-600":"text-red-600"])},n(x.amount>0?"+":"")+n(r(x.amount)),3),e("div",Ht,n(t(x.created_at,"time")),1)]),e("div",Rt,[g(T,{onClick:xe=>O(x),class:"w-6 h-6 md:w-8 md:h-8 rounded-full flex items-center justify-center text-gray-500 hover:text-red-600 hover:bg-red-50 transition-colors text-xs",title:"Hapus transaksi"},{default:b(()=>[...l[32]||(l[32]=[c(" ðŸ—‘ï¸ ",-1)])]),_:1},8,["onClick"])])])])],2))),128))]))]),g(pe,{show:C.value,"onUpdate:show":l[10]||(l[10]=x=>C.value=x),title:"Hapus Transaksi",description:($.value,"Apakah Anda yakin ingin menghapus transaksi ini?"),icon:"ðŸ—‘ï¸","confirm-text":"Hapus","cancel-text":"Batal","confirm-variant":"danger","confirm-loading":E.value,onConfirm:v,onClose:l[11]||(l[11]=x=>C.value=!1)},{default:b(()=>[e("div",Qt,[l[41]||(l[41]=e("div",{class:"p-3 md:p-4 bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-xl md:rounded-2xl"},[e("p",{class:"text-xs md:text-sm text-red-600 flex items-start gap-2"},[e("span",{class:"text-base md:text-lg mt-0.5"},"âš ï¸"),e("span",null,[e("strong",{class:"block"},"Tindakan ini tidak dapat dibatalkan!"),c(" Transaksi yang dihapus akan mempengaruhi saldo akun dan progress tabungan. ")])])],-1)),$.value?(m(),u("div",Wt,[l[40]||(l[40]=e("h4",{class:"font-semibold text-gray-800 text-sm md:text-base mb-2"},"Detail Transaksi:",-1)),e("div",Xt,[e("div",null,[l[34]||(l[34]=e("span",{class:"text-gray-600"},"Jenis:",-1)),e("p",Yt,n($.value.amount>0?"Tabungan":"Pembelian"),1)]),e("div",null,[l[35]||(l[35]=e("span",{class:"text-gray-600"},"Jumlah:",-1)),e("p",{class:P(["font-bold",$.value.amount>0?"text-green-600":"text-red-600"])},n(r($.value.amount)),3)]),e("div",null,[l[36]||(l[36]=e("span",{class:"text-gray-600"},"Akun:",-1)),e("p",Zt,n($.value.transaction?.account?.name),1)]),e("div",null,[l[37]||(l[37]=e("span",{class:"text-gray-600"},"Metode:",-1)),e("p",ea,n(o($.value.payment_method)),1)]),e("div",null,[l[38]||(l[38]=e("span",{class:"text-gray-600"},"Tanggal:",-1)),e("p",ta,n(t($.value.created_at)),1)]),$.value.note?(m(),u("div",aa,[l[39]||(l[39]=e("span",{class:"text-gray-600"},"Catatan:",-1)),e("p",sa,n($.value.note),1)])):k("",!0)])])):k("",!0)])]),_:1},8,["show","description","confirm-loading"])]))}},na=se(la,[["__scopeId","data-v-2ee6388d"]]),oa={class:"py-2 min-h-screen relative overflow-hidden"},da={class:"w-full px-3 sm:px-4 lg:px-6 relative z-10"},ia={class:"flex items-center justify-between"},ra={class:"flex items-center gap-2 md:gap-3"},ma={class:"text-lg md:text-xl"},ua={class:"font-medium text-sm md:text-base"},ca={class:"flex mb-4","aria-label":"Breadcrumb"},pa={class:"flex items-center space-x-2 text-sm"},xa={class:"flex items-center"},ga={class:"flex items-center"},ba={class:"text-gray-700 font-medium text-xs md:text-sm truncate max-w-[120px] md:max-w-none"},ya={class:"relative overflow-hidden bg-gradient-to-br from-pink-50 via-white to-blue-50 rounded-xl md:rounded-2xl border border-pink-100/40 shadow-md p-4 mb-4"},va={class:"relative flex flex-col md:flex-row md:items-center justify-between gap-3 md:gap-0 mb-3 md:mb-2"},fa={class:"flex items-center gap-3 md:gap-4"},ka={class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-pink-400 to-rose-500 rounded-lg md:rounded-xl flex items-center justify-center shadow-md"},ha={class:"text-xl md:text-2xl text-white"},_a={class:"text-lg md:text-2xl font-bold text-gray-800 line-clamp-2"},wa={class:"flex flex-wrap items-center gap-2 mt-2"},ja={key:0,class:"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},$a={class:"flex items-center gap-2"},Ia={key:1,class:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs"},Va={class:"relative grid grid-cols-2 md:grid-cols-4 gap-2 mt-3 md:mt-4"},Pa={class:"text-center p-3 md:p-4 bg-white/80 backdrop-blur-sm rounded-lg md:rounded-xl border border-blue-200/50 shadow-sm"},Ca={class:"text-base md:text-xl font-bold text-blue-700"},Ta={class:"text-center p-3 md:p-4 bg-white/80 backdrop-blur-sm rounded-lg md:rounded-xl border border-orange-200/50 shadow-sm"},Sa={class:"text-base md:text-xl font-bold text-orange-700"},Ma={class:"text-center p-3 md:p-4 bg-white/80 backdrop-blur-sm rounded-lg md:rounded-xl border border-green-200/50 shadow-sm"},Da={class:"text-center p-3 md:p-4 bg-white/80 backdrop-blur-sm rounded-lg md:rounded-xl border border-purple-200/50 shadow-sm"},Ba={class:"text-base md:text-xl font-bold text-purple-700"},Ua={class:"grid grid-cols-1 lg:grid-cols-3 gap-3 md:gap-4"},Aa={class:"lg:col-span-2 space-y-3 md:space-y-4"},Ea={key:0,class:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl md:rounded-2xl p-4 md:p-6 border border-indigo-100"},qa={class:"grid grid-cols-2 gap-3 md:gap-4"},Oa={class:"space-y-1"},za={class:"font-bold text-gray-800 text-base md:text-lg"},Fa={class:"space-y-1"},La={class:"font-bold text-green-600 text-base md:text-lg"},Ka={class:"col-span-2 space-y-1"},Ja={class:"bg-white/70 rounded-lg md:rounded-xl p-2 md:p-3 border border-gray-200"},Na={class:"flex items-center justify-between"},Ga={class:"text-xs md:text-sm text-gray-600"},Ha={class:"font-bold text-blue-600 text-base md:text-lg"},Ra={class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},Qa={class:"space-y-3 md:space-y-4"},Wa={class:"flex justify-between text-xs md:text-sm"},Xa={class:"font-medium text-gray-700"},Ya={class:"text-gray-600"},Za={class:"w-full bg-gray-200 rounded-full h-3 md:h-4"},es={class:"flex justify-between text-xs text-gray-500"},ts={key:0,class:"text-red-500 font-semibold"},as={key:1,class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},ss={class:"text-gray-700 leading-relaxed text-sm md:text-base"},ls={key:2,class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},ns={class:"space-y-3 md:space-y-4"},os={key:0,class:"flex items-center justify-between p-3 md:p-4 bg-gradient-to-r from-pink-50 to-rose-50 rounded-lg md:rounded-xl border border-pink-200"},ds={class:"font-medium text-gray-800 flex items-center gap-2 text-sm"},is={key:0,class:"text-base md:text-lg"},rs={key:1,class:"text-base md:text-lg"},ms={key:1,class:"space-y-3 md:space-y-4"},us={key:0,class:"flex items-center justify-between p-3 md:p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg md:rounded-xl border border-blue-200"},cs={class:"text-base md:text-lg"},ps={key:1,class:"p-3 md:p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg md:rounded-xl border border-green-200"},xs={class:"flex items-center justify-between mb-2 md:mb-3"},gs={class:"text-xs text-gray-500 break-all bg-white/50 p-2 rounded-lg"},bs={key:2,class:"space-y-3 md:space-y-4"},ys={key:0,class:"p-3 md:p-4 bg-gradient-to-r from-purple-50 to-violet-50 rounded-lg md:rounded-xl border border-purple-200"},vs={class:"flex items-center justify-between mb-2 md:mb-3"},fs={class:"text-xs text-gray-500 break-all bg-white/50 p-2 rounded-lg"},ks={key:1,class:"p-3 md:p-4 bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg md:rounded-xl border border-orange-200"},hs={class:"text-xs md:text-sm text-gray-700 bg-white/50 p-2 md:p-3 rounded-lg"},_s={key:3,class:"grid grid-cols-2 gap-2"},ws={key:0,class:"p-2 md:p-3 bg-white rounded-lg md:rounded-xl border border-gray-200 text-center hover:shadow-md transition-shadow"},js={class:"text-xs text-gray-500 block capitalize mb-2"},$s={class:"font-medium text-gray-800 text-xs md:text-sm"},Is={key:3,class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-4 md:p-6 border border-white/20 shadow-lg"},Vs={class:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4"},Ps={class:"text-xs text-gray-500 block capitalize mb-2"},Cs={class:"font-medium text-gray-800 text-xs md:text-sm"},Ts={class:"space-y-3 md:space-y-4"},Ss={class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},Ms={class:"space-y-3 md:space-y-4"},Ds={class:"flex items-center justify-between p-2 md:p-3 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg md:rounded-xl"},Bs={class:"font-medium text-gray-800 text-xs md:text-sm"},Us={class:"flex items-center justify-between p-2 md:p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg md:rounded-xl"},As={class:"font-medium text-gray-800 text-xs md:text-sm"},Es={class:"flex items-center justify-between p-2 md:p-3 bg-gradient-to-r from-purple-50 to-violet-50 rounded-lg md:rounded-xl"},qs={class:"font-medium text-gray-800 text-xs md:text-sm capitalize"},Os={class:"flex items-center justify-between p-2 md:p-3 bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg md:rounded-xl"},zs={class:"font-bold text-orange-700 text-xs md:text-sm"},Fs={class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},Ls={class:"space-y-2 md:space-y-3"},Ks={key:1,class:"text-center p-2 md:p-3 bg-gray-50 rounded-lg md:rounded-xl"},Js={class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},Ns={class:"space-y-3 md:space-y-4"},Gs={class:"flex items-center gap-2 md:gap-3"},Hs={class:"text-xs text-gray-500"},Rs={class:"flex items-center gap-2 md:gap-3"},Qs={class:"text-xs text-gray-500"},Ws={class:"space-y-4 md:space-y-6 max-h-[50vh] md:max-h-[60vh] overflow-y-auto pr-2"},Xs={class:"space-y-3 md:space-y-4"},Ys={class:"flex items-center justify-between"},Zs={key:0,class:"flex gap-2"},el={key:0},tl={class:"text-xs text-gray-500 mt-1"},al={key:1},sl={key:0,class:"text-xs text-gray-500 mt-1"},ll={key:0,class:"space-y-3 md:space-y-4"},nl={class:"grid grid-cols-2 gap-3 md:gap-4"},ol={class:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl md:rounded-2xl p-3 md:p-4 border border-green-200"},dl={class:"flex items-center justify-between"},il={class:"text-xs text-gray-500"},rl={class:"text-right"},ml={class:"text-lg md:text-xl font-bold text-green-600"},ul={key:1,class:"grid grid-cols-1 gap-3 md:gap-4"},cl={key:2,class:"space-y-3 md:space-y-4"},pl={class:"bg-gradient-to-r from-pink-50 to-rose-50 rounded-xl md:rounded-2xl p-3 md:p-4 border border-pink-100"},xl={class:"space-y-3 md:space-y-4"},gl={key:0,class:"space-y-2 md:space-y-3"},bl={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},yl={class:"text-base md:text-lg"},vl={class:"flex gap-2 md:gap-4"},fl=["value","onUpdate:modelValue"],kl={class:"text-xs md:text-sm font-medium text-gray-700"},hl={key:1,class:"space-y-2"},_l={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},wl={class:"text-base md:text-lg"},jl=["onUpdate:modelValue"],$l={value:""},Il=["value"],Vl={key:2,class:"space-y-2"},Pl={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},Cl={class:"text-base md:text-lg"},Tl=["type","onUpdate:modelValue","placeholder"],Sl={key:3,class:"space-y-2"},Ml={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},Dl={class:"text-base md:text-lg"},Bl=["onUpdate:modelValue","placeholder"],Ul={key:4,class:"space-y-2"},Al={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},El={class:"text-base md:text-lg"},ql=["onUpdate:modelValue","placeholder"],Ol={key:5,class:"space-y-2"},zl={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},Fl={class:"text-base md:text-lg"},Ll=["onUpdate:modelValue"],Kl={key:3,class:"p-2 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl md:rounded-2xl"},Jl={__name:"Show",props:{item:Object,project:Object,canEdit:Boolean},setup(a){const y=a,_=I(!1);I(1),I(0);const S=I(!1),f=I([]);ce(()=>{E()});const s=ve({item_type:y.item.item_type,item_category:y.item.item_category||"",name:y.item.name,description:y.item.description||"",planned_amount:y.item.planned_amount,actual_spent:y.item.actual_spent,status:y.item.status,details:y.item.details||{}}),M=V(()=>f.value&&f.value.length>0),U=V(()=>S.value||!M.value),A=V(()=>!f.value||!Array.isArray(f.value)?[]:f.value.map(r=>({value:r,label:r}))),E=async()=>{try{console.log("Loading categories for project:",y.project.id);const r=await fe.get(route("projects.items.api.categories",{project:y.project.id}));console.log("Categories API response:",r.data),r.data&&r.data.success?f.value=r.data.categories||[]:Array.isArray(r.data)?f.value=r.data:r.data&&Array.isArray(r.data.categories)?f.value=r.data.categories:(console.warn("Unexpected categories response format:",r.data),f.value=[]),console.log("Final available categories:",f.value)}catch(r){console.error("Error loading categories:",r),f.value=[]}},C=V(()=>["goods","material"].includes(s.item_type)),$=V(()=>{if(!C.value)return s.planned_amount;const r=parseFloat(s.details.quantity)||0,t=parseFloat(s.details.unit_price)||0;return r*t}),j=V(()=>y.canEdit&&y.item.status!=="complete"),h=V(()=>["goods","material"].includes(y.item.item_type)),F=V(()=>y.item.details?["ukuran","warna","material","merk"].some(t=>y.item.details[t]):!1),L=V(()=>{if(!y.item.details)return!1;const r={...y.item.details};return delete r.quantity,delete r.unit_price,Object.keys(r).length>0}),Q=[{value:"goods",label:"ðŸ›ï¸ Barang"},{value:"service",label:"ðŸ‘¨â€ðŸ’¼ Jasa"},{value:"document",label:"ðŸ“„ Dokumen"},{value:"task",label:"âœ… Tugas"},{value:"material",label:"ðŸ—ï¸ Material"}],D=[{value:"needed",label:"â³ Diperlukan"},{value:"in_progress",label:"ðŸš§ Dalam Proses"},{value:"ready",label:"ðŸ“¦ Siap"},{value:"complete",label:"âœ… Selesai"},{value:"cancelled",label:"âŒ Dibatalkan"}],W=[{value:"online",label:"ðŸ›’ Beli Online"},{value:"store",label:"ðŸª Beli di Toko"}],B={shopee:{name:"Shopee",icon:"ðŸŸ ",color:"text-orange-500"},tokopedia:{name:"Tokopedia",icon:"ðŸŸ¢",color:"text-green-500"},lazada:{name:"Lazada",icon:"ðŸ”µ",color:"text-blue-500"},blibli:{name:"Blibli",icon:"ðŸ”´",color:"text-red-500"},bukalapak:{name:"Bukalapak",icon:"ðŸŸ¡",color:"text-yellow-500"},other:{name:"Lainnya",icon:"ðŸ›’",color:"text-gray-500"}},q=V(()=>({goods:[{key:"purchase_type",label:"Cara Pembelian",type:"radio",icon:"ðŸ›’",options:W},...s.details?.purchase_type==="online"?[{key:"ecommerce_platform",label:"Platform Online",type:"select",icon:"ðŸ“±",options:Object.entries(B).map(([t,o])=>({value:t,label:`${o.icon} ${o.name}`}))},{key:"online_link",label:"Link Produk",type:"url",icon:"ðŸ”—",placeholder:"https://..."}]:[],...s.details?.purchase_type==="store"?[{key:"store_maps",label:"Link Google Maps",type:"url",icon:"ðŸ—ºï¸",placeholder:"https://maps.google.com/..."},{key:"store_address",label:"Alamat Toko",type:"textarea",icon:"ðŸª",placeholder:"Alamat lengkap toko..."}]:[],{key:"ukuran",label:"Ukuran",type:"text",icon:"ðŸ“"},{key:"warna",label:"Warna",type:"text",icon:"ðŸŽ¨"},{key:"material",label:"Material",type:"text",icon:"âš™ï¸"},{key:"merk",label:"Merk",type:"text",icon:"ðŸ·ï¸"}],service:[{key:"vendor_kontak",label:"Kontak Vendor",type:"text",icon:"ðŸ“ž"},{key:"tanggal_kontrak",label:"Tanggal Kontrak",type:"date",icon:"ðŸ“…"},{key:"sisa_pembayaran",label:"Sisa Pembayaran",type:"number",icon:"ðŸ’°"},{key:"menu_pilihan",label:"Menu Pilihan",type:"text",icon:"ðŸ½ï¸"},{key:"lokasi",label:"Lokasi",type:"text",icon:"ðŸ“"}],document:[{key:"tanggal_kadaluarsa",label:"Tanggal Kadaluarsa",type:"date",icon:"ðŸ“…"},{key:"lokasi_fisik",label:"Lokasi Fisik",type:"text",icon:"ðŸ“"},{key:"status_legalitas",label:"Status Legalitas",type:"text",icon:"âš–ï¸"},{key:"nomor_dokumen",label:"Nomor Dokumen",type:"text",icon:"ðŸ”¢"}],task:[{key:"pihak_pengurus",label:"Pihak Pengurus",type:"text",icon:"ðŸ‘¤"},{key:"biaya_administrasi",label:"Biaya Administrasi",type:"number",icon:"ðŸ’°"},{key:"progress_persentase",label:"Progress (%)",type:"number",icon:"ðŸ“Š"},{key:"deadline",label:"Deadline",type:"date",icon:"â°"}],material:[{key:"kuantitas_target",label:"Kuantitas Target",type:"number",icon:"ðŸ“¦"},{key:"satuan",label:"Satuan",type:"text",icon:"âš–ï¸"},{key:"supplier_preferensi",label:"Supplier Preferensi",type:"text",icon:"ðŸª"},{key:"spesifikasi",label:"Spesifikasi",type:"text",icon:"ðŸ“‹"}]})[s.item_type]||[]);ne([()=>s.details.quantity,()=>s.details.unit_price],()=>{C.value&&(s.planned_amount=$.value)}),ne(()=>s.item_type,(r,t)=>{if(r!==t){if(r!=="goods"){const{purchase_type:o,ecommerce_platform:i,online_link:l,store_maps:x,store_address:xe,...ge}=s.details;s.details=ge}["goods","material"].includes(r)&&(s.details.quantity||(s.details.quantity=1),s.details.unit_price||(s.details.unit_price=0),s.planned_amount=$.value)}});const N=()=>{s.item_type=y.item.item_type,s.item_category=y.item.item_category||"",s.name=y.item.name,s.description=y.item.description||"",s.planned_amount=y.item.planned_amount,s.actual_spent=y.item.actual_spent,s.status=y.item.status,s.details=y.item.details||{},S.value=!0,["goods","material"].includes(y.item.item_type)&&(s.details.quantity=y.item.details?.quantity||1,s.details.unit_price=y.item.details?.unit_price||0),_.value=!0},K=()=>{s.put(route("projects.items.update",{project:y.project.id,item:y.item.id}),{preserveScroll:!0,onSuccess:()=>{_.value=!1,s.reset(),re.reload()},onError:r=>{console.error("Update error:",r)}})},J=()=>{_.value=!1,s.clearErrors(),s.reset()},ee=()=>{re.reload({only:["item"]})},X=r=>{r&&window.open(r,"_blank")},Y=()=>{C.value&&(s.planned_amount=$.value)},O=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),v=r=>({goods:"Barang",service:"Jasa",document:"Dokumen",task:"Tugas",material:"Material"})[r]||r,d=r=>({needed:"Diperlukan",in_progress:"Dalam Proses",ready:"Siap",complete:"Selesai",cancelled:"Dibatalkan"})[r]||r,w=r=>({planning:"Perencanaan",on_going:"Berjalan",completed:"Selesai",cancelled:"Dibatalkan"})[r]||r;return(r,t)=>(m(),ae(we,{title:`${a.item.name} - ${a.project.name}`},{default:b(()=>[e("div",oa,[e("div",da,[r.$page.props.flash.message?(m(),u("div",{key:0,class:P(["mb-4 md:mb-6 p-3 md:p-4 rounded-xl md:rounded-2xl border backdrop-blur-sm transition-all duration-300",{"bg-green-50 border-green-200 text-green-800":r.$page.props.flash.message.type==="success","bg-red-50 border-red-200 text-red-800":r.$page.props.flash.message.type==="error"}])},[e("div",ia,[e("div",ra,[e("span",ma,n(r.$page.props.flash.message.type==="success"?"âœ…":"âš ï¸"),1),e("span",ua,n(r.$page.props.flash.message.message),1)]),e("button",{onClick:t[0]||(t[0]=o=>r.$page.props.flash.message=null),class:"text-gray-500 hover:text-gray-700 transition-colors text-lg"}," âœ• ")])],2)):k("",!0),e("nav",ca,[e("ol",pa,[e("li",null,[g(p(ie),{href:r.route("projects.index"),class:"text-gray-600 hover:text-pink-600 transition-colors flex items-center gap-1"},{default:b(()=>[...t[18]||(t[18]=[e("span",{class:"text-base md:text-lg"},"ðŸ’¼",-1),e("span",{class:"hidden xs:inline"},"Projects",-1)])]),_:1},8,["href"])]),e("li",xa,[t[19]||(t[19]=e("span",{class:"text-gray-400 mx-2"},"â€º",-1)),g(p(ie),{href:r.route("projects.items.index",{project:a.project.id}),class:"text-gray-600 hover:text-pink-600 transition-colors text-xs md:text-sm"},{default:b(()=>[c(n(a.project.name),1)]),_:1},8,["href"])]),e("li",ga,[t[20]||(t[20]=e("span",{class:"text-gray-400 mx-2"},"â€º",-1)),e("span",ba,n(a.item.name),1)])])]),e("div",ya,[t[31]||(t[31]=e("div",{class:"absolute -top-10 -right-10 w-40 h-40 bg-pink-100/40 rounded-full blur-3xl"},null,-1)),t[32]||(t[32]=e("div",{class:"absolute -bottom-12 -left-12 w-48 h-48 bg-blue-100/40 rounded-full blur-3xl"},null,-1)),e("div",va,[e("div",fa,[e("div",ka,[e("span",ha,n(a.item.item_type_icon),1)]),e("div",null,[e("h1",_a,n(a.item.name),1),e("div",wa,[e("span",{class:P(["px-2 py-1 rounded-full text-xs font-medium",a.item.item_type_badge])},n(v(a.item.item_type)),3),e("span",{class:P(["px-2 py-1 rounded-full text-xs font-medium",a.item.status_badge])},n(a.item.status_icon)+" "+n(d(a.item.status)),3),a.item.item_category&&a.item.item_category!=="Uncategorized"?(m(),u("span",ja," ðŸ“‚ "+n(a.item.item_category),1)):k("",!0)])])]),e("div",$a,[j.value?(m(),ae(T,{key:0,onClick:N,variant:"primary",size:"sm",class:"!px-3 !py-2 text-xs"},{icon:b(()=>[...t[21]||(t[21]=[c("âœï¸",-1)])]),default:b(()=>[t[22]||(t[22]=e("span",{class:"hidden xs:inline"},"Edit Item",-1))]),_:1})):(m(),u("div",Ia," ðŸ”’ Read Only "))])]),e("div",Va,[e("div",Pa,[t[23]||(t[23]=e("div",{class:"text-xl md:text-2xl mb-2"},"ðŸ’°",-1)),e("div",Ca,n(a.item.formatted_planned_amount),1),t[24]||(t[24]=e("div",{class:"text-xs md:text-sm text-gray-600"},"Rencana Biaya",-1))]),e("div",Ta,[t[25]||(t[25]=e("div",{class:"text-xl md:text-2xl mb-2"},"ðŸ’¸",-1)),e("div",Sa,n(a.item.formatted_actual_spent),1),t[26]||(t[26]=e("div",{class:"text-xs md:text-sm text-gray-600"},"Realisasi",-1))]),e("div",Ma,[t[27]||(t[27]=e("div",{class:"text-xl md:text-2xl mb-2"},"ðŸ“Š",-1)),e("div",{class:P(["text-base md:text-xl font-bold",a.item.remaining_amount>=0?"text-green-700":"text-red-700"])},n(a.item.formatted_remaining_amount),3),t[28]||(t[28]=e("div",{class:"text-xs md:text-sm text-gray-600"},"Sisa Anggaran",-1))]),e("div",Da,[t[29]||(t[29]=e("div",{class:"text-xl md:text-2xl mb-2"},"ðŸ“ˆ",-1)),e("div",Ba,n(a.item.progress_percentage.toFixed(1))+"%",1),t[30]||(t[30]=e("div",{class:"text-xs md:text-sm text-gray-600"},"Progress",-1))])])]),e("div",Ua,[e("div",Aa,[h.value&&a.item.details?(m(),u("div",Ea,[t[38]||(t[38]=e("h3",{class:"font-semibold text-gray-800 text-base md:text-lg mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"ðŸ“Š"),c(" Informasi Kuantitas & Harga ")],-1)),e("div",qa,[e("div",Oa,[t[34]||(t[34]=e("span",{class:"text-xs md:text-sm text-gray-600 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"ðŸ“¦"),c(" Quantity ")],-1)),e("p",za,[c(n(a.item.details.quantity||0)+" ",1),t[33]||(t[33]=e("span",{class:"text-xs font-normal text-gray-500"},"unit",-1))])]),e("div",Fa,[t[35]||(t[35]=e("span",{class:"text-xs md:text-sm text-gray-600 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"ðŸ’°"),c(" Harga Satuan ")],-1)),e("p",La,n(O(a.item.details.unit_price||0)),1)]),e("div",Ka,[t[37]||(t[37]=e("span",{class:"text-xs md:text-sm text-gray-600 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"ðŸ§®"),c(" Perhitungan Total ")],-1)),e("div",Ja,[e("div",Na,[e("span",Ga,n(a.item.details.quantity||0)+" Ã— "+n(O(a.item.details.unit_price||0)),1),e("span",Ha," = "+n(O(a.item.planned_amount)),1)]),t[36]||(t[36]=e("p",{class:"text-xs text-gray-500 mt-1"}," Total rencana biaya dihitung otomatis dari quantity Ã— harga satuan ",-1))])])])])):k("",!0),e("div",Ra,[t[39]||(t[39]=e("h2",{class:"font-semibold text-lg md:text-xl text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"ðŸ“ˆ"),c(" Progress Keuangan ")],-1)),e("div",Qa,[e("div",Wa,[e("span",Xa,n(a.item.progress_percentage.toFixed(1))+"%",1),e("span",Ya,n(a.item.formatted_actual_spent)+" / "+n(a.item.formatted_planned_amount),1)]),e("div",Za,[e("div",{class:"h-3 md:h-4 rounded-full transition-all duration-1000 bg-gradient-to-r from-pink-400 to-rose-500 shadow-lg",style:de({width:Math.min(a.item.progress_percentage,100)+"%"})},null,4)]),e("div",es,[e("span",null,"Sisa: "+n(a.item.formatted_remaining_amount),1),a.item.remaining_amount<0?(m(),u("span",ts," âš ï¸ Melebihi budget ")):k("",!0)])])]),a.item.description?(m(),u("div",as,[t[40]||(t[40]=e("h2",{class:"font-semibold text-lg md:text-xl text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"ðŸ“„"),c(" Deskripsi ")],-1)),e("p",ss,n(a.item.description),1)])):k("",!0),a.item.item_type==="goods"&&a.item.details&&L.value?(m(),u("div",ls,[t[50]||(t[50]=e("h2",{class:"font-semibold text-lg md:text-xl text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"ðŸ›ï¸"),c(" Informasi Pembelian ")],-1)),e("div",ns,[a.item.details.purchase_type?(m(),u("div",os,[t[41]||(t[41]=e("span",{class:"text-xs md:text-sm text-gray-600 font-medium"},"Cara Pembelian:",-1)),e("span",ds,[a.item.details.purchase_type==="online"?(m(),u("span",is,"ðŸ›’")):(m(),u("span",rs,"ðŸª")),c(" "+n(a.item.details.purchase_type==="online"?"Beli Online":"Beli di Toko"),1)])])):k("",!0),a.item.details.purchase_type==="online"?(m(),u("div",ms,[a.item.details.ecommerce_platform?(m(),u("div",us,[t[42]||(t[42]=e("span",{class:"text-xs md:text-sm text-gray-600 font-medium"},"Platform:",-1)),e("span",{class:P(["font-medium flex items-center gap-2 text-sm",B[a.item.details.ecommerce_platform]?.color])},[e("span",cs,n(B[a.item.details.ecommerce_platform]?.icon),1),c(" "+n(B[a.item.details.ecommerce_platform]?.name),1)],2)])):k("",!0),a.item.details.online_link?(m(),u("div",ps,[e("div",xs,[t[45]||(t[45]=e("span",{class:"text-xs md:text-sm text-gray-600 font-medium"},"Link Produk:",-1)),g(T,{onClick:t[1]||(t[1]=o=>X(a.item.details.online_link)),variant:"primary",size:"sm",class:"!px-3 !py-2 text-xs"},{icon:b(()=>[...t[43]||(t[43]=[c("ðŸ”—",-1)])]),default:b(()=>[t[44]||(t[44]=e("span",{class:"hidden xs:inline"},"Buka Link",-1))]),_:1})]),e("p",gs,n(a.item.details.online_link),1)])):k("",!0)])):k("",!0),a.item.details.purchase_type==="store"?(m(),u("div",bs,[a.item.details.store_maps?(m(),u("div",ys,[e("div",vs,[t[48]||(t[48]=e("span",{class:"text-xs md:text-sm text-gray-600 font-medium"},"Lokasi Toko:",-1)),g(T,{onClick:t[2]||(t[2]=o=>X(a.item.details.store_maps)),variant:"primary",size:"sm",class:"!px-3 !py-2 text-xs"},{icon:b(()=>[...t[46]||(t[46]=[c("ðŸ—ºï¸",-1)])]),default:b(()=>[t[47]||(t[47]=e("span",{class:"hidden xs:inline"},"Buka Maps",-1))]),_:1})]),e("p",fs,n(a.item.details.store_maps),1)])):k("",!0),a.item.details.store_address?(m(),u("div",ks,[t[49]||(t[49]=e("span",{class:"text-xs md:text-sm text-gray-600 font-medium block mb-2 md:mb-3"},"Alamat Toko:",-1)),e("p",hs,n(a.item.details.store_address),1)])):k("",!0)])):k("",!0),F.value?(m(),u("div",_s,[(m(),u(G,null,H(["ukuran","warna","material","merk"],o=>e("div",{key:o},[a.item.details[o]?(m(),u("div",ws,[e("span",js,n(o),1),e("span",$s,n(a.item.details[o]),1)])):k("",!0)])),64))])):k("",!0)])])):k("",!0),a.item.details&&Object.keys(a.item.details).length>0&&a.item.item_type!=="goods"?(m(),u("div",Is,[t[51]||(t[51]=e("h2",{class:"font-semibold text-lg md:text-xl text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"ðŸ”§"),c(" Detail Tambahan ")],-1)),e("div",Vs,[(m(!0),u(G,null,H(a.item.details,(o,i)=>(m(),u("div",{key:i,class:"p-3 md:p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg md:rounded-xl border border-gray-200 hover:shadow-md transition-shadow"},[e("span",Ps,n(i.replace("_"," ")),1),e("span",Cs,n(o),1)]))),128))])])):k("",!0),h.value?k("",!0):(m(),ae(st,{key:4,"project-item":a.item,checklists:a.item.checklists||[],"item-name":a.item.name,onChecklistUpdated:ee},null,8,["project-item","checklists","item-name"])),g(na,{"project-item":a.item,payments:a.item.payments||[],"item-name":a.item.name,onPaymentUpdated:r.loadPayments},null,8,["project-item","payments","item-name","onPaymentUpdated"])]),e("div",Ts,[e("div",Ss,[t[56]||(t[56]=e("h3",{class:"font-semibold text-base md:text-lg text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"ðŸ’¼"),c(" Project Info ")],-1)),e("div",Ms,[e("div",Ds,[t[52]||(t[52]=e("span",{class:"text-xs md:text-sm text-gray-600"},"Project",-1)),e("p",Bs,n(a.project.name),1)]),e("div",Us,[t[53]||(t[53]=e("span",{class:"text-xs md:text-sm text-gray-600"},"Kategori",-1)),e("p",As,n(a.project.category.name),1)]),e("div",Es,[t[54]||(t[54]=e("span",{class:"text-xs md:text-sm text-gray-600"},"Status Project",-1)),e("p",qs,n(w(a.project.status)),1)]),e("div",Os,[t[55]||(t[55]=e("span",{class:"text-xs md:text-sm text-gray-600"},"Target Budget",-1)),e("p",zs,n(O(a.project.target_total_amount)),1)])])]),e("div",Fs,[t[60]||(t[60]=e("h3",{class:"font-semibold text-base md:text-lg text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"âš¡"),c(" Quick Actions ")],-1)),e("div",Ls,[j.value?(m(),ae(T,{key:0,onClick:N,variant:"primary",class:"w-full justify-center !px-3 !py-2 text-xs md:text-sm"},{icon:b(()=>[...t[57]||(t[57]=[c("âœï¸",-1)])]),default:b(()=>[t[58]||(t[58]=e("span",{class:"hidden xs:inline"},"Edit Item",-1))]),_:1})):(m(),u("div",Ks,[...t[59]||(t[59]=[e("p",{class:"text-xs text-gray-600"},"Item sudah selesai, tidak dapat diedit",-1)])]))])]),e("div",Js,[t[65]||(t[65]=e("h3",{class:"font-semibold text-base md:text-lg text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"ðŸ•’"),c(" Timeline ")],-1)),e("div",Ns,[e("div",Gs,[t[62]||(t[62]=e("div",{class:"w-6 h-6 md:w-8 md:h-8 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0"},[e("span",{class:"text-white text-xs"},"âœ“")],-1)),e("div",null,[t[61]||(t[61]=e("p",{class:"text-xs md:text-sm font-medium text-gray-800"},"Dibuat",-1)),e("p",Hs,n(a.item.created_at),1)])]),e("div",Rs,[t[64]||(t[64]=e("div",{class:"w-6 h-6 md:w-8 md:h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0"},[e("span",{class:"text-white text-xs"},"â†»")],-1)),e("div",null,[t[63]||(t[63]=e("p",{class:"text-xs md:text-sm font-medium text-gray-800"},"Terakhir Diupdate",-1)),e("p",Qs,n(a.item.updated_at),1)])])])])])]),g(pe,{show:_.value,"onUpdate:show":t[17]||(t[17]=o=>_.value=o),title:"Edit Item Project",description:"Perbarui informasi item project "+a.item.name,icon:"âœï¸","confirm-text":"Perbarui","confirm-loading":p(s).processing,onConfirm:K,onClose:J,size:"xl"},{default:b(()=>[e("div",Ws,[g(R,{modelValue:p(s).item_type,"onUpdate:modelValue":t[3]||(t[3]=o=>p(s).item_type=o),label:"Jenis Item",placeholder:"Pilih jenis item",options:Q,error:p(s).errors.item_type,icon:"ðŸ·ï¸",required:"",disabled:p(s).processing},null,8,["modelValue","error","disabled"]),e("div",Xs,[e("div",Ys,[t[70]||(t[70]=e("label",{class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"ðŸ“‚"),c(" Kategori Item ")],-1)),M.value?(m(),u("div",Zs,[g(T,{onClick:t[4]||(t[4]=o=>S.value=!1),variant:"secondary",size:"xs",class:P(U.value?"":"ring-2 ring-pink-400")},{icon:b(()=>[...t[66]||(t[66]=[c("ðŸ“‹",-1)])]),default:b(()=>[t[67]||(t[67]=e("span",{class:"hidden xs:inline"},"Pilih",-1))]),_:1},8,["class"]),g(T,{onClick:t[5]||(t[5]=o=>S.value=!0),variant:"secondary",size:"xs",class:P(U.value?"ring-2 ring-pink-400":"")},{icon:b(()=>[...t[68]||(t[68]=[c("âž•",-1)])]),default:b(()=>[t[69]||(t[69]=e("span",{class:"hidden xs:inline"},"Baru",-1))]),_:1},8,["class"])])):k("",!0)]),!U.value&&M.value?(m(),u("div",el,[g(R,{modelValue:p(s).item_category,"onUpdate:modelValue":t[6]||(t[6]=o=>p(s).item_category=o),label:"Pilih Kategori",placeholder:"Pilih kategori yang sudah ada",options:A.value,error:p(s).errors.item_category,icon:"ðŸ“‚",disabled:p(s).processing},null,8,["modelValue","options","error","disabled"]),e("p",tl," Pilih dari "+n(f.value.length)+" kategori yang sudah ada ",1)])):(m(),u("div",al,[g(me,{modelValue:p(s).item_category,"onUpdate:modelValue":t[7]||(t[7]=o=>p(s).item_category=o),label:"Kategori Item",placeholder:"Contoh: Perlengkapan Kamar, Dekorasi, Katering, dll.",error:p(s).errors.item_category,icon:"ðŸ“‚",disabled:p(s).processing},null,8,["modelValue","error","disabled"]),M.value?(m(),u("p",sl,[t[71]||(t[71]=c(" Atau ",-1)),e("button",{type:"button",onClick:t[8]||(t[8]=o=>S.value=!1),class:"text-pink-500 hover:text-pink-700 underline"}," pilih dari kategori yang sudah ada ")])):k("",!0)]))]),g(me,{modelValue:p(s).name,"onUpdate:modelValue":t[9]||(t[9]=o=>p(s).name=o),label:"Nama Item",placeholder:"Contoh: Cincin Nikah, Vendor Katering, IMB, Semen Portland",error:p(s).errors.name,icon:"ðŸ“",required:"",disabled:p(s).processing},null,8,["modelValue","error","disabled"]),g(oe,{modelValue:p(s).description,"onUpdate:modelValue":t[10]||(t[10]=o=>p(s).description=o),label:"Deskripsi",placeholder:"Deskripsi detail tentang item ini...",error:p(s).errors.description,icon:"ðŸ“„",disabled:p(s).processing},null,8,["modelValue","error","disabled"]),C.value?(m(),u("div",ll,[e("div",nl,[g(te,{label:"Qty Barang",modelValue:p(s).details.quantity,"onUpdate:modelValue":t[11]||(t[11]=o=>p(s).details.quantity=o),placeholder:"Jumlah barang",icon:"ðŸ’°",required:"",min:"1",disabled:p(s).processing,onInput:Y},null,8,["modelValue","disabled"]),g(te,{label:"Rencana Biaya",modelValue:p(s).details.unit_price,"onUpdate:modelValue":t[12]||(t[12]=o=>p(s).details.unit_price=o),placeholder:"Harga per unit",icon:"ðŸ’°",required:"","account-type":"account_number",min:"0",disabled:p(s).processing,onInput:Y},null,8,["modelValue","disabled"])]),e("div",ol,[e("div",dl,[e("div",null,[t[72]||(t[72]=e("p",{class:"text-sm font-medium text-gray-700"},"Total Rencana Biaya:",-1)),e("p",il,n(p(s).details.quantity||0)+" Ã— "+n(O(p(s).details.unit_price||0)),1)]),e("div",rl,[e("p",ml,n(O($.value)),1),t[73]||(t[73]=e("p",{class:"text-xs text-gray-500"},"Terhitung otomatis",-1))])])]),z(e("input",{type:"hidden","onUpdate:modelValue":t[13]||(t[13]=o=>p(s).planned_amount=o)},null,512),[[Z,p(s).planned_amount]])])):(m(),u("div",ul,[g(te,{modelValue:p(s).planned_amount,"onUpdate:modelValue":t[14]||(t[14]=o=>p(s).planned_amount=o),label:"Rencana Biaya",placeholder:"Biaya yang direncanakan",error:p(s).errors.planned_amount,icon:"ðŸ’°","account-type":"account_number",disabled:p(s).processing},null,8,["modelValue","error","disabled"])])),z(e("input",{type:"hidden","onUpdate:modelValue":t[15]||(t[15]=o=>p(s).actual_spent=o)},null,512),[[Z,p(s).actual_spent]]),g(R,{modelValue:p(s).status,"onUpdate:modelValue":t[16]||(t[16]=o=>p(s).status=o),label:"Status Item",placeholder:"Pilih status item",options:D,error:p(s).errors.status,icon:"ðŸŸ¢",required:"",disabled:p(s).processing},null,8,["modelValue","error","disabled"]),q.value.length>0?(m(),u("div",cl,[e("div",pl,[t[74]||(t[74]=e("h4",{class:"font-semibold text-gray-800 flex items-center gap-2 text-base md:text-lg mb-3 md:mb-4"},[e("span",null,"âœ¨"),c(" Detail Tambahan ")],-1)),e("div",xl,[(m(!0),u(G,null,H(q.value,o=>(m(),u("div",{key:o.key,class:"space-y-2"},[o.type==="radio"?(m(),u("div",gl,[e("label",bl,[e("span",yl,n(o.icon),1),c(" "+n(o.label),1)]),e("div",vl,[(m(!0),u(G,null,H(o.options,i=>(m(),u("label",{key:i.value,class:P(["flex items-center space-x-2 cursor-pointer p-2 md:p-3 rounded-lg md:rounded-xl border-2 transition-all",p(s).details[o.key]===i.value?"border-pink-400 bg-pink-50 shadow-sm":"border-gray-200 hover:border-pink-200"])},[z(e("input",{type:"radio",value:i.value,"onUpdate:modelValue":l=>p(s).details[o.key]=l,class:"text-pink-500 focus:ring-pink-400"},null,8,fl),[[ke,p(s).details[o.key]]]),e("span",kl,n(i.label),1)],2))),128))])])):o.type==="select"?(m(),u("div",hl,[e("label",_l,[e("span",wl,n(o.icon),1),c(" "+n(o.label),1)]),z(e("select",{"onUpdate:modelValue":i=>p(s).details[o.key]=i,class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all bg-white text-sm"},[e("option",$l,"Pilih "+n(o.label.toLowerCase()),1),(m(!0),u(G,null,H(o.options,i=>(m(),u("option",{key:i.value,value:i.value},n(i.label),9,Il))),128))],8,jl),[[he,p(s).details[o.key]]])])):o.type==="text"||o.type==="url"?(m(),u("div",Vl,[e("label",Pl,[e("span",Cl,n(o.icon),1),c(" "+n(o.label),1)]),z(e("input",{type:o.type,"onUpdate:modelValue":i=>p(s).details[o.key]=i,placeholder:o.placeholder||`Masukkan ${o.label.toLowerCase()}`,class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all text-sm"},null,8,Tl),[[_e,p(s).details[o.key]]])])):o.type==="textarea"?(m(),u("div",Sl,[e("label",Ml,[e("span",Dl,n(o.icon),1),c(" "+n(o.label),1)]),z(e("textarea",{"onUpdate:modelValue":i=>p(s).details[o.key]=i,placeholder:o.placeholder||`Masukkan ${o.label.toLowerCase()}`,rows:"3",class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all resize-none text-sm"},null,8,Bl),[[Z,p(s).details[o.key]]])])):o.type==="number"?(m(),u("div",Ul,[e("label",Al,[e("span",El,n(o.icon),1),c(" "+n(o.label),1)]),z(e("input",{type:"number","onUpdate:modelValue":i=>p(s).details[o.key]=i,placeholder:o.placeholder||`Masukkan ${o.label.toLowerCase()}`,class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all text-sm"},null,8,ql),[[Z,p(s).details[o.key]]])])):o.type==="date"?(m(),u("div",Ol,[e("label",zl,[e("span",Fl,n(o.icon),1),c(" "+n(o.label),1)]),z(e("input",{type:"date","onUpdate:modelValue":i=>p(s).details[o.key]=i,class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all text-sm"},null,8,Ll),[[Z,p(s).details[o.key]]])])):k("",!0)]))),128))])])])):k("",!0),t[76]||(t[76]=e("div",{class:"p-3 md:p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl md:rounded-2xl border border-blue-200"},[e("p",{class:"text-xs md:text-sm text-gray-700 flex items-start gap-2"},[e("span",{class:"text-base md:text-lg mt-0.5"},"ðŸ’¡"),e("span",null,[e("strong",{class:"block"},"Jenis Item:"),c(" â€¢ "),e("strong",null,"Barang ðŸ›ï¸"),c(": Physical goods yang dibeli (hitung otomatis dari quantity Ã— harga satuan)"),e("br"),c(" â€¢ "),e("strong",null,"Jasa ðŸ‘¨â€ðŸ’¼"),c(": Services dari vendor/penyedia jasa"),e("br"),c(" â€¢ "),e("strong",null,"Dokumen ðŸ“„"),c(": Legal documents dan surat-surat"),e("br"),c(" â€¢ "),e("strong",null,"Tugas âœ…"),c(": Tasks dan pekerjaan yang perlu diselesaikan"),e("br"),c(" â€¢ "),e("strong",null,"Material ðŸ—ï¸"),c(": Bahan bangunan dan material konstruksi (hitung otomatis dari quantity Ã— harga satuan) ")])])],-1)),p(s).hasErrors?(m(),u("div",Kl,[...t[75]||(t[75]=[e("p",{class:"text-xs md:text-sm text-red-600 flex items-center gap-2"},[e("span",null,"âš ï¸"),c(" Terdapat kesalahan dalam pengisian form. Silakan periksa kembali input Anda. ")],-1)])])):k("",!0)])]),_:1},8,["show","description","confirm-loading"])])])]),_:1},8,["title"]))}},an=se(Jl,[["__scopeId","data-v-40728576"]]);export{an as default};
