import{c as u,g as m,d as e,s as P,b as f,z as o,r as I,p as V,M as oe,f as c,K as de,l as g,N as se,w as _,F as G,y as R,m as F,O as Z,q as be,H as ye,o as ce,t as ve,a as fe,k as le,x as p,E as re,S as he,P as ke,C as _e,D as ie}from"./vendor-_1bMFsGO.js";import{A as we}from"./AppLayout-SpPJJbV7.js";import{B as T,S as H,a as pe}from"./SelectInput-DF9G5fVS.js";/* empty css                                                                         */import{_ as ae}from"./app-CRGJ1xHn.js";import{_ as je}from"./TextInput-kUoWsk2U.js";import{_ as me}from"./TextInput-Bg7dPcCl.js";import{_ as ne}from"./TextAreaInput-CCFGYrOi.js";import{_ as te}from"./AccountInput-BMNW2b8p.js";import{_ as ue}from"./DateInput-BW6fmnAh.js";/* empty css            */const $e={class:"flex items-start gap-3 select-none"},Ie=["disabled"],Ve={class:"flex flex-col"},Pe={key:0,class:"text-xs text-gray-500 mt-0.5"},Ce={__name:"ToggleInput",props:{modelValue:{type:Boolean,required:!0},label:{type:String,default:""},description:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(a,{emit:b}){const h=a,S=b,v=()=>{h.disabled||S("update:modelValue",!h.modelValue)};return(s,M)=>(m(),u("div",$e,[e("button",{type:"button",class:P(["relative inline-flex items-center justify-center w-12 h-7 rounded-full transition-all duration-300 focus:outline-none",[a.modelValue?"bg-gradient-to-r from-pink-400 to-rose-500 shadow-md":"bg-gray-200",a.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer hover:scale-[1.05]"]]),onClick:v,disabled:a.disabled},[e("span",{class:P(["absolute left-1 top-1 w-5 h-5 bg-white rounded-full shadow-md transform transition-all duration-300",{"translate-x-5":a.modelValue}])},null,2)],10,Ie),e("div",Ve,[e("label",{class:P(["text-sm font-medium",[a.disabled?"text-gray-400":a.modelValue?"text-pink-600":"text-gray-800"]]),onClick:v},o(a.label),3),a.description?(m(),u("p",Pe,o(a.description),1)):f("",!0)])]))}},Te=ae(Ce,[["__scopeId","data-v-b59521a2"]]),Se={class:"checklist-manager bg-gradient-to-br from-white via-pink-50 to-rose-50 rounded-xl md:rounded-2xl shadow-sm p-3 md:p-4 border border-pink-100"},Me={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-3 md:mb-4 gap-2"},De={class:"flex items-center gap-2 md:gap-3"},Be={class:"text-xs md:text-sm text-gray-600"},Ue={class:"font-semibold text-pink-600"},Ae={class:"text-rose-500 font-semibold ml-1"},qe={class:"flex items-center gap-2 md:gap-3"},Ee={class:"text-right"},Oe={class:"text-xs md:text-sm font-semibold text-gray-700"},Fe={class:"w-24 md:w-28 bg-gray-200 rounded-full h-1.5 md:h-2 overflow-hidden"},Le={class:"mb-4"},Ke={class:"flex flex-row flex-wrap items-center gap-3 bg-white/70 backdrop-blur-sm border border-pink-100 rounded-2xl p-4"},ze={class:"space-y-3"},Je={key:0,class:"text-center py-4 bg-white/60 backdrop-blur-sm rounded-2xl border border-pink-100"},Ne={class:"text-gray-600 max-w-md mx-auto"},Ge={class:"flex flex-col sm:flex-row sm:items-center gap-4"},Re={key:0,class:"flex-1 flex items-center gap-3"},He=["onKeypress","onBlur"],Qe={class:"flex gap-2"},We={key:1,class:"flex flex-row flex-wrap items-center justify-between gap-2 bg-white/70 border border-pink-100 rounded-2xl p-3 group transition-all"},Xe={class:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity"},Ye={key:0,class:"flex items-center gap-2 mt-2 pl-1 text-xs text-green-600"},Ze={key:0,class:"fixed inset-0 flex items-center justify-center z-50 bg-black/50 backdrop-blur-sm"},et={class:"flex gap-3 justify-center"},tt={class:"bg-white rounded-3xl p-8 text-center max-w-sm mx-4 animate-bounce shadow-lg"},at={__name:"ChecklistManager",props:{projectItem:Object,checklists:Array,itemName:String},emits:["checklist-updated"],setup(a,{emit:b}){const h=a,S=b,v=I(h.checklists||[]),s=I(""),M=I(!1),U=I(null),A=I(null),q=I(null),C=I(""),$=I(!1),j=I(!1),k=I(null),L=I(null),K=V(()=>v.value.length),Q=V(()=>v.value.filter(y=>y.is_completed).length),D=V(()=>K.value>0?Math.round(Q.value/K.value*100):0),W=V(()=>[...v.value].sort((y,i)=>y.is_completed&&!i.is_completed?1:!y.is_completed&&i.is_completed?-1:new Date(y.created_at)-new Date(i.created_at)));oe(D,(y,i)=>{y===100&&i<100&&K.value>0&&($.value=!0,setTimeout(()=>$.value=!1,3e3))});const B=async()=>{if(s.value.trim()){M.value=!0;try{const y=await axios.post(route("project-items.checklists.store",{projectItem:h.projectItem.id}),{task_description:s.value.trim()});y.data.success&&(v.value.push(y.data.checklist),s.value="",S("checklist-updated"))}catch(y){console.error("Error adding checklist:",y),alert("Gagal menambahkan checklist")}finally{M.value=!1}}},E=async y=>{U.value=y.id;try{const i=await axios.patch(route("project-items.checklists.toggle",{projectItem:h.projectItem.id,checklist:y.id}));if(i.data.success){const w=v.value.findIndex(r=>r.id===y.id);w!==-1&&(v.value[w]=i.data.checklist),S("checklist-updated")}}catch(i){console.error("Error toggling checklist:",i),y.is_completed=!y.is_completed}finally{U.value=null}},N=y=>{q.value=y.id,C.value=y.task_description,ye(()=>{L.value&&(L.value.focus(),L.value.select())})},z=async y=>{if(!C.value.trim()){J();return}try{const i=await axios.put(route("project-items.checklists.update",{projectItem:h.projectItem.id,checklist:y.id}),{task_description:C.value.trim()});if(i.data.success){const w=v.value.findIndex(r=>r.id===y.id);w!==-1&&(v.value[w]=i.data.checklist),S("checklist-updated")}}catch(i){console.error("Error updating checklist:",i),alert("Gagal memperbarui checklist")}finally{q.value=null,C.value=""}},J=()=>{q.value=null,C.value=""},ee=y=>{k.value=y,j.value=!0},X=()=>{j.value=!1,k.value=null},Y=async()=>{if(k.value){A.value=k.value.id;try{(await axios.delete(route("project-items.checklists.destroy",{projectItem:h.projectItem.id,checklist:k.value.id}))).data.success&&(v.value=v.value.filter(i=>i.id!==k.value.id),S("checklist-updated"))}catch(y){console.error("Error deleting checklist:",y),alert("Gagal menghapus checklist")}finally{A.value=null,j.value=!1,k.value=null}}},O=y=>new Date(y).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return(y,i)=>(m(),u("div",Se,[e("div",Me,[e("div",De,[i[7]||(i[7]=e("div",{class:"w-8 h-8 md:w-10 md:h-10 bg-gradient-to-r from-pink-400 to-rose-500 rounded-lg md:rounded-xl flex items-center justify-center shadow-md"},[e("span",{class:"text-base md:text-lg text-white"},"📋")],-1)),e("div",null,[i[6]||(i[6]=e("h3",{class:"font-bold text-gray-800 text-base md:text-lg"},"Checklist Detail",-1)),e("p",Be,[i[5]||(i[5]=c(" Kelola langkah-langkah untuk ",-1)),e("span",Ue,o(a.itemName),1),e("span",Ae,"("+o(D.value)+"%)",1)])])]),e("div",qe,[e("div",Ee,[e("div",Oe,o(Q.value)+" / "+o(K.value)+" selesai ",1),e("div",Fe,[e("div",{class:"h-1.5 md:h-2 rounded-full transition-all duration-500 bg-gradient-to-r from-pink-400 to-rose-500",style:de({width:D.value+"%"})},null,4)])])])]),e("div",Le,[e("div",Ke,[g(je,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=w=>s.value=w),onKeypress:se(B,["enter"]),placeholder:"Tambahkan langkah baru... (contoh: Konfirmasi menu, Kirim DP, dll)",class:"flex-1 min-w-[180px] px-4 py-3 rounded-xl border border-pink-200 focus:ring-2 focus:ring-pink-400 focus:border-transparent bg-white transition-all",disabled:M.value},null,8,["modelValue","disabled"]),g(T,{onClick:B,loading:M.value,class:"!px-6 !py-3 bg-gradient-to-r from-pink-400 to-rose-500 text-white shadow-md hover:shadow-lg whitespace-nowrap"},{icon:_(()=>[...i[8]||(i[8]=[c("➕",-1)])]),default:_(()=>[i[9]||(i[9]=c(" Tambah ",-1))]),_:1},8,["loading"])])]),e("div",ze,[v.value.length===0?(m(),u("div",Je,[i[10]||(i[10]=e("div",{class:"text-6xl mb-2"},"📝",-1)),i[11]||(i[11]=e("h4",{class:"text-lg font-semibold text-gray-700 mb-2"},"Belum ada checklist",-1)),e("p",Ne," Tambahkan langkah-langkah romantis untuk mencapai tujuan "+o(a.itemName.toLowerCase())+" ini 💖 ",1)])):f("",!0),(m(!0),u(G,null,R(W.value,w=>(m(),u("div",{key:w.id,class:P(["group bg-white/80 backdrop-blur-sm rounded-2xl p-4 border-2 transition-all duration-300 hover:shadow-lg",[w.is_completed?"border-green-200 bg-gradient-to-r from-green-50 to-emerald-50":"border-pink-100 hover:border-pink-200"]])},[e("div",Ge,[q.value===w.id?(m(),u("div",Re,[F(e("input",{ref_for:!0,ref_key:"editInput",ref:L,"onUpdate:modelValue":i[1]||(i[1]=r=>C.value=r),onKeypress:[se(r=>z(w),["enter"]),se(J,["escape"])],onBlur:r=>z(w),class:"flex-1 px-3 py-2 rounded-lg border border-blue-300 focus:ring-2 focus:ring-blue-400 focus:border-transparent"},null,40,He),[[Z,C.value]]),e("div",Qe,[g(T,{onClick:r=>z(w),class:"w-8 h-8 rounded-full flex items-center justify-center bg-green-500 text-white hover:bg-green-600",title:"Simpan"},{default:_(()=>[...i[12]||(i[12]=[c(" ✓ ",-1)])]),_:1},8,["onClick"]),g(T,{onClick:J,class:"w-8 h-8 rounded-full flex items-center justify-center bg-gray-500 text-white hover:bg-gray-600",title:"Batal"},{default:_(()=>[...i[13]||(i[13]=[c(" ✕ ",-1)])]),_:1})])])):(m(),u("div",We,[g(Te,{modelValue:w.is_completed,"onUpdate:modelValue":[r=>w.is_completed=r,r=>E(w)],label:w.task_description,description:w.is_completed?"Selesai dikerjakan 💫":"Belum selesai",class:"flex-1 min-w-[200px]"},null,8,["modelValue","onUpdate:modelValue","label","description"]),e("div",Xe,[g(T,{onClick:r=>N(w),class:"w-8 h-8 rounded-full flex items-center justify-center text-gray-500 hover:text-blue-600 hover:bg-blue-50 transition-colors",title:"Edit checklist"},{default:_(()=>[...i[14]||(i[14]=[c(" ✏️ ",-1)])]),_:1},8,["onClick"]),g(T,{onClick:r=>ee(w),disabled:A.value===w.id,class:"w-8 h-8 rounded-full flex items-center justify-center text-gray-500 hover:text-red-600 hover:bg-red-50 transition-colors",title:"Hapus checklist"},{default:_(()=>[...i[15]||(i[15]=[c(" 🗑️ ",-1)])]),_:1},8,["onClick","disabled"])])]))]),w.is_completed&&w.completed_at?(m(),u("div",Ye,[e("span",null,"✅ Selesai: "+o(O(w.completed_at)),1)])):f("",!0)],2))),128))]),j.value?(m(),u("div",Ze,[e("div",{class:"bg-white rounded-3xl p-6 text-center max-w-sm mx-4 shadow-lg",onClick:i[2]||(i[2]=be(()=>{},["stop"]))},[i[19]||(i[19]=e("div",{class:"text-4xl mb-4"},"⚠️",-1)),i[20]||(i[20]=e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},"Hapus Checklist?",-1)),i[21]||(i[21]=e("p",{class:"text-gray-600 mb-6"},"Apakah Anda yakin ingin menghapus checklist ini? Tindakan ini tidak dapat dibatalkan.",-1)),e("div",et,[g(T,{onClick:X,class:"!px-6 bg-gray-500 text-white hover:bg-gray-600"},{default:_(()=>[...i[16]||(i[16]=[c(" Batal ",-1)])]),_:1}),g(T,{onClick:Y,loading:A.value===k.value?.id,class:"!px-6 bg-gradient-to-r from-red-400 to-red-500 text-white hover:from-red-500 hover:to-red-600"},{icon:_(()=>[...i[17]||(i[17]=[c("🗑️",-1)])]),default:_(()=>[i[18]||(i[18]=c(" Hapus ",-1))]),_:1},8,["loading"])])])])):f("",!0),$.value?(m(),u("div",{key:1,class:"fixed inset-0 flex items-center justify-center z-50 bg-black/50 backdrop-blur-sm",onClick:i[4]||(i[4]=w=>$.value=!1)},[e("div",tt,[i[24]||(i[24]=e("div",{class:"text-6xl mb-4"},"🎉",-1)),i[25]||(i[25]=e("h3",{class:"text-2xl font-bold text-gray-800 mb-2"},"Selamat! 🎊",-1)),i[26]||(i[26]=e("p",{class:"text-gray-600 mb-4"},"Semua checklist sudah selesai 💖",-1)),g(T,{onClick:i[3]||(i[3]=w=>$.value=!1),class:"!px-6 bg-gradient-to-r from-pink-400 to-rose-500 text-white shadow"},{icon:_(()=>[...i[22]||(i[22]=[c("✨",-1)])]),default:_(()=>[i[23]||(i[23]=c(" Lanjutkan ",-1))]),_:1})])])):f("",!0)]))}},st=ae(at,[["__scopeId","data-v-8878a8e9"]]),lt={class:"payment-manager bg-gradient-to-br from-white via-blue-50 to-indigo-50 rounded-xl md:rounded-2xl shadow-sm p-3 md:p-4 border border-blue-100"},ot={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-3 md:mb-4 gap-2"},nt={class:"flex items-center gap-2 md:gap-3"},dt={class:"text-xs md:text-sm text-gray-600"},rt={class:"font-semibold text-blue-600"},it={class:"flex items-center gap-2 md:gap-4"},mt={class:"text-right"},ut={key:0,class:"space-y-1"},ct={key:0,class:"text-xs text-green-600 font-medium"},pt={key:1,class:"text-xs text-red-600 font-medium"},xt={key:2,class:"text-xs text-gray-500"},gt={key:1},bt={class:"text-xs md:text-sm font-semibold text-gray-700 mb-1"},yt={class:"w-24 md:w-32 bg-gray-200 rounded-full h-1.5 md:h-2"},vt={class:"text-xs text-gray-500 mt-1"},ft={key:0,class:"mb-3 md:mb-4"},ht={key:1,class:"mb-3 md:mb-4"},kt={class:"bg-white/70 backdrop-blur-sm border border-green-100 rounded-xl md:rounded-2xl p-3 md:p-4"},_t={class:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-3 md:mb-4"},wt={class:"flex justify-end mt-3 md:mt-4"},jt={key:2,class:"mb-4 md:mb-6"},$t={class:"bg-white/70 backdrop-blur-sm border border-orange-100 rounded-xl md:rounded-2xl p-3 md:p-4"},It={class:"text-xs md:text-sm text-gray-600 mb-3 md:mb-4"},Vt={class:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-3 md:mb-4"},Pt={class:"flex justify-end mt-3 md:mt-4"},Ct={key:3,class:"mb-3 md:mb-4"},Tt={class:"bg-white/70 backdrop-blur-sm border border-green-100 rounded-xl md:rounded-2xl p-4 md:p-6 text-center"},St={class:"text-xs md:text-sm text-gray-600 mb-3 md:mb-4"},Mt={class:"mt-3 md:mt-4"},Dt={key:0,class:"text-center py-3 md:py-4 bg-white/60 backdrop-blur-sm rounded-xl md:rounded-2xl border border-blue-100"},Bt={key:1,class:"space-y-2 md:space-y-3"},Ut={class:"flex flex-row items-center justify-between gap-2 md:gap-3 bg-white/70 border border-pink-100 rounded-xl md:rounded-2xl p-2 md:p-3 group transition-all flex-wrap sm:flex-nowrap"},At={class:"flex items-center gap-2 md:gap-3 flex-1 min-w-[150px] md:min-w-[200px]"},qt={class:"text-xs md:text-sm"},Et={class:"flex flex-col justify-center truncate"},Ot={class:"flex items-center flex-wrap gap-1 md:gap-2 mb-1"},Ft={class:"font-semibold text-gray-800 text-xs md:text-sm truncate max-w-[120px] sm:max-w-[160px] md:max-w-[200px]"},Lt={class:"text-xs text-gray-600 space-y-0.5 md:space-y-1 truncate"},Kt={key:0,class:"truncate"},zt={key:1,class:"text-blue-600 truncate text-xs"},Jt={class:"text-xs text-gray-500"},Nt={class:"flex items-center gap-2 md:gap-3 flex-shrink-0"},Gt={class:"text-right"},Rt={class:"text-xs text-gray-500 hidden md:block"},Ht={class:"opacity-0 group-hover:opacity-100 transition-opacity"},Qt={class:"space-y-3 md:space-y-4"},Wt={key:0,class:"p-3 md:p-4 bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200 rounded-xl md:rounded-2xl"},Xt={class:"grid grid-cols-1 xs:grid-cols-2 gap-3 md:gap-4 text-xs md:text-sm"},Yt={class:"font-medium text-gray-800 truncate"},Zt={class:"font-medium text-gray-800 truncate"},ea={class:"font-medium text-gray-800 truncate"},ta={class:"font-medium text-gray-800"},aa={key:0,class:"xs:col-span-2"},sa={class:"font-medium text-gray-800"},la={__name:"PaymentManager",props:{projectItem:Object},emits:["payment-updated"],setup(a,{emit:b}){const h=a,S=b,v=I([]),s=I([]),M=I(!1),U=I(!1),A=I(!1),q=I(!1),C=I(!1),$=I(null),j=I({amount:"",account_id:"",payment_method:"transfer",transaction_date:new Date().toISOString().split("T")[0],note:""}),k=I({amount:"",account_id:"",payment_method:"transfer",transaction_date:new Date().toISOString().split("T")[0],note:""}),L=V(()=>({pending:"Belum Dimulai",in_progress:"Dalam Progress",ready:"Siap Belanja",complete:"Selesai"})[h.projectItem.status]||h.projectItem.status),K=V(()=>({pending:"bg-gray-100 text-gray-800",in_progress:"bg-blue-100 text-blue-800",ready:"bg-orange-100 text-orange-800",complete:"bg-green-100 text-green-800"})[h.projectItem.status]||"bg-gray-100 text-gray-800"),Q=V(()=>h.projectItem.status==="complete"?"bg-green-500":h.projectItem.status==="ready"?"bg-orange-500":"bg-blue-500"),D=V(()=>s.value.length?s.value.map(d=>({value:d.id,label:`${d.name} - ${d.formatted_balance}${d.type==="joint"?" 👥":" 👤"}`,metadata:{type:d.type,balance:d.current_balance,balance_status:d.balance_status,balance_status_color:d.balance_status_color,balance_status_text:d.balance_status_text}})):[]),W=V(()=>[{value:"transfer",label:"Transfer Bank"},{value:"cash",label:"Tunai"}]),B=V(()=>{const d={};return!j.value.amount||j.value.amount<=0?d.amount="Jumlah tabungan harus lebih dari 0":j.value.amount>h.projectItem.remaining_amount&&(d.amount=`Jumlah tabungan tidak boleh melebihi ${r(h.projectItem.remaining_amount)}`),j.value.account_id||(d.account_id="Akun tujuan harus dipilih"),j.value.payment_method||(d.payment_method="Metode pembayaran harus dipilih"),j.value.transaction_date||(d.transaction_date="Tanggal transaksi harus diisi"),d}),E=V(()=>{const d={};return!k.value.amount||k.value.amount<=0?d.amount="Jumlah pembelian harus lebih dari 0":k.value.amount>h.projectItem.actual_spent&&(d.amount=`Jumlah pembelian tidak boleh melebihi ${r(h.projectItem.actual_spent)}`),k.value.account_id||(d.account_id="Akun sumber harus dipilih"),k.value.payment_method||(d.payment_method="Metode pembayaran harus dipilih"),k.value.transaction_date||(d.transaction_date="Tanggal pembelian harus diisi"),d}),N=V(()=>Object.keys(B.value).length===0&&j.value.amount>0&&j.value.account_id&&j.value.payment_method&&j.value.transaction_date),z=V(()=>Object.keys(E.value).length===0&&k.value.amount>0&&k.value.account_id&&k.value.payment_method&&k.value.transaction_date),J=async()=>{try{const d=await axios.get(route("project-items.payments.index",{projectItem:h.projectItem.id}));d.data.success&&(v.value=d.data.payments,Object.assign(h.projectItem,d.data.project_item))}catch(d){console.error("Error loading payments:",d)}},ee=async()=>{M.value=!0;try{const d=await axios.get(route("project-items.api.accounts"));s.value=d.data,console.log("Accounts loaded from project API:",s.value)}catch(d){console.error("Error loading accounts from project API:",d);try{const l=await axios.get("/api/accounts");s.value=l.data,console.log("Accounts loaded from fallback API:",s.value)}catch(l){console.error("Fallback also failed:",l),alert("Gagal memuat data akun. Silakan refresh halaman.")}}finally{M.value=!1}},X=async()=>{if(N.value){U.value=!0;try{const d=await axios.post(route("project-items.payments.store",{projectItem:h.projectItem.id}),j.value);d.data.success&&(v.value.unshift(d.data.payment),Object.assign(h.projectItem,d.data.project_item),i(),S("payment-updated"))}catch(d){console.error("Error adding savings:",d),alert(d.response?.data?.error||"Gagal menambah tabungan")}finally{U.value=!1}}},Y=async()=>{if(z.value){A.value=!0;try{const d=await axios.post(route("project-items.payments.purchase",{projectItem:h.projectItem.id}),k.value);d.data.success&&(v.value.unshift(d.data.payment),Object.assign(h.projectItem,d.data.project_item),w(),S("payment-updated"))}catch(d){console.error("Error making purchase:",d),alert(d.response?.data?.error||"Gagal melakukan pembelian")}finally{A.value=!1}}},O=d=>{$.value=d,C.value=!0},y=async()=>{if($.value){q.value=!0;try{(await axios.delete(route("project-items.payments.destroy",{projectItem:h.projectItem.id,payment:$.value.id}))).data.success&&(v.value=v.value.filter(l=>l.id!==$.value.id),await J(),S("payment-updated"))}catch(d){console.error("Error deleting payment:",d),alert("Gagal menghapus transaksi")}finally{q.value=!1,C.value=!1,$.value=null}}},i=()=>{j.value={amount:"",account_id:"",payment_method:"transfer",transaction_date:new Date().toISOString().split("T")[0],note:""}},w=()=>{k.value={amount:"",account_id:"",payment_method:"transfer",transaction_date:new Date().toISOString().split("T")[0],note:""}},r=d=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(Math.abs(d)),t=(d,l="full")=>{const x=new Date(d);return l==="time"?x.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):x.toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},n=d=>({transfer:"Transfer",cash:"Tunai"})[d]||d;return V(()=>h.projectItem.planned_amount-h.projectItem.actual_spent),ce(()=>{J(),ee()}),(d,l)=>(m(),u("div",lt,[e("div",ot,[e("div",nt,[l[14]||(l[14]=e("div",{class:"w-8 h-8 md:w-10 md:h-10 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-lg md:rounded-xl flex items-center justify-center shadow-md"},[e("span",{class:"text-base md:text-lg text-white"},"💰")],-1)),e("div",null,[l[13]||(l[13]=e("h3",{class:"font-bold text-gray-800 text-base md:text-lg"},"Tabungan Proyek",-1)),e("p",dt,[l[12]||(l[12]=c(" Progress tabungan untuk ",-1)),e("span",rt,o(a.projectItem.item_name),1)])])]),e("div",it,[e("div",mt,[a.projectItem.status==="complete"?(m(),u("div",ut,[a.projectItem.actual_spent>0?(m(),u("div",ct," 💰 Sisa: "+o(r(a.projectItem.actual_spent)),1)):a.projectItem.actual_spent<0?(m(),u("div",pt," ⚠️ Kurang: "+o(r(Math.abs(a.projectItem.actual_spent))),1)):(m(),u("div",xt," ✅ Terpakai semua "))])):(m(),u("div",gt,[e("div",bt,o(r(a.projectItem.actual_spent))+" / "+o(r(a.projectItem.planned_amount)),1),e("div",yt,[e("div",{class:P(["h-1.5 md:h-2 rounded-full transition-all duration-500",Q.value]),style:de({width:Math.min(a.projectItem.savings_progress,100)+"%"})},null,6)]),e("div",vt,o(Math.round(a.projectItem.savings_progress))+"% tercapai ",1)]))]),e("div",{class:P([K.value,"px-2 py-1 md:px-3 md:py-1 rounded-full text-xs md:text-sm font-semibold"])},o(L.value),3)])]),M.value?(m(),u("div",ft,[...l[15]||(l[15]=[e("div",{class:"bg-white/70 backdrop-blur-sm border border-blue-100 rounded-xl md:rounded-2xl p-4 md:p-6 text-center"},[e("div",{class:"animate-spin rounded-full h-6 w-6 md:h-8 md:w-8 border-b-2 border-blue-500 mx-auto mb-2 md:mb-4"}),e("p",{class:"text-gray-600 text-xs md:text-sm"},"Memuat data akun...")],-1)])])):f("",!0),!a.projectItem.is_ready_for_purchase&&a.projectItem.status!=="complete"&&!M.value?(m(),u("div",ht,[e("div",kt,[l[18]||(l[18]=e("h4",{class:"font-semibold text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"💰"),e("span",{class:"text-sm md:text-base"},"Tambah Tabungan")],-1)),e("div",_t,[g(te,{modelValue:j.value.amount,"onUpdate:modelValue":l[0]||(l[0]=x=>j.value.amount=x),label:"Jumlah Tabungan *",placeholder:`Contoh: ${Math.round(a.projectItem.remaining_amount/1e3)*1e3}`,icon:"💰","account-type":"account_number",max:a.projectItem.remaining_amount,error:B.value.amount,required:""},null,8,["modelValue","placeholder","max","error"]),g(H,{modelValue:j.value.account_id,"onUpdate:modelValue":l[1]||(l[1]=x=>j.value.account_id=x),label:"Akun Tujuan *",placeholder:D.value.length>0?"Pilih akun untuk menabung":"Memuat akun...",options:D.value,error:B.value.account_id,icon:"🏦",disabled:D.value.length===0,required:""},null,8,["modelValue","placeholder","options","error","disabled"]),g(H,{modelValue:j.value.payment_method,"onUpdate:modelValue":l[2]||(l[2]=x=>j.value.payment_method=x),label:"Metode Pembayaran *",options:W.value,error:B.value.payment_method,icon:"💳",required:""},null,8,["modelValue","options","error"]),g(ue,{modelValue:j.value.transaction_date,"onUpdate:modelValue":l[3]||(l[3]=x=>j.value.transaction_date=x),label:"Tanggal Transaksi *",icon:"📅",error:B.value.transaction_date,required:""},null,8,["modelValue","error"])]),g(ne,{modelValue:j.value.note,"onUpdate:modelValue":l[4]||(l[4]=x=>j.value.note=x),label:"Catatan (Opsional)",placeholder:"Contoh: Tabungan gaji bulanan, Bonus, dll...",icon:"📝",rows:2,"show-counter":!0,"max-length":255},null,8,["modelValue"]),e("div",wt,[g(T,{onClick:X,loading:U.value,disabled:!N.value||D.value.length===0,class:"!px-4 !py-2 md:!px-6 md:!py-3 text-xs md:text-sm bg-gradient-to-r from-green-400 to-emerald-500 text-white shadow-md hover:shadow-lg"},{icon:_(()=>[...l[16]||(l[16]=[c("💰",-1)])]),default:_(()=>[l[17]||(l[17]=e("span",{class:"hidden xs:inline"},"Simpan Tabungan",-1))]),_:1},8,["loading","disabled"])])])])):f("",!0),a.projectItem.is_ready_for_purchase&&a.projectItem.status!=="complete"&&!M.value?(m(),u("div",jt,[e("div",$t,[l[23]||(l[23]=e("h4",{class:"font-semibold text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"🛍️"),e("span",{class:"text-sm md:text-base"},"Pembelian Item")],-1)),e("p",It,[l[19]||(l[19]=c(" Tabungan sudah mencukupi! Silakan lakukan pembelian untuk item ",-1)),e("strong",null,o(a.projectItem.item_name),1),l[20]||(l[20]=c(". ",-1))]),e("div",Vt,[g(te,{modelValue:k.value.amount,"onUpdate:modelValue":l[5]||(l[5]=x=>k.value.amount=x),label:"Jumlah Pembelian *",placeholder:`Maksimal: ${r(a.projectItem.actual_spent)}`,icon:"💰","account-type":"account_number",max:a.projectItem.actual_spent,error:E.value.amount,required:""},null,8,["modelValue","placeholder","max","error"]),g(H,{modelValue:k.value.account_id,"onUpdate:modelValue":l[6]||(l[6]=x=>k.value.account_id=x),label:"Akun Sumber *",placeholder:D.value.length>0?"Pilih akun untuk pembelian":"Memuat akun...",options:D.value,error:E.value.account_id,icon:"🏦",disabled:D.value.length===0,required:""},null,8,["modelValue","placeholder","options","error","disabled"]),g(H,{modelValue:k.value.payment_method,"onUpdate:modelValue":l[7]||(l[7]=x=>k.value.payment_method=x),label:"Metode Pembayaran *",options:W.value,error:E.value.payment_method,icon:"💳",required:""},null,8,["modelValue","options","error"]),g(ue,{modelValue:k.value.transaction_date,"onUpdate:modelValue":l[8]||(l[8]=x=>k.value.transaction_date=x),label:"Tanggal Pembelian *",icon:"📅",error:E.value.transaction_date,required:""},null,8,["modelValue","error"])]),g(ne,{modelValue:k.value.note,"onUpdate:modelValue":l[9]||(l[9]=x=>k.value.note=x),label:"Catatan Pembelian",placeholder:"Contoh: Beli material, Bayar vendor, dll...",icon:"📝",rows:2,"show-counter":!0,"max-length":255},null,8,["modelValue"]),e("div",Pt,[g(T,{onClick:Y,loading:A.value,disabled:!z.value||D.value.length===0,class:"!px-4 !py-2 md:!px-6 md:!py-3 text-xs md:text-sm bg-gradient-to-r from-orange-400 to-red-500 text-white shadow-md hover:shadow-lg"},{icon:_(()=>[...l[21]||(l[21]=[c("🛍️",-1)])]),default:_(()=>[l[22]||(l[22]=e("span",{class:"hidden xs:inline"},"Proses Pembelian",-1))]),_:1},8,["loading","disabled"])])])])):f("",!0),a.projectItem.status==="complete"?(m(),u("div",Ct,[e("div",Tt,[l[27]||(l[27]=e("div",{class:"text-3xl md:text-4xl mb-2 md:mb-4"},"🎉",-1)),l[28]||(l[28]=e("h4",{class:"text-lg md:text-xl font-bold text-gray-800 mb-1 md:mb-2"},"Pembelian Selesai!",-1)),e("p",St,[l[24]||(l[24]=c(" Item ",-1)),e("strong",null,o(a.projectItem.item_name),1),l[25]||(l[25]=c(" telah berhasil dibeli dengan total ",-1)),e("strong",null,o(r(a.projectItem.actual_spent)),1),l[26]||(l[26]=c(". ",-1))]),l[29]||(l[29]=e("div",{class:"bg-green-50 text-green-700 px-3 py-2 md:px-4 md:py-3 rounded-lg text-xs md:text-sm"},[e("p",null,[c("Status: "),e("strong",null,"Completed")])],-1))])])):f("",!0),e("div",Mt,[l[33]||(l[33]=e("h4",{class:"font-semibold text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"📊"),e("span",{class:"text-sm md:text-base"},"Riwayat Transaksi")],-1)),v.value.length===0?(m(),u("div",Dt,[...l[30]||(l[30]=[e("div",{class:"text-4xl md:text-6xl mb-1 md:mb-2"},"💸",-1),e("h4",{class:"text-base md:text-lg font-semibold text-gray-700 mb-1 md:mb-2"},"Belum ada transaksi",-1),e("p",{class:"text-xs md:text-sm text-gray-600 max-w-md mx-auto px-2"}," Mulai menabung untuk proyek ini 💖 ",-1)])])):(m(),u("div",Bt,[(m(!0),u(G,null,R(v.value,x=>(m(),u("div",{key:x.id,class:P(["group bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border-2 transition-all duration-300 hover:shadow-lg",x.amount>0?"border-green-100":"border-red-100"])},[e("div",Ut,[e("div",At,[e("div",{class:P(["w-6 h-6 md:w-8 md:h-8 rounded-md md:rounded-lg flex items-center justify-center text-white flex-shrink-0",x.amount>0?"bg-green-500":"bg-red-500"])},[e("span",qt,o(x.amount>0?"💰":"🛍️"),1)],2),e("div",Et,[e("div",Ot,[e("h4",Ft,o(x.amount>0?"Tabungan":"Pembelian"),1),e("span",{class:P(["px-1.5 py-0.5 md:px-2 md:py-1 text-xs rounded-full font-medium whitespace-nowrap",x.amount>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},o(n(x.payment_method)),3)]),e("div",Lt,[x.transaction?(m(),u("p",Kt,[l[31]||(l[31]=e("span",{class:"font-medium"},"Akun:",-1)),c(" "+o(x.transaction.account.name),1)])):f("",!0),x.note?(m(),u("p",zt,"📝 "+o(x.note),1)):f("",!0),e("p",Jt,o(t(x.created_at)),1)])])]),e("div",Nt,[e("div",Gt,[e("div",{class:P(["text-base md:text-lg font-bold",x.amount>0?"text-green-600":"text-red-600"])},o(x.amount>0?"+":"")+o(r(x.amount)),3),e("div",Rt,o(t(x.created_at,"time")),1)]),e("div",Ht,[g(T,{onClick:xe=>O(x),class:"w-6 h-6 md:w-8 md:h-8 rounded-full flex items-center justify-center text-gray-500 hover:text-red-600 hover:bg-red-50 transition-colors text-xs",title:"Hapus transaksi"},{default:_(()=>[...l[32]||(l[32]=[c(" 🗑️ ",-1)])]),_:1},8,["onClick"])])])])],2))),128))]))]),g(pe,{show:C.value,"onUpdate:show":l[10]||(l[10]=x=>C.value=x),title:"Hapus Transaksi",description:($.value,"Apakah Anda yakin ingin menghapus transaksi ini?"),icon:"🗑️","confirm-text":"Hapus","cancel-text":"Batal","confirm-variant":"danger","confirm-loading":q.value,onConfirm:y,onClose:l[11]||(l[11]=x=>C.value=!1)},{default:_(()=>[e("div",Qt,[l[41]||(l[41]=e("div",{class:"p-3 md:p-4 bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-xl md:rounded-2xl"},[e("p",{class:"text-xs md:text-sm text-red-600 flex items-start gap-2"},[e("span",{class:"text-base md:text-lg mt-0.5"},"⚠️"),e("span",null,[e("strong",{class:"block"},"Tindakan ini tidak dapat dibatalkan!"),c(" Transaksi yang dihapus akan mempengaruhi saldo akun dan progress tabungan. ")])])],-1)),$.value?(m(),u("div",Wt,[l[40]||(l[40]=e("h4",{class:"font-semibold text-gray-800 text-sm md:text-base mb-2"},"Detail Transaksi:",-1)),e("div",Xt,[e("div",null,[l[34]||(l[34]=e("span",{class:"text-gray-600"},"Jenis:",-1)),e("p",Yt,o($.value.amount>0?"Tabungan":"Pembelian"),1)]),e("div",null,[l[35]||(l[35]=e("span",{class:"text-gray-600"},"Jumlah:",-1)),e("p",{class:P(["font-bold",$.value.amount>0?"text-green-600":"text-red-600"])},o(r($.value.amount)),3)]),e("div",null,[l[36]||(l[36]=e("span",{class:"text-gray-600"},"Akun:",-1)),e("p",Zt,o($.value.transaction?.account?.name),1)]),e("div",null,[l[37]||(l[37]=e("span",{class:"text-gray-600"},"Metode:",-1)),e("p",ea,o(n($.value.payment_method)),1)]),e("div",null,[l[38]||(l[38]=e("span",{class:"text-gray-600"},"Tanggal:",-1)),e("p",ta,o(t($.value.created_at)),1)]),$.value.note?(m(),u("div",aa,[l[39]||(l[39]=e("span",{class:"text-gray-600"},"Catatan:",-1)),e("p",sa,o($.value.note),1)])):f("",!0)])])):f("",!0)])]),_:1},8,["show","description","confirm-loading"])]))}},oa=ae(la,[["__scopeId","data-v-2ee6388d"]]),na={class:"py-2 min-h-screen relative overflow-hidden"},da={class:"w-full px-3 sm:px-4 lg:px-6 relative z-10"},ra={class:"flex items-center justify-between"},ia={class:"flex items-center gap-2 md:gap-3"},ma={class:"text-lg md:text-xl"},ua={class:"font-medium text-sm md:text-base"},ca={class:"flex mb-4","aria-label":"Breadcrumb"},pa={class:"flex items-center space-x-2 text-sm"},xa={class:"flex items-center"},ga={class:"flex items-center"},ba={class:"text-gray-700 font-medium text-xs md:text-sm truncate max-w-[120px] md:max-w-none"},ya={class:"relative overflow-hidden bg-gradient-to-br from-pink-50 via-white to-blue-50 rounded-xl md:rounded-2xl border border-pink-100/40 shadow-md p-4 mb-4"},va={class:"relative flex flex-col md:flex-row md:items-center justify-between gap-3 md:gap-0 mb-3 md:mb-2"},fa={class:"flex items-center gap-3 md:gap-4"},ha={class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-pink-400 to-rose-500 rounded-lg md:rounded-xl flex items-center justify-center shadow-md"},ka={class:"text-xl md:text-2xl text-white"},_a={class:"text-lg md:text-2xl font-bold text-gray-800 line-clamp-2"},wa={class:"flex flex-wrap items-center gap-2 mt-2"},ja={key:0,class:"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},$a={class:"flex items-center gap-2"},Ia={key:1,class:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs"},Va={class:"relative grid grid-cols-2 md:grid-cols-4 gap-2 mt-3 md:mt-4"},Pa={class:"text-center p-3 md:p-4 bg-white/80 backdrop-blur-sm rounded-lg md:rounded-xl border border-blue-200/50 shadow-sm"},Ca={class:"text-base md:text-xl font-bold text-blue-700"},Ta={class:"text-center p-3 md:p-4 bg-white/80 backdrop-blur-sm rounded-lg md:rounded-xl border border-orange-200/50 shadow-sm"},Sa={class:"text-base md:text-xl font-bold text-orange-700"},Ma={class:"text-center p-3 md:p-4 bg-white/80 backdrop-blur-sm rounded-lg md:rounded-xl border border-green-200/50 shadow-sm"},Da={class:"text-center p-3 md:p-4 bg-white/80 backdrop-blur-sm rounded-lg md:rounded-xl border border-purple-200/50 shadow-sm"},Ba={class:"text-base md:text-xl font-bold text-purple-700"},Ua={class:"grid grid-cols-1 lg:grid-cols-3 gap-3 md:gap-4"},Aa={class:"lg:col-span-2 space-y-3 md:space-y-4"},qa={key:0,class:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl md:rounded-2xl p-4 md:p-6 border border-indigo-100"},Ea={class:"grid grid-cols-2 gap-3 md:gap-4"},Oa={class:"space-y-1"},Fa={class:"font-bold text-gray-800 text-base md:text-lg"},La={class:"space-y-1"},Ka={class:"font-bold text-green-600 text-base md:text-lg"},za={class:"col-span-2 space-y-1"},Ja={class:"bg-white/70 rounded-lg md:rounded-xl p-2 md:p-3 border border-gray-200"},Na={class:"flex items-center justify-between"},Ga={class:"text-xs md:text-sm text-gray-600"},Ra={class:"font-bold text-blue-600 text-base md:text-lg"},Ha={class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},Qa={class:"space-y-3 md:space-y-4"},Wa={class:"flex justify-between text-xs md:text-sm"},Xa={class:"font-medium text-gray-700"},Ya={class:"text-gray-600"},Za={class:"w-full bg-gray-200 rounded-full h-3 md:h-4"},es={class:"flex justify-between text-xs text-gray-500"},ts={key:0,class:"text-red-500 font-semibold"},as={key:1,class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},ss={class:"text-gray-700 leading-relaxed text-sm md:text-base"},ls={key:2,class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},os={class:"space-y-3 md:space-y-4"},ns={key:0,class:"flex items-center justify-between p-3 md:p-4 bg-gradient-to-r from-pink-50 to-rose-50 rounded-lg md:rounded-xl border border-pink-200"},ds={class:"font-medium text-gray-800 flex items-center gap-2 text-sm"},rs={key:0,class:"text-base md:text-lg"},is={key:1,class:"text-base md:text-lg"},ms={key:1,class:"space-y-3 md:space-y-4"},us={key:0,class:"flex items-center justify-between p-3 md:p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg md:rounded-xl border border-blue-200"},cs={class:"text-base md:text-lg"},ps={key:1,class:"p-3 md:p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg md:rounded-xl border border-green-200"},xs={class:"flex items-center justify-between mb-2 md:mb-3"},gs={class:"text-xs text-gray-500 break-all bg-white/50 p-2 rounded-lg"},bs={key:2,class:"space-y-3 md:space-y-4"},ys={key:0,class:"p-3 md:p-4 bg-gradient-to-r from-purple-50 to-violet-50 rounded-lg md:rounded-xl border border-purple-200"},vs={class:"flex items-center justify-between mb-2 md:mb-3"},fs={class:"text-xs text-gray-500 break-all bg-white/50 p-2 rounded-lg"},hs={key:1,class:"p-3 md:p-4 bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg md:rounded-xl border border-orange-200"},ks={class:"text-xs md:text-sm text-gray-700 bg-white/50 p-2 md:p-3 rounded-lg"},_s={key:3,class:"grid grid-cols-2 gap-2"},ws={key:0,class:"p-2 md:p-3 bg-white rounded-lg md:rounded-xl border border-gray-200 text-center hover:shadow-md transition-shadow"},js={class:"text-xs text-gray-500 block capitalize mb-2"},$s={class:"font-medium text-gray-800 text-xs md:text-sm"},Is={key:3,class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-4 md:p-6 border border-white/20 shadow-lg"},Vs={class:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4"},Ps={class:"text-xs text-gray-500 block capitalize mb-2"},Cs={class:"font-medium text-gray-800 text-xs md:text-sm"},Ts={class:"space-y-3 md:space-y-4"},Ss={class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},Ms={class:"space-y-3 md:space-y-4"},Ds={class:"flex items-center justify-between p-2 md:p-3 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg md:rounded-xl"},Bs={class:"font-medium text-gray-800 text-xs md:text-sm"},Us={class:"flex items-center justify-between p-2 md:p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg md:rounded-xl"},As={class:"font-medium text-gray-800 text-xs md:text-sm"},qs={class:"flex items-center justify-between p-2 md:p-3 bg-gradient-to-r from-purple-50 to-violet-50 rounded-lg md:rounded-xl"},Es={class:"font-medium text-gray-800 text-xs md:text-sm capitalize"},Os={class:"flex items-center justify-between p-2 md:p-3 bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg md:rounded-xl"},Fs={class:"font-bold text-orange-700 text-xs md:text-sm"},Ls={class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},Ks={class:"space-y-2 md:space-y-3"},zs={key:1,class:"text-center p-2 md:p-3 bg-gray-50 rounded-lg md:rounded-xl"},Js={class:"bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl p-3 md:p-4 border border-white/20 shadow-lg"},Ns={class:"space-y-3 md:space-y-4"},Gs={class:"flex items-center gap-2 md:gap-3"},Rs={class:"text-xs text-gray-500"},Hs={class:"flex items-center gap-2 md:gap-3"},Qs={class:"text-xs text-gray-500"},Ws={class:"space-y-4 md:space-y-6 max-h-[50vh] md:max-h-[60vh] overflow-y-auto pr-2"},Xs={class:"space-y-3 md:space-y-4"},Ys={class:"flex items-center justify-between"},Zs={key:0,class:"flex gap-2"},el={key:0},tl={class:"text-xs text-gray-500 mt-1"},al={key:1},sl={key:0,class:"text-xs text-gray-500 mt-1"},ll={key:0,class:"space-y-3 md:space-y-4"},ol={class:"grid grid-cols-2 gap-3 md:gap-4"},nl={class:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl md:rounded-2xl p-3 md:p-4 border border-green-200"},dl={class:"flex items-center justify-between"},rl={class:"text-xs text-gray-500"},il={class:"text-right"},ml={class:"text-lg md:text-xl font-bold text-green-600"},ul={key:1,class:"grid grid-cols-1 gap-3 md:gap-4"},cl={key:2,class:"space-y-3 md:space-y-4"},pl={class:"bg-gradient-to-r from-pink-50 to-rose-50 rounded-xl md:rounded-2xl p-3 md:p-4 border border-pink-100"},xl={class:"space-y-3 md:space-y-4"},gl={key:0,class:"space-y-2 md:space-y-3"},bl={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},yl={class:"text-base md:text-lg"},vl={class:"flex gap-2 md:gap-4"},fl=["value","onUpdate:modelValue"],hl={class:"text-xs md:text-sm font-medium text-gray-700"},kl={key:1,class:"space-y-2"},_l={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},wl={class:"text-base md:text-lg"},jl=["onUpdate:modelValue"],$l={value:""},Il=["value"],Vl={key:2,class:"space-y-2"},Pl={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},Cl={class:"text-base md:text-lg"},Tl=["type","onUpdate:modelValue","placeholder"],Sl={key:3,class:"space-y-2"},Ml={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},Dl={class:"text-base md:text-lg"},Bl=["onUpdate:modelValue","placeholder"],Ul={key:4,class:"space-y-2"},Al={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},ql={class:"text-base md:text-lg"},El=["onUpdate:modelValue","placeholder"],Ol={key:5,class:"space-y-2"},Fl={class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},Ll={class:"text-base md:text-lg"},Kl=["onUpdate:modelValue"],zl={key:3,class:"p-2 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl md:rounded-2xl"},Jl={__name:"Show",props:{item:Object,project:Object,canEdit:Boolean},setup(a){const b=a,h=I(!1);I(1),I(0);const S=I(!1),v=I([]);ce(()=>{q()});const s=ve({item_type:b.item.item_type,item_category:b.item.item_category||"",name:b.item.name,description:b.item.description||"",planned_amount:b.item.planned_amount,actual_spent:b.item.actual_spent,status:b.item.status,details:b.item.details||{}}),M=V(()=>v.value&&v.value.length>0),U=V(()=>S.value||!M.value),A=V(()=>!v.value||!Array.isArray(v.value)?[]:v.value.map(r=>({value:r,label:r}))),q=async()=>{try{console.log("Loading categories for project:",b.project.id);const r=await fe.get(route("projects.items.api.categories",{project:b.project.id}));console.log("Categories API response:",r.data),r.data&&r.data.success?v.value=r.data.categories||[]:Array.isArray(r.data)?v.value=r.data:r.data&&Array.isArray(r.data.categories)?v.value=r.data.categories:(console.warn("Unexpected categories response format:",r.data),v.value=[]),console.log("Final available categories:",v.value)}catch(r){console.error("Error loading categories:",r),v.value=[]}},C=V(()=>["goods","material"].includes(s.item_type)),$=V(()=>{if(!C.value)return s.planned_amount;const r=parseFloat(s.details.quantity)||0,t=parseFloat(s.details.unit_price)||0;return r*t}),j=V(()=>b.canEdit&&b.item.status!=="complete"),k=V(()=>["goods","material"].includes(b.item.item_type)),L=V(()=>b.item.details?["ukuran","warna","material","merk"].some(t=>b.item.details[t]):!1),K=V(()=>{if(!b.item.details)return!1;const r={...b.item.details};return delete r.quantity,delete r.unit_price,Object.keys(r).length>0}),Q=[{value:"goods",label:"🛍️ Barang"},{value:"service",label:"👨‍💼 Jasa"},{value:"document",label:"📄 Dokumen"},{value:"task",label:"✅ Tugas"},{value:"material",label:"🏗️ Material"}],D=[{value:"needed",label:"⏳ Diperlukan"},{value:"in_progress",label:"🚧 Dalam Proses"},{value:"ready",label:"📦 Siap"},{value:"complete",label:"✅ Selesai"},{value:"cancelled",label:"❌ Dibatalkan"}],W=[{value:"online",label:"🛒 Beli Online"},{value:"store",label:"🏪 Beli di Toko"}],B={shopee:{name:"Shopee",icon:"🟠",color:"text-orange-500"},tokopedia:{name:"Tokopedia",icon:"🟢",color:"text-green-500"},lazada:{name:"Lazada",icon:"🔵",color:"text-blue-500"},blibli:{name:"Blibli",icon:"🔴",color:"text-red-500"},bukalapak:{name:"Bukalapak",icon:"🟡",color:"text-yellow-500"},other:{name:"Lainnya",icon:"🛒",color:"text-gray-500"}},E=V(()=>({goods:[{key:"purchase_type",label:"Cara Pembelian",type:"radio",icon:"🛒",options:W},...s.details?.purchase_type==="online"?[{key:"ecommerce_platform",label:"Platform Online",type:"select",icon:"📱",options:Object.entries(B).map(([t,n])=>({value:t,label:`${n.icon} ${n.name}`}))},{key:"online_link",label:"Link Produk",type:"url",icon:"🔗",placeholder:"https://..."}]:[],...s.details?.purchase_type==="store"?[{key:"store_maps",label:"Link Google Maps",type:"url",icon:"🗺️",placeholder:"https://maps.google.com/..."},{key:"store_address",label:"Alamat Toko",type:"textarea",icon:"🏪",placeholder:"Alamat lengkap toko..."}]:[],{key:"ukuran",label:"Ukuran",type:"text",icon:"📏"},{key:"warna",label:"Warna",type:"text",icon:"🎨"},{key:"material",label:"Material",type:"text",icon:"⚙️"},{key:"merk",label:"Merk",type:"text",icon:"🏷️"}],service:[{key:"vendor_kontak",label:"Kontak Vendor",type:"text",icon:"📞"},{key:"tanggal_kontrak",label:"Tanggal Kontrak",type:"date",icon:"📅"},{key:"sisa_pembayaran",label:"Sisa Pembayaran",type:"number",icon:"💰"},{key:"menu_pilihan",label:"Menu Pilihan",type:"text",icon:"🍽️"},{key:"lokasi",label:"Lokasi",type:"text",icon:"📍"}],document:[{key:"tanggal_kadaluarsa",label:"Tanggal Kadaluarsa",type:"date",icon:"📅"},{key:"lokasi_fisik",label:"Lokasi Fisik",type:"text",icon:"📁"},{key:"status_legalitas",label:"Status Legalitas",type:"text",icon:"⚖️"},{key:"nomor_dokumen",label:"Nomor Dokumen",type:"text",icon:"🔢"}],task:[{key:"pihak_pengurus",label:"Pihak Pengurus",type:"text",icon:"👤"},{key:"biaya_administrasi",label:"Biaya Administrasi",type:"number",icon:"💰"},{key:"progress_persentase",label:"Progress (%)",type:"number",icon:"📊"},{key:"deadline",label:"Deadline",type:"date",icon:"⏰"}],material:[{key:"kuantitas_target",label:"Kuantitas Target",type:"number",icon:"📦"},{key:"satuan",label:"Satuan",type:"text",icon:"⚖️"},{key:"supplier_preferensi",label:"Supplier Preferensi",type:"text",icon:"🏪"},{key:"spesifikasi",label:"Spesifikasi",type:"text",icon:"📋"}]})[s.item_type]||[]);oe([()=>s.details.quantity,()=>s.details.unit_price],()=>{C.value&&(s.planned_amount=$.value)}),oe(()=>s.item_type,(r,t)=>{if(r!==t){if(r!=="goods"){const{purchase_type:n,ecommerce_platform:d,online_link:l,store_maps:x,store_address:xe,...ge}=s.details;s.details=ge}["goods","material"].includes(r)&&(s.details.quantity||(s.details.quantity=1),s.details.unit_price||(s.details.unit_price=0),s.planned_amount=$.value)}});const N=()=>{s.item_type=b.item.item_type,s.item_category=b.item.item_category||"",s.name=b.item.name,s.description=b.item.description||"",s.planned_amount=b.item.planned_amount,s.actual_spent=b.item.actual_spent,s.status=b.item.status,s.details=b.item.details||{},S.value=!0,["goods","material"].includes(b.item.item_type)&&(s.details.quantity=b.item.details?.quantity||1,s.details.unit_price=b.item.details?.unit_price||0),h.value=!0},z=()=>{s.put(route("projects.items.update",{project:b.project.id,item:b.item.id}),{preserveScroll:!0,onSuccess:()=>{h.value=!1,s.reset(),ie.reload()},onError:r=>{console.error("Update error:",r)}})},J=()=>{h.value=!1,s.clearErrors(),s.reset()},ee=()=>{ie.reload({only:["item"]})},X=r=>{r&&window.open(r,"_blank")},Y=()=>{C.value&&(s.planned_amount=$.value)},O=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),y=r=>({goods:"Barang",service:"Jasa",document:"Dokumen",task:"Tugas",material:"Material"})[r]||r,i=r=>({needed:"Diperlukan",in_progress:"Dalam Proses",ready:"Siap",complete:"Selesai",cancelled:"Dibatalkan"})[r]||r,w=r=>({planning:"Perencanaan",on_going:"Berjalan",completed:"Selesai",cancelled:"Dibatalkan"})[r]||r;return(r,t)=>(m(),le(we,{title:`${a.item.name} - ${a.project.name}`},{default:_(()=>[e("div",na,[e("div",da,[r.$page.props.flash.message?(m(),u("div",{key:0,class:P(["mb-4 md:mb-6 p-3 md:p-4 rounded-xl md:rounded-2xl border backdrop-blur-sm transition-all duration-300",{"bg-green-50 border-green-200 text-green-800":r.$page.props.flash.message.type==="success","bg-red-50 border-red-200 text-red-800":r.$page.props.flash.message.type==="error"}])},[e("div",ra,[e("div",ia,[e("span",ma,o(r.$page.props.flash.message.type==="success"?"✅":"⚠️"),1),e("span",ua,o(r.$page.props.flash.message.message),1)]),e("button",{onClick:t[0]||(t[0]=n=>r.$page.props.flash.message=null),class:"text-gray-500 hover:text-gray-700 transition-colors text-lg"}," ✕ ")])],2)):f("",!0),e("nav",ca,[e("ol",pa,[e("li",null,[g(p(re),{href:r.route("projects.index"),class:"text-gray-600 hover:text-pink-600 transition-colors flex items-center gap-1"},{default:_(()=>[...t[18]||(t[18]=[e("span",{class:"text-base md:text-lg"},"💼",-1),e("span",{class:"hidden xs:inline"},"Projects",-1)])]),_:1},8,["href"])]),e("li",xa,[t[19]||(t[19]=e("span",{class:"text-gray-400 mx-2"},"›",-1)),g(p(re),{href:r.route("projects.items.index",{project:a.project.id}),class:"text-gray-600 hover:text-pink-600 transition-colors text-xs md:text-sm"},{default:_(()=>[c(o(a.project.name),1)]),_:1},8,["href"])]),e("li",ga,[t[20]||(t[20]=e("span",{class:"text-gray-400 mx-2"},"›",-1)),e("span",ba,o(a.item.name),1)])])]),e("div",ya,[t[31]||(t[31]=e("div",{class:"absolute -top-10 -right-10 w-40 h-40 bg-pink-100/40 rounded-full blur-3xl"},null,-1)),t[32]||(t[32]=e("div",{class:"absolute -bottom-12 -left-12 w-48 h-48 bg-blue-100/40 rounded-full blur-3xl"},null,-1)),e("div",va,[e("div",fa,[e("div",ha,[e("span",ka,o(a.item.item_type_icon),1)]),e("div",null,[e("h1",_a,o(a.item.name),1),e("div",wa,[e("span",{class:P(["px-2 py-1 rounded-full text-xs font-medium",a.item.item_type_badge])},o(y(a.item.item_type)),3),e("span",{class:P(["px-2 py-1 rounded-full text-xs font-medium",a.item.status_badge])},o(a.item.status_icon)+" "+o(i(a.item.status)),3),a.item.item_category&&a.item.item_category!=="Uncategorized"?(m(),u("span",ja," 📂 "+o(a.item.item_category),1)):f("",!0)])])]),e("div",$a,[j.value?(m(),le(T,{key:0,onClick:N,variant:"primary",size:"sm",class:"!px-3 !py-2 text-xs"},{icon:_(()=>[...t[21]||(t[21]=[c("✏️",-1)])]),default:_(()=>[t[22]||(t[22]=e("span",{class:"hidden xs:inline"},"Edit Item",-1))]),_:1})):(m(),u("div",Ia," 🔒 Read Only "))])]),e("div",Va,[e("div",Pa,[t[23]||(t[23]=e("div",{class:"text-xl md:text-2xl mb-2"},"💰",-1)),e("div",Ca,o(a.item.formatted_planned_amount),1),t[24]||(t[24]=e("div",{class:"text-xs md:text-sm text-gray-600"},"Rencana Biaya",-1))]),e("div",Ta,[t[25]||(t[25]=e("div",{class:"text-xl md:text-2xl mb-2"},"💸",-1)),e("div",Sa,o(a.item.formatted_actual_spent),1),t[26]||(t[26]=e("div",{class:"text-xs md:text-sm text-gray-600"},"Realisasi",-1))]),e("div",Ma,[t[27]||(t[27]=e("div",{class:"text-xl md:text-2xl mb-2"},"📊",-1)),e("div",{class:P(["text-base md:text-xl font-bold",a.item.remaining_amount>=0?"text-green-700":"text-red-700"])},o(a.item.formatted_remaining_amount),3),t[28]||(t[28]=e("div",{class:"text-xs md:text-sm text-gray-600"},"Sisa Anggaran",-1))]),e("div",Da,[t[29]||(t[29]=e("div",{class:"text-xl md:text-2xl mb-2"},"📈",-1)),e("div",Ba,o(a.item.progress_percentage.toFixed(1))+"%",1),t[30]||(t[30]=e("div",{class:"text-xs md:text-sm text-gray-600"},"Progress",-1))])])]),e("div",Ua,[e("div",Aa,[k.value&&a.item.details?(m(),u("div",qa,[t[38]||(t[38]=e("h3",{class:"font-semibold text-gray-800 text-base md:text-lg mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"📊"),c(" Informasi Kuantitas & Harga ")],-1)),e("div",Ea,[e("div",Oa,[t[34]||(t[34]=e("span",{class:"text-xs md:text-sm text-gray-600 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"📦"),c(" Quantity ")],-1)),e("p",Fa,[c(o(a.item.details.quantity||0)+" ",1),t[33]||(t[33]=e("span",{class:"text-xs font-normal text-gray-500"},"unit",-1))])]),e("div",La,[t[35]||(t[35]=e("span",{class:"text-xs md:text-sm text-gray-600 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"💰"),c(" Harga Satuan ")],-1)),e("p",Ka,o(O(a.item.details.unit_price||0)),1)]),e("div",za,[t[37]||(t[37]=e("span",{class:"text-xs md:text-sm text-gray-600 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"🧮"),c(" Perhitungan Total ")],-1)),e("div",Ja,[e("div",Na,[e("span",Ga,o(a.item.details.quantity||0)+" × "+o(O(a.item.details.unit_price||0)),1),e("span",Ra," = "+o(O(a.item.planned_amount)),1)]),t[36]||(t[36]=e("p",{class:"text-xs text-gray-500 mt-1"}," Total rencana biaya dihitung otomatis dari quantity × harga satuan ",-1))])])])])):f("",!0),e("div",Ha,[t[39]||(t[39]=e("h2",{class:"font-semibold text-lg md:text-xl text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"📈"),c(" Progress Keuangan ")],-1)),e("div",Qa,[e("div",Wa,[e("span",Xa,o(a.item.progress_percentage.toFixed(1))+"%",1),e("span",Ya,o(a.item.formatted_actual_spent)+" / "+o(a.item.formatted_planned_amount),1)]),e("div",Za,[e("div",{class:"h-3 md:h-4 rounded-full transition-all duration-1000 bg-gradient-to-r from-pink-400 to-rose-500 shadow-lg",style:de({width:Math.min(a.item.progress_percentage,100)+"%"})},null,4)]),e("div",es,[e("span",null,"Sisa: "+o(a.item.formatted_remaining_amount),1),a.item.remaining_amount<0?(m(),u("span",ts," ⚠️ Melebihi budget ")):f("",!0)])])]),a.item.description?(m(),u("div",as,[t[40]||(t[40]=e("h2",{class:"font-semibold text-lg md:text-xl text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"📄"),c(" Deskripsi ")],-1)),e("p",ss,o(a.item.description),1)])):f("",!0),a.item.item_type==="goods"&&a.item.details&&K.value?(m(),u("div",ls,[t[50]||(t[50]=e("h2",{class:"font-semibold text-lg md:text-xl text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"🛍️"),c(" Informasi Pembelian ")],-1)),e("div",os,[a.item.details.purchase_type?(m(),u("div",ns,[t[41]||(t[41]=e("span",{class:"text-xs md:text-sm text-gray-600 font-medium"},"Cara Pembelian:",-1)),e("span",ds,[a.item.details.purchase_type==="online"?(m(),u("span",rs,"🛒")):(m(),u("span",is,"🏪")),c(" "+o(a.item.details.purchase_type==="online"?"Beli Online":"Beli di Toko"),1)])])):f("",!0),a.item.details.purchase_type==="online"?(m(),u("div",ms,[a.item.details.ecommerce_platform?(m(),u("div",us,[t[42]||(t[42]=e("span",{class:"text-xs md:text-sm text-gray-600 font-medium"},"Platform:",-1)),e("span",{class:P(["font-medium flex items-center gap-2 text-sm",B[a.item.details.ecommerce_platform]?.color])},[e("span",cs,o(B[a.item.details.ecommerce_platform]?.icon),1),c(" "+o(B[a.item.details.ecommerce_platform]?.name),1)],2)])):f("",!0),a.item.details.online_link?(m(),u("div",ps,[e("div",xs,[t[45]||(t[45]=e("span",{class:"text-xs md:text-sm text-gray-600 font-medium"},"Link Produk:",-1)),g(T,{onClick:t[1]||(t[1]=n=>X(a.item.details.online_link)),variant:"primary",size:"sm",class:"!px-3 !py-2 text-xs"},{icon:_(()=>[...t[43]||(t[43]=[c("🔗",-1)])]),default:_(()=>[t[44]||(t[44]=e("span",{class:"hidden xs:inline"},"Buka Link",-1))]),_:1})]),e("p",gs,o(a.item.details.online_link),1)])):f("",!0)])):f("",!0),a.item.details.purchase_type==="store"?(m(),u("div",bs,[a.item.details.store_maps?(m(),u("div",ys,[e("div",vs,[t[48]||(t[48]=e("span",{class:"text-xs md:text-sm text-gray-600 font-medium"},"Lokasi Toko:",-1)),g(T,{onClick:t[2]||(t[2]=n=>X(a.item.details.store_maps)),variant:"primary",size:"sm",class:"!px-3 !py-2 text-xs"},{icon:_(()=>[...t[46]||(t[46]=[c("🗺️",-1)])]),default:_(()=>[t[47]||(t[47]=e("span",{class:"hidden xs:inline"},"Buka Maps",-1))]),_:1})]),e("p",fs,o(a.item.details.store_maps),1)])):f("",!0),a.item.details.store_address?(m(),u("div",hs,[t[49]||(t[49]=e("span",{class:"text-xs md:text-sm text-gray-600 font-medium block mb-2 md:mb-3"},"Alamat Toko:",-1)),e("p",ks,o(a.item.details.store_address),1)])):f("",!0)])):f("",!0),L.value?(m(),u("div",_s,[(m(),u(G,null,R(["ukuran","warna","material","merk"],n=>e("div",{key:n},[a.item.details[n]?(m(),u("div",ws,[e("span",js,o(n),1),e("span",$s,o(a.item.details[n]),1)])):f("",!0)])),64))])):f("",!0)])])):f("",!0),a.item.details&&Object.keys(a.item.details).length>0&&a.item.item_type!=="goods"?(m(),u("div",Is,[t[51]||(t[51]=e("h2",{class:"font-semibold text-lg md:text-xl text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"🔧"),c(" Detail Tambahan ")],-1)),e("div",Vs,[(m(!0),u(G,null,R(a.item.details,(n,d)=>(m(),u("div",{key:d,class:"p-3 md:p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg md:rounded-xl border border-gray-200 hover:shadow-md transition-shadow"},[e("span",Ps,o(d.replace("_"," ")),1),e("span",Cs,o(n),1)]))),128))])])):f("",!0),g(st,{"project-item":a.item,checklists:a.item.checklists||[],"item-name":a.item.name,onChecklistUpdated:ee},null,8,["project-item","checklists","item-name"]),g(oa,{"project-item":a.item,payments:a.item.payments||[],"item-name":a.item.name,onPaymentUpdated:r.loadPayments},null,8,["project-item","payments","item-name","onPaymentUpdated"])]),e("div",Ts,[e("div",Ss,[t[56]||(t[56]=e("h3",{class:"font-semibold text-base md:text-lg text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"💼"),c(" Project Info ")],-1)),e("div",Ms,[e("div",Ds,[t[52]||(t[52]=e("span",{class:"text-xs md:text-sm text-gray-600"},"Project",-1)),e("p",Bs,o(a.project.name),1)]),e("div",Us,[t[53]||(t[53]=e("span",{class:"text-xs md:text-sm text-gray-600"},"Kategori",-1)),e("p",As,o(a.project.category.name),1)]),e("div",qs,[t[54]||(t[54]=e("span",{class:"text-xs md:text-sm text-gray-600"},"Status Project",-1)),e("p",Es,o(w(a.project.status)),1)]),e("div",Os,[t[55]||(t[55]=e("span",{class:"text-xs md:text-sm text-gray-600"},"Target Budget",-1)),e("p",Fs,o(O(a.project.target_total_amount)),1)])])]),e("div",Ls,[t[60]||(t[60]=e("h3",{class:"font-semibold text-base md:text-lg text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"⚡"),c(" Quick Actions ")],-1)),e("div",Ks,[j.value?(m(),le(T,{key:0,onClick:N,variant:"primary",class:"w-full justify-center !px-3 !py-2 text-xs md:text-sm"},{icon:_(()=>[...t[57]||(t[57]=[c("✏️",-1)])]),default:_(()=>[t[58]||(t[58]=e("span",{class:"hidden xs:inline"},"Edit Item",-1))]),_:1})):(m(),u("div",zs,[...t[59]||(t[59]=[e("p",{class:"text-xs text-gray-600"},"Item sudah selesai, tidak dapat diedit",-1)])]))])]),e("div",Js,[t[65]||(t[65]=e("h3",{class:"font-semibold text-base md:text-lg text-gray-800 mb-3 md:mb-4 flex items-center gap-2"},[e("span",null,"🕒"),c(" Timeline ")],-1)),e("div",Ns,[e("div",Gs,[t[62]||(t[62]=e("div",{class:"w-6 h-6 md:w-8 md:h-8 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0"},[e("span",{class:"text-white text-xs"},"✓")],-1)),e("div",null,[t[61]||(t[61]=e("p",{class:"text-xs md:text-sm font-medium text-gray-800"},"Dibuat",-1)),e("p",Rs,o(a.item.created_at),1)])]),e("div",Hs,[t[64]||(t[64]=e("div",{class:"w-6 h-6 md:w-8 md:h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0"},[e("span",{class:"text-white text-xs"},"↻")],-1)),e("div",null,[t[63]||(t[63]=e("p",{class:"text-xs md:text-sm font-medium text-gray-800"},"Terakhir Diupdate",-1)),e("p",Qs,o(a.item.updated_at),1)])])])])])]),g(pe,{show:h.value,"onUpdate:show":t[17]||(t[17]=n=>h.value=n),title:"Edit Item Project",description:"Perbarui informasi item project "+a.item.name,icon:"✏️","confirm-text":"Perbarui","confirm-loading":p(s).processing,onConfirm:z,onClose:J,size:"xl"},{default:_(()=>[e("div",Ws,[g(H,{modelValue:p(s).item_type,"onUpdate:modelValue":t[3]||(t[3]=n=>p(s).item_type=n),label:"Jenis Item",placeholder:"Pilih jenis item",options:Q,error:p(s).errors.item_type,icon:"🏷️",required:"",disabled:p(s).processing},null,8,["modelValue","error","disabled"]),e("div",Xs,[e("div",Ys,[t[70]||(t[70]=e("label",{class:"block text-sm font-medium text-gray-700 flex items-center gap-2"},[e("span",{class:"text-base md:text-lg"},"📂"),c(" Kategori Item ")],-1)),M.value?(m(),u("div",Zs,[g(T,{onClick:t[4]||(t[4]=n=>S.value=!1),variant:"secondary",size:"xs",class:P(U.value?"":"ring-2 ring-pink-400")},{icon:_(()=>[...t[66]||(t[66]=[c("📋",-1)])]),default:_(()=>[t[67]||(t[67]=e("span",{class:"hidden xs:inline"},"Pilih",-1))]),_:1},8,["class"]),g(T,{onClick:t[5]||(t[5]=n=>S.value=!0),variant:"secondary",size:"xs",class:P(U.value?"ring-2 ring-pink-400":"")},{icon:_(()=>[...t[68]||(t[68]=[c("➕",-1)])]),default:_(()=>[t[69]||(t[69]=e("span",{class:"hidden xs:inline"},"Baru",-1))]),_:1},8,["class"])])):f("",!0)]),!U.value&&M.value?(m(),u("div",el,[g(H,{modelValue:p(s).item_category,"onUpdate:modelValue":t[6]||(t[6]=n=>p(s).item_category=n),label:"Pilih Kategori",placeholder:"Pilih kategori yang sudah ada",options:A.value,error:p(s).errors.item_category,icon:"📂",disabled:p(s).processing},null,8,["modelValue","options","error","disabled"]),e("p",tl," Pilih dari "+o(v.value.length)+" kategori yang sudah ada ",1)])):(m(),u("div",al,[g(me,{modelValue:p(s).item_category,"onUpdate:modelValue":t[7]||(t[7]=n=>p(s).item_category=n),label:"Kategori Item",placeholder:"Contoh: Perlengkapan Kamar, Dekorasi, Katering, dll.",error:p(s).errors.item_category,icon:"📂",disabled:p(s).processing},null,8,["modelValue","error","disabled"]),M.value?(m(),u("p",sl,[t[71]||(t[71]=c(" Atau ",-1)),e("button",{type:"button",onClick:t[8]||(t[8]=n=>S.value=!1),class:"text-pink-500 hover:text-pink-700 underline"}," pilih dari kategori yang sudah ada ")])):f("",!0)]))]),g(me,{modelValue:p(s).name,"onUpdate:modelValue":t[9]||(t[9]=n=>p(s).name=n),label:"Nama Item",placeholder:"Contoh: Cincin Nikah, Vendor Katering, IMB, Semen Portland",error:p(s).errors.name,icon:"📝",required:"",disabled:p(s).processing},null,8,["modelValue","error","disabled"]),g(ne,{modelValue:p(s).description,"onUpdate:modelValue":t[10]||(t[10]=n=>p(s).description=n),label:"Deskripsi",placeholder:"Deskripsi detail tentang item ini...",error:p(s).errors.description,icon:"📄",disabled:p(s).processing},null,8,["modelValue","error","disabled"]),C.value?(m(),u("div",ll,[e("div",ol,[g(te,{label:"Qty Barang",modelValue:p(s).details.quantity,"onUpdate:modelValue":t[11]||(t[11]=n=>p(s).details.quantity=n),placeholder:"Jumlah barang",icon:"💰",required:"",min:"1",disabled:p(s).processing,onInput:Y},null,8,["modelValue","disabled"]),g(te,{label:"Rencana Biaya",modelValue:p(s).details.unit_price,"onUpdate:modelValue":t[12]||(t[12]=n=>p(s).details.unit_price=n),placeholder:"Harga per unit",icon:"💰",required:"","account-type":"account_number",min:"0",disabled:p(s).processing,onInput:Y},null,8,["modelValue","disabled"])]),e("div",nl,[e("div",dl,[e("div",null,[t[72]||(t[72]=e("p",{class:"text-sm font-medium text-gray-700"},"Total Rencana Biaya:",-1)),e("p",rl,o(p(s).details.quantity||0)+" × "+o(O(p(s).details.unit_price||0)),1)]),e("div",il,[e("p",ml,o(O($.value)),1),t[73]||(t[73]=e("p",{class:"text-xs text-gray-500"},"Terhitung otomatis",-1))])])]),F(e("input",{type:"hidden","onUpdate:modelValue":t[13]||(t[13]=n=>p(s).planned_amount=n)},null,512),[[Z,p(s).planned_amount]])])):(m(),u("div",ul,[g(te,{modelValue:p(s).planned_amount,"onUpdate:modelValue":t[14]||(t[14]=n=>p(s).planned_amount=n),label:"Rencana Biaya",placeholder:"Biaya yang direncanakan",error:p(s).errors.planned_amount,icon:"💰","account-type":"account_number",disabled:p(s).processing},null,8,["modelValue","error","disabled"])])),F(e("input",{type:"hidden","onUpdate:modelValue":t[15]||(t[15]=n=>p(s).actual_spent=n)},null,512),[[Z,p(s).actual_spent]]),g(H,{modelValue:p(s).status,"onUpdate:modelValue":t[16]||(t[16]=n=>p(s).status=n),label:"Status Item",placeholder:"Pilih status item",options:D,error:p(s).errors.status,icon:"🟢",required:"",disabled:p(s).processing},null,8,["modelValue","error","disabled"]),E.value.length>0?(m(),u("div",cl,[e("div",pl,[t[74]||(t[74]=e("h4",{class:"font-semibold text-gray-800 flex items-center gap-2 text-base md:text-lg mb-3 md:mb-4"},[e("span",null,"✨"),c(" Detail Tambahan ")],-1)),e("div",xl,[(m(!0),u(G,null,R(E.value,n=>(m(),u("div",{key:n.key,class:"space-y-2"},[n.type==="radio"?(m(),u("div",gl,[e("label",bl,[e("span",yl,o(n.icon),1),c(" "+o(n.label),1)]),e("div",vl,[(m(!0),u(G,null,R(n.options,d=>(m(),u("label",{key:d.value,class:P(["flex items-center space-x-2 cursor-pointer p-2 md:p-3 rounded-lg md:rounded-xl border-2 transition-all",p(s).details[n.key]===d.value?"border-pink-400 bg-pink-50 shadow-sm":"border-gray-200 hover:border-pink-200"])},[F(e("input",{type:"radio",value:d.value,"onUpdate:modelValue":l=>p(s).details[n.key]=l,class:"text-pink-500 focus:ring-pink-400"},null,8,fl),[[he,p(s).details[n.key]]]),e("span",hl,o(d.label),1)],2))),128))])])):n.type==="select"?(m(),u("div",kl,[e("label",_l,[e("span",wl,o(n.icon),1),c(" "+o(n.label),1)]),F(e("select",{"onUpdate:modelValue":d=>p(s).details[n.key]=d,class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all bg-white text-sm"},[e("option",$l,"Pilih "+o(n.label.toLowerCase()),1),(m(!0),u(G,null,R(n.options,d=>(m(),u("option",{key:d.value,value:d.value},o(d.label),9,Il))),128))],8,jl),[[ke,p(s).details[n.key]]])])):n.type==="text"||n.type==="url"?(m(),u("div",Vl,[e("label",Pl,[e("span",Cl,o(n.icon),1),c(" "+o(n.label),1)]),F(e("input",{type:n.type,"onUpdate:modelValue":d=>p(s).details[n.key]=d,placeholder:n.placeholder||`Masukkan ${n.label.toLowerCase()}`,class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all text-sm"},null,8,Tl),[[_e,p(s).details[n.key]]])])):n.type==="textarea"?(m(),u("div",Sl,[e("label",Ml,[e("span",Dl,o(n.icon),1),c(" "+o(n.label),1)]),F(e("textarea",{"onUpdate:modelValue":d=>p(s).details[n.key]=d,placeholder:n.placeholder||`Masukkan ${n.label.toLowerCase()}`,rows:"3",class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all resize-none text-sm"},null,8,Bl),[[Z,p(s).details[n.key]]])])):n.type==="number"?(m(),u("div",Ul,[e("label",Al,[e("span",ql,o(n.icon),1),c(" "+o(n.label),1)]),F(e("input",{type:"number","onUpdate:modelValue":d=>p(s).details[n.key]=d,placeholder:n.placeholder||`Masukkan ${n.label.toLowerCase()}`,class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all text-sm"},null,8,El),[[Z,p(s).details[n.key]]])])):n.type==="date"?(m(),u("div",Ol,[e("label",Fl,[e("span",Ll,o(n.icon),1),c(" "+o(n.label),1)]),F(e("input",{type:"date","onUpdate:modelValue":d=>p(s).details[n.key]=d,class:"w-full px-3 md:px-4 py-2 md:py-3 rounded-xl md:rounded-2xl border border-gray-300 focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all text-sm"},null,8,Kl),[[Z,p(s).details[n.key]]])])):f("",!0)]))),128))])])])):f("",!0),t[76]||(t[76]=e("div",{class:"p-3 md:p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl md:rounded-2xl border border-blue-200"},[e("p",{class:"text-xs md:text-sm text-gray-700 flex items-start gap-2"},[e("span",{class:"text-base md:text-lg mt-0.5"},"💡"),e("span",null,[e("strong",{class:"block"},"Jenis Item:"),c(" • "),e("strong",null,"Barang 🛍️"),c(": Physical goods yang dibeli (hitung otomatis dari quantity × harga satuan)"),e("br"),c(" • "),e("strong",null,"Jasa 👨‍💼"),c(": Services dari vendor/penyedia jasa"),e("br"),c(" • "),e("strong",null,"Dokumen 📄"),c(": Legal documents dan surat-surat"),e("br"),c(" • "),e("strong",null,"Tugas ✅"),c(": Tasks dan pekerjaan yang perlu diselesaikan"),e("br"),c(" • "),e("strong",null,"Material 🏗️"),c(": Bahan bangunan dan material konstruksi (hitung otomatis dari quantity × harga satuan) ")])])],-1)),p(s).hasErrors?(m(),u("div",zl,[...t[75]||(t[75]=[e("p",{class:"text-xs md:text-sm text-red-600 flex items-center gap-2"},[e("span",null,"⚠️"),c(" Terdapat kesalahan dalam pengisian form. Silakan periksa kembali input Anda. ")],-1)])])):f("",!0)])]),_:1},8,["show","description","confirm-loading"])])])]),_:1},8,["title"]))}},ao=ae(Jl,[["__scopeId","data-v-ebe01b20"]]);export{ao as default};
