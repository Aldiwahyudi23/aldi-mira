import{I,r as m,t as J,p as C,M as W,c as r,g as a,e as X,d as t,l as g,b as u,f as s,z as K,O as N,x as p,w as o,s as T,k as w,F as Q,y as Y,D as $}from"./vendor-D_AUDOEP.js";import{B as c,a as q}from"./BaseModal-9V5i1c82.js";import{_ as L}from"./TextInput-CECDkQeb.js";import"./app-drKAwCSa.js";/* empty css            */const Z={class:"p-3 md:p-4"},ee={class:"mb-3 md:mb-4"},te={key:0,class:"text-base md:text-lg font-semibold text-gray-800 flex items-center gap-2"},ae={key:1,class:"text-base md:text-lg font-semibold text-gray-800 flex items-center gap-2"},se={key:2,class:"text-base md:text-lg font-semibold text-gray-800 flex items-center gap-2"},oe={key:0},ne={key:0,class:"space-y-3 md:space-y-4"},re={class:"p-3 md:p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl md:rounded-2xl border border-blue-200"},le={key:0,class:"text-sm md:text-base text-gray-700 font-medium flex items-start gap-2"},de={key:1,class:"text-sm md:text-base text-gray-700 font-medium flex items-start gap-2"},ie={class:"text-center"},ue={class:"inline-block p-3 md:p-4 bg-white rounded-xl md:rounded-2xl border border-gray-200 shadow-lg"},me=["innerHTML"],pe={key:0,class:"p-3 md:p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl md:rounded-2xl border border-green-200"},ce={class:"bg-white/80 p-3 md:p-4 rounded-lg md:rounded-xl border border-gray-200"},ge={class:"text-xs md:text-sm font-mono text-gray-800 break-all"},xe={key:1,class:"space-y-2 md:space-y-3"},ke={key:1,class:"mt-3 md:mt-4"},fe={class:"flex flex-col sm:flex-row gap-2 md:gap-3 mt-4 md:mt-5 pt-3 md:pt-4 border-t border-gray-100"},ve={key:0,class:"flex-1"},be={key:1,class:"flex flex-col sm:flex-row gap-2 md:gap-3 w-full"},ye={class:"space-y-4 md:space-y-6"},we={class:"text-center"},he={class:"inline-block p-4 bg-white rounded-2xl border border-gray-200 shadow-lg"},Ae=["innerHTML"],Ce={key:0,class:"p-3 md:p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl md:rounded-2xl border border-green-200"},_e={class:"bg-white/80 p-3 md:p-4 rounded-lg md:rounded-xl border border-gray-200"},Se={class:"text-xs md:text-sm font-mono text-gray-800 break-all"},Fe={class:"space-y-4 md:space-y-6"},Ke={class:"grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-3 max-h-60 overflow-y-auto p-2"},Te={class:"flex gap-2 md:gap-3"},Qe={__name:"TwoFactorAuthenticationForm",props:{requiresConfirmation:Boolean},setup(D){const P=D,_=I().props.auth.user,U=_?.theme?JSON.parse(_.theme):null,h=m(!1),l=m(!1),S=m(!1),b=m(null),x=m(null),y=m([]),k=m(!1),f=m(!1),d=J({code:""}),F=C(()=>{const n=U?.button;if(n?.from&&n?.to&&n?.shade_from&&n?.shade_to){const e=`bg-gradient-to-r from-${n.from}-${n.shade_from} to-${n.to}-${n.shade_to}`,i=n.text_color||"text-white";return`${e} ${i}`}return"bg-gradient-to-r from-pink-300 to-sky-300 text-white"});C(()=>"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"),C(()=>"bg-gradient-to-r from-red-400 to-red-500 text-white hover:from-red-500 hover:to-red-600");const v=C(()=>!h.value&&_?.two_factor_enabled);W(v,()=>{v.value||(d.reset(),d.clearErrors())});const z=()=>{h.value=!0,$.post(route("two-factor.enable"),{},{preserveScroll:!0,onSuccess:()=>Promise.all([H(),E(),M()]),onFinish:()=>{h.value=!1,l.value=P.requiresConfirmation,l.value&&(f.value=!0)}})},H=()=>axios.get(route("two-factor.qr-code")).then(n=>{b.value=n.data.svg}),E=()=>axios.get(route("two-factor.secret-key")).then(n=>{x.value=n.data.secretKey}),M=()=>axios.get(route("two-factor.recovery-codes")).then(n=>{y.value=n.data}),A=()=>{d.post(route("two-factor.confirm"),{errorBag:"confirmTwoFactorAuthentication",preserveScroll:!0,preserveState:!0,onSuccess:()=>{l.value=!1,b.value=null,x.value=null,f.value=!1}})},V=()=>{axios.post(route("two-factor.recovery-codes")).then(()=>{M(),k.value=!0})},j=()=>{S.value=!0,$.delete(route("two-factor.disable"),{preserveScroll:!0,onSuccess:()=>{S.value=!1,l.value=!1,f.value=!1,k.value=!1}})},O=()=>{k.value=!0},B=()=>{f.value=!1,l.value&&j()},R=()=>{k.value=!1};return(n,e)=>(a(),r(Q,null,[e[31]||(e[31]=X('<div class="bg-gradient-to-r from-purple-500/10 to-indigo-500/10 py-4 md:py-6 px-3 md:px-4 border-b border-purple-100"><div class="text-center"><div class="inline-flex items-center justify-center w-12 h-12 md:w-16 md:h-16 bg-gradient-to-r from-purple-400 to-indigo-400 rounded-full mb-3 md:mb-4 shadow-lg"><span class="text-xl md:text-2xl text-white">ğŸ”</span></div><h2 class="text-lg md:text-2xl font-bold text-gray-800 mb-2">Autentikasi Dua Faktor</h2><p class="text-gray-600 text-sm md:text-base flex items-center justify-center gap-1 md:gap-2"><span class="text-purple-400 text-sm md:text-base">ğŸ›¡ï¸</span> Tambahkan keamanan tambahan ke akun Anda menggunakan autentikasi dua faktor </p></div></div>',1)),t("div",Z,[t("div",ee,[v.value&&!l.value?(a(),r("h3",te,[...e[4]||(e[4]=[t("span",{class:"text-green-500 text-lg md:text-xl"},"âœ…",-1),s(" Anda telah mengaktifkan autentikasi dua faktor. ",-1)])])):v.value&&l.value?(a(),r("h3",ae,[...e[5]||(e[5]=[t("span",{class:"text-amber-500 text-lg md:text-xl"},"â³",-1),s(" Selesaikan pengaktifan autentikasi dua faktor. ",-1)])])):(a(),r("h3",se,[...e[6]||(e[6]=[t("span",{class:"text-gray-500 text-lg md:text-xl"},"ğŸ”’",-1),s(" Anda belum mengaktifkan autentikasi dua faktor. ",-1)])])),e[7]||(e[7]=t("div",{class:"mt-2 text-xs md:text-sm text-gray-600"},[t("p",{class:"flex items-start gap-2"},[t("span",{class:"text-purple-400 mt-0.5"},"ğŸ’¡"),t("span",null," Ketika autentikasi dua faktor diaktifkan, Anda akan diminta untuk memasukkan token acak yang aman selama autentikasi. Anda dapat mengambil token ini dari aplikasi Google Authenticator di ponsel Anda. ")])],-1))]),v.value?(a(),r("div",oe,[b.value?(a(),r("div",ne,[t("div",re,[l.value?(a(),r("p",le,[...e[8]||(e[8]=[t("span",{class:"text-blue-500 text-lg mt-0.5"},"ğŸ“±",-1),t("span",null,"Untuk menyelesaikan pengaktifan autentikasi dua faktor, pindai kode QR berikut menggunakan aplikasi autentikator di ponsel Anda atau masukkan kunci setup dan berikan kode OTP yang dihasilkan.",-1)])])):(a(),r("p",de,[...e[9]||(e[9]=[t("span",{class:"text-blue-500 text-lg mt-0.5"},"âœ…",-1),t("span",null,"Autentikasi dua faktor sekarang telah diaktifkan. Pindai kode QR berikut menggunakan aplikasi autentikator di ponsel Anda atau masukkan kunci setup.",-1)])]))]),t("div",ie,[t("div",ue,[t("div",{innerHTML:b.value,class:"max-w-[200px] md:max-w-[250px] mx-auto"},null,8,me)])]),x.value?(a(),r("div",pe,[e[10]||(e[10]=t("p",{class:"text-sm md:text-base text-gray-700 font-medium mb-2 flex items-center gap-2"},[t("span",{class:"text-green-500"},"ğŸ”‘"),s(" Kunci Setup: ")],-1)),t("div",ce,[t("code",ge,K(x.value),1)])])):u("",!0),l.value?(a(),r("div",xe,[g(L,{modelValue:p(d).code,"onUpdate:modelValue":e[0]||(e[0]=i=>p(d).code=i),label:"Kode Verifikasi",placeholder:"Masukkan kode 6 digit dari aplikasi",error:p(d).errors.code,icon:"ğŸ”¢",required:"",inputmode:"numeric",autofocus:"",autocomplete:"one-time-code",onKeyup:N(A,["enter"]),class:"max-w-xs mx-auto"},null,8,["modelValue","error"])])):u("",!0)])):u("",!0),y.value.length>0&&!l.value?(a(),r("div",ke,[...e[11]||(e[11]=[t("div",{class:"p-3 md:p-4 bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl md:rounded-2xl border border-amber-200"},[t("p",{class:"text-sm md:text-base text-gray-700 font-medium flex items-start gap-2"},[t("span",{class:"text-amber-500 text-lg mt-0.5"},"ğŸ’¾"),t("span",null,"Simpan kode pemulihan ini di pengelola kata sandi yang aman. Mereka dapat digunakan untuk memulihkan akses ke akun Anda jika perangkat autentikasi dua faktor hilang.")])],-1)])])):u("",!0)])):u("",!0),t("div",fe,[v.value?(a(),r("div",be,[l.value?(a(),w(c,{key:0,onClick:A,loading:p(d).processing,class:T([F.value,"flex-1 justify-center"])},{icon:o(()=>[...e[14]||(e[14]=[s("âœ…",-1)])]),default:o(()=>[e[15]||(e[15]=s(" Konfirmasi ",-1))]),_:1},8,["loading","class"])):u("",!0),y.value.length>0&&!l.value?(a(),w(c,{key:1,onClick:V,variant:"secondary",class:"flex-1 justify-center"},{icon:o(()=>[...e[16]||(e[16]=[s("ğŸ”„",-1)])]),default:o(()=>[e[17]||(e[17]=s(" Regenerasi Kode ",-1))]),_:1})):u("",!0),y.value.length===0&&!l.value?(a(),w(c,{key:2,onClick:O,variant:"secondary",class:"flex-1 justify-center"},{icon:o(()=>[...e[18]||(e[18]=[s("ğŸ‘ï¸",-1)])]),default:o(()=>[e[19]||(e[19]=s(" Lihat Kode ",-1))]),_:1})):u("",!0),l.value?(a(),w(c,{key:3,onClick:B,variant:"secondary",class:"flex-1 justify-center"},{icon:o(()=>[...e[20]||(e[20]=[s("â†©ï¸",-1)])]),default:o(()=>[e[21]||(e[21]=s(" Batal ",-1))]),_:1})):u("",!0),l.value?u("",!0):(a(),w(c,{key:4,onClick:j,loading:S.value,variant:"danger",class:"flex-1 justify-center"},{icon:o(()=>[...e[22]||(e[22]=[s("ğŸš«",-1)])]),default:o(()=>[e[23]||(e[23]=s(" Nonaktifkan ",-1))]),_:1},8,["loading"]))])):(a(),r("div",ve,[g(c,{onClick:z,loading:h.value,class:T([F.value,"w-full justify-center"])},{icon:o(()=>[...e[12]||(e[12]=[s("ğŸ”",-1)])]),default:o(()=>[e[13]||(e[13]=s(" Aktifkan 2FA ",-1))]),_:1},8,["loading","class"])]))])]),g(q,{show:f.value,"onUpdate:show":e[2]||(e[2]=i=>f.value=i),title:"Setup Autentikasi Dua Faktor",description:"Scan QR code dan masukkan kode verifikasi untuk mengaktifkan 2FA",icon:"ğŸ“±","confirm-text":"Konfirmasi","confirm-loading":p(d).processing,"show-cancel":!0,"cancel-text":"Batal",onConfirm:A,onClose:B,size:"md"},{default:o(()=>[t("div",ye,[t("div",we,[t("div",he,[t("div",{innerHTML:b.value,class:"max-w-[200px] md:max-w-[250px] mx-auto"},null,8,Ae)])]),x.value?(a(),r("div",Ce,[e[24]||(e[24]=t("p",{class:"text-sm md:text-base text-gray-700 font-medium mb-2 flex items-center gap-2"},[t("span",{class:"text-green-500"},"ğŸ”‘"),s(" Kunci Setup: ")],-1)),t("div",_e,[t("code",Se,K(x.value),1)])])):u("",!0),g(L,{modelValue:p(d).code,"onUpdate:modelValue":e[1]||(e[1]=i=>p(d).code=i),label:"Kode Verifikasi 2FA",placeholder:"Masukkan kode 6 digit dari aplikasi",error:p(d).errors.code,icon:"ğŸ”¢",required:"",inputmode:"numeric",autofocus:"",autocomplete:"one-time-code",onKeyup:N(A,["enter"])},null,8,["modelValue","error"]),e[25]||(e[25]=t("div",{class:"p-3 md:p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl md:rounded-2xl border border-blue-200"},[t("p",{class:"text-xs md:text-sm text-gray-600 flex items-start gap-2"},[t("span",{class:"text-blue-500 text-base mt-0.5"},"ğŸ’¡"),t("span",null,"Download aplikasi Google Authenticator atau Authy di smartphone Anda, scan QR code di atas, lalu masukkan kode 6 digit yang muncul di aplikasi.")])],-1))])]),_:1},8,["show","confirm-loading"]),g(q,{show:k.value,"onUpdate:show":e[3]||(e[3]=i=>k.value=i),title:"Kode Pemulihan 2FA",description:"Simpan kode-kode ini di tempat yang aman untuk memulihkan akses akun",icon:"ğŸ’¾","confirm-text":"Tutup","show-cancel":!1,onConfirm:R,size:"md"},{default:o(()=>[t("div",Fe,[e[30]||(e[30]=t("div",{class:"p-3 md:p-4 bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl md:rounded-2xl border border-amber-200"},[t("p",{class:"text-sm md:text-base text-gray-700 font-medium flex items-start gap-2"},[t("span",{class:"text-amber-500 text-lg mt-0.5"},"âš ï¸"),t("span",null,"Simpan kode pemulihan ini di pengelola kata sandi yang aman. Mereka dapat digunakan untuk memulihkan akses ke akun Anda jika perangkat autentikasi dua faktor hilang.")])],-1)),t("div",Ke,[(a(!0),r(Q,null,Y(y.value,(i,G)=>(a(),r("div",{key:G,class:"p-2 md:p-3 bg-white rounded-lg md:rounded-xl border border-gray-200 text-center font-mono text-xs md:text-sm text-gray-800 break-all"},K(i),1))),128))]),t("div",Te,[g(c,{onClick:V,variant:"secondary",class:"flex-1 justify-center"},{icon:o(()=>[...e[26]||(e[26]=[s("ğŸ”„",-1)])]),default:o(()=>[e[27]||(e[27]=s(" Regenerasi ",-1))]),_:1}),g(c,{onClick:R,class:T([F.value,"flex-1 justify-center"])},{icon:o(()=>[...e[28]||(e[28]=[s("âœ…",-1)])]),default:o(()=>[e[29]||(e[29]=s(" Tutup ",-1))]),_:1},8,["class"])])])]),_:1},8,["show"])],64))}};export{Qe as default};
