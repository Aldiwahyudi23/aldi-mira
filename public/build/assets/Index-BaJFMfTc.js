import{A as oe}from"./AppLayout-C9Lt9nJP.js";import{I as de,r as b,L as ue,t as L,p as y,o as ie,k as O,g as k,w as o,d as e,c as C,b as w,l as u,s as V,z as r,f as d,x as l,D as ce}from"./vendor-CaulYgOW.js";import{_ as T,a as pe}from"./BaseCard-B18XuVDn.js";import{_ as E,B as U,S as me}from"./SelectInput-CCmOdJSq.js";import{_ as ge}from"./TextInput-X0I6SgWH.js";import{_ as F}from"./AccountInput-DNx9eD28.js";import{_ as xe}from"./app-BXVwXSr1.js";/* empty css            */const be={class:"py-2 min-h-screen relative overflow-hidden"},ve={class:"w-full px-4 sm:px-6 lg:px-8 relative z-10"},fe={class:"flex items-center justify-between"},ye={class:"flex items-center gap-3"},ke={class:"text-xl"},_e={class:"font-medium"},Ae={class:"grid grid-cols-2 lg:grid-cols-4 gap-2 mb-4"},he={class:"p-4"},we={class:"text-xl font-bold text-gray-800 mb-1"},Se={class:"p-4"},Be={class:"text-xl font-bold text-gray-800 mb-1"},Ce={class:"text-xs text-gray-500 mt-1"},De={class:"p-4"},Me={class:"text-xl font-bold text-gray-800 mb-1"},Ve={class:"text-xs text-gray-500 mt-1"},Te={class:"p-4"},Ee={class:"text-xl font-bold text-gray-800 mb-1"},Pe={class:"flex items-center gap-2"},je={class:"text-lg"},Ue={class:"font-medium text-gray-700 text-sm"},$e={class:"flex items-center gap-2"},Ie={class:"flex items-center gap-2"},Ne={class:"text-lg"},ze={class:"flex items-center gap-2"},He={class:"font-medium text-gray-700 text-sm"},Ke={key:1,class:"text-center mt-6"},qe={class:"bg-white/80 backdrop-blur-md rounded-3xl shadow-lg p-8 border border-gray-100"},Je={class:"space-y-3 max-h-[60vh] overflow-y-auto pr-2"},Le={key:1,class:"p-2 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-2xl"},Oe={class:"space-y-4"},Fe={key:0,class:"p-4 bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200 rounded-2xl"},Ge={class:"grid grid-cols-2 gap-4 text-sm"},Re={class:"font-medium text-gray-800"},Qe={class:"font-medium text-gray-800"},We={class:"font-bold text-green-700"},Xe={class:"font-medium text-gray-800"},Ye={class:"space-y-4"},Ze={key:0,class:"p-4 bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200 rounded-2xl"},ea={class:"grid grid-cols-2 gap-4 text-sm"},aa={class:"font-medium text-gray-800"},ta={class:"font-medium text-gray-800"},sa={class:"font-bold text-green-700"},na={class:"font-medium text-gray-800"},ra={class:"font-medium text-gray-800"},la={__name:"Index",setup(oa){const $=de(),c=$.props.auth.user,G=c?.partner?.name??"Pasangan",I=`${c?.name??""} üíï ${G}`,v=b([]),D=b(!1),M=b(!1),f=b(!1),_=b(!1),S=b(!1),g=b(null),i=b(null),p=b(null),m=b(null);ue(()=>$.props.flash,t=>{(t.success||t.error)&&(m.value={message:t.success||t.error,type:t.type||(t.success?"success":"error")},setTimeout(()=>{m.value=null},5e3))},{immediate:!0});const n=L({name:"",type:"personal",current_balance:0}),x=L({current_balance:0}),R=[{key:"name",label:"Nama Akun",icon:"üè¶",sortable:!0},{key:"type",label:"Tipe",type:"badge",icon:"üë•",sortable:!0,badgeVariant:"romantic"},{key:"current_balance",label:"Saldo",icon:"üí∞",sortable:!0,type:"currency"},{key:"user.name",label:"Dibuat Oleh",icon:"üë§",sortable:!0},{key:"created_at",label:"Dibuat",icon:"üìÖ",sortable:!0,type:"date"}],Q=[{value:"personal",label:"üë§ Personal"},{value:"joint",label:"üë• Joint"}],B=async()=>{D.value=!0;try{const t=await axios.get(route("master-data.accounts.index"));v.value=t.data.accounts||t.data}catch(t){console.error("Error loading accounts:",t),m.value={message:"Gagal memuat data akun",type:"error"}}finally{D.value=!1}},N=()=>{g.value=null,n.reset(),n.type="personal",n.current_balance=0,f.value=!0},z=t=>{if(t.user_id!==c.id){m.value={message:"Anda hanya dapat mengedit akun yang Anda buat",type:"error"};return}g.value=t,n.name=t.name,n.type=t.type,n.current_balance=t.current_balance,f.value=!0},H=t=>{if(t.user_id!==c.id){m.value={message:"Anda hanya dapat menghapus akun yang Anda buat",type:"error"};return}i.value=t,_.value=!0},W=t=>{if(t.user_id!==c.id){m.value={message:"Anda hanya dapat mengubah saldo akun yang Anda buat",type:"error"};return}p.value=t,x.current_balance=t.current_balance,S.value=!0},X=()=>{g.value?n.put(route("master-data.accounts.update",g.value.id),{preserveScroll:!0,onSuccess:()=>{f.value=!1,B(),n.reset(),g.value=null},onError:t=>{console.error("Update error:",t)}}):n.post(route("master-data.accounts.store"),{preserveScroll:!0,onSuccess:()=>{f.value=!1,B(),n.reset()},onError:t=>{console.error("Create error:",t)}})},Y=()=>{p.value&&x.put(route("master-data.accounts.update-balance",p.value.id),{preserveScroll:!0,onSuccess:()=>{S.value=!1,B(),x.reset(),p.value=null},onError:t=>{console.error("Balance update error:",t)}})},Z=()=>{i.value&&(M.value=!0,ce.delete(route("master-data.accounts.destroy",i.value.id),{preserveScroll:!0,onSuccess:()=>{_.value=!1,B(),i.value=null,M.value=!1},onError:t=>{console.error("Delete error:",t),_.value=!1,M.value=!1}}))},ee=()=>{f.value=!1,g.value=null,n.clearErrors(),n.reset()},ae=()=>{S.value=!1,p.value=null,x.clearErrors(),x.reset()},P=t=>({personal:"Personal",joint:"Joint"})[t]||t,te=t=>({personal:"üë§",joint:"üë•"})[t]||"üè¶",A=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t),j=t=>new Date(t).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),K=y(()=>v.value.filter(t=>t.type==="personal")),q=y(()=>v.value.filter(t=>t.type==="joint")),se=y(()=>v.value.filter(t=>t.user_id===c.id));y(()=>v.value.filter(t=>t.user_id!==c.id&&t.type==="joint"));const ne=y(()=>v.value.reduce((t,a)=>t+parseFloat(a.current_balance),0)),re=y(()=>K.value.reduce((t,a)=>t+parseFloat(a.current_balance),0)),le=y(()=>q.value.reduce((t,a)=>t+parseFloat(a.current_balance),0)),h=t=>t.user_id===c.id;return ie(()=>{B()}),(t,a)=>(k(),O(oe,{title:"Kelola Akun"},{header:o(()=>[e("div",{class:"flex items-center justify-between"},[e("h2",{class:"font-semibold text-2xl text-gray-800 leading-tight flex items-center gap-2"}," üè¶ Kelola Akun Keuangan "+r(I)),a[9]||(a[9]=e("span",{class:"text-sm text-gray-500 italic"},"Atur akun untuk mengelola keuangan bersama üíû",-1))])]),default:o(()=>[e("div",be,[e("div",ve,[m.value?(k(),C("div",{key:0,class:V(["mb-6 p-4 rounded-2xl border backdrop-blur-sm transition-all duration-300",{"bg-green-50 border-green-200 text-green-800":m.value.type==="success","bg-red-50 border-red-200 text-red-800":m.value.type==="error"}])},[e("div",fe,[e("div",ye,[e("span",ke,r(m.value.type==="success"?"‚úÖ":"‚ö†Ô∏è"),1),e("span",_e,r(m.value.message),1)]),e("button",{onClick:a[0]||(a[0]=s=>m.value=null),class:"text-gray-500 hover:text-gray-700 transition-colors"}," ‚úï ")])],2)):w("",!0),a[43]||(a[43]=e("div",{class:"text-center mb-4"},[e("h1",{class:"text-3xl md:text-4xl font-extrabold text-rose-600 drop-shadow-md mb-3"}," Kelola Akun Keuangan "),e("p",{class:"text-gray-600 text-lg max-w-2xl mx-auto"},[d(" Kelola semua akun keuangan "),e("span",{class:"text-blue-500 font-semibold"},"personal"),d(" dan "),e("span",{class:"text-green-500 font-semibold"},"joint"),d(" kita berdua. Pantau saldo dan atur akses untuk keuangan yang lebih transparan üí´ ")])],-1)),e("div",Ae,[u(T,{class:"text-center hover:scale-[1.02] transition transform border border-rose-100"},{default:o(()=>[e("div",he,[a[10]||(a[10]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-rose-400 to-pink-500 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md"},[e("span",{class:"text-xl text-white"},"üí∞")],-1)),e("h3",we,r(A(ne.value)),1),a[11]||(a[11]=e("p",{class:"text-sm text-gray-600"},"Total Saldo",-1))])]),_:1}),u(T,{class:"text-center hover:scale-[1.02] transition transform border border-blue-100"},{default:o(()=>[e("div",Se,[a[12]||(a[12]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md"},[e("span",{class:"text-xl text-white"},"üë§")],-1)),e("h3",Be,r(K.value.length),1),a[13]||(a[13]=e("p",{class:"text-sm text-gray-600"},"Personal",-1)),e("p",Ce,r(A(re.value)),1)])]),_:1}),u(T,{class:"text-center hover:scale-[1.02] transition transform border border-green-100"},{default:o(()=>[e("div",De,[a[14]||(a[14]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-green-400 to-emerald-500 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md"},[e("span",{class:"text-xl text-white"},"üë•")],-1)),e("h3",Me,r(q.value.length),1),a[15]||(a[15]=e("p",{class:"text-sm text-gray-600"},"Joint",-1)),e("p",Ve,r(A(le.value)),1)])]),_:1}),u(T,{class:"text-center hover:scale-[1.02] transition transform border border-purple-100"},{default:o(()=>[e("div",Te,[a[16]||(a[16]=e("div",{class:"w-12 h-12 bg-gradient-to-r from-purple-400 to-pink-500 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md"},[e("span",{class:"text-xl text-white"},"üìä")],-1)),e("h3",Ee,r(se.value.length),1),a[17]||(a[17]=e("p",{class:"text-sm text-gray-600"},"Akun Saya",-1))])]),_:1})]),u(pe,{title:"Data Akun",description:"Kelola semua akun keuangan kita berdua",columns:R,data:v.value,loading:D.value,"show-actions":!0,pagination:!0,"items-per-page":10,onCreate:N,onEdit:z,onDelete:H},{"column-type":o(({item:s})=>[e("div",Pe,[e("span",je,r(te(s.type)),1),e("span",Ue,r(P(s.type)),1)])]),"column-current_balance":o(({item:s})=>[e("div",$e,[e("span",{class:V(["text-lg",s.current_balance>=0?"text-green-600":"text-red-600"])},r(s.current_balance>=0?"üí∞":"üí∏"),3),e("span",{class:V(["font-bold text-gray-800 text-sm",s.current_balance>=0?"text-green-700":"text-red-700"])},r(A(s.current_balance)),3)])]),"column-user.name":o(({item:s})=>[e("div",Ie,[e("span",Ne,r(s.user_id===l(c).id?"üë§":"üë•"),1),e("span",{class:V(["font-medium text-gray-700 text-sm",s.user_id===l(c).id?"text-blue-600":"text-green-600"])},r(s.user_id===l(c).id?"Saya":s.user?.name||"Partner"),3)])]),"column-created_at":o(({item:s})=>[e("div",ze,[a[18]||(a[18]=e("span",{class:"text-lg"},"üìÖ",-1)),e("span",He,r(j(s.created_at)),1)])]),actions:o(({item:s})=>[u(E,{onClick:J=>W(s),variant:"primary",size:"sm",class:"!px-2 !py-2",disabled:!h(s),title:h(s)?"Update saldo":"Hanya dapat mengubah saldo akun yang Anda buat"},{icon:o(()=>[...a[19]||(a[19]=[d("üí∞",-1)])]),default:o(()=>[a[20]||(a[20]=d(" Saldo ",-1))]),_:1},8,["onClick","disabled","title"]),u(E,{onClick:J=>z(s),variant:"secondary",size:"sm",class:"!px-2 !py-2",disabled:!h(s),title:h(s)?"Edit akun":"Hanya dapat mengedit akun yang Anda buat"},{icon:o(()=>[...a[21]||(a[21]=[d("‚úèÔ∏è",-1)])]),default:o(()=>[a[22]||(a[22]=d(" Edit ",-1))]),_:1},8,["onClick","disabled","title"]),u(E,{onClick:J=>H(s),variant:"danger",size:"sm",class:"!px-2 !py-2",disabled:!h(s),title:h(s)?"Hapus akun":"Hanya dapat menghapus akun yang Anda buat"},{icon:o(()=>[...a[23]||(a[23]=[d("üóëÔ∏è",-1)])]),default:o(()=>[a[24]||(a[24]=d(" Hapus ",-1))]),_:1},8,["onClick","disabled","title"])]),_:1},8,["data","loading"]),v.value.length===0&&!D.value?(k(),C("div",Ke,[e("div",qe,[a[27]||(a[27]=e("div",{class:"text-6xl mb-4"},"üè¶",-1)),a[28]||(a[28]=e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},"Belum ada akun",-1)),e("p",{class:"text-gray-600 mb-6 max-w-md mx-auto"}," Mulai dengan membuat akun pertama untuk mengelola keuangan "+r(I)),u(E,{onClick:N,class:"px-6 py-3"},{icon:o(()=>[...a[25]||(a[25]=[d("‚ûï",-1)])]),default:o(()=>[a[26]||(a[26]=d(" Buat Akun Pertama ",-1))]),_:1})])])):w("",!0),u(U,{show:f.value,"onUpdate:show":a[4]||(a[4]=s=>f.value=s),title:g.value?"Edit Akun":"Tambah Akun Baru",description:g.value?"Perbarui informasi akun keuangan kita":"Tambahkan akun baru untuk mengelola keuangan bersama",icon:g.value?"‚úèÔ∏è":"‚ûï","confirm-text":g.value?"Perbarui":"Simpan","confirm-loading":l(n).processing,onConfirm:X,onClose:ee,size:"lg"},{default:o(()=>[e("div",Je,[u(ge,{modelValue:l(n).name,"onUpdate:modelValue":a[1]||(a[1]=s=>l(n).name=s),label:"Nama Akun",placeholder:"Contoh: BCA Pribadi, Mandiri Bersama, Kas Tunai",error:l(n).errors.name,icon:"üè¶",required:"",disabled:l(n).processing},null,8,["modelValue","error","disabled"]),u(me,{modelValue:l(n).type,"onUpdate:modelValue":a[2]||(a[2]=s=>l(n).type=s),label:"Tipe Akun",placeholder:"Pilih tipe akun",options:Q,error:l(n).errors.type,icon:"üë•",required:"",disabled:l(n).processing},null,8,["modelValue","error","disabled"]),g.value?w("",!0):(k(),O(F,{key:0,modelValue:l(n).current_balance,"onUpdate:modelValue":a[3]||(a[3]=s=>l(n).current_balance=s),label:"Saldo Awal",placeholder:"Masukkan saldo awal",error:l(n).errors.current_balance,icon:"üí∞","account-type":"account_number",required:"",disabled:l(n).processing},null,8,["modelValue","error","disabled"])),a[30]||(a[30]=e("div",{class:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-200"},[e("p",{class:"text-sm text-gray-700 flex items-start gap-2"},[e("span",{class:"text-lg mt-0.5"},"üí°"),e("span",null,[e("strong",{class:"block"},"Informasi:"),d(" ‚Ä¢ "),e("strong",null,"Personal:"),d(" Hanya Anda yang bisa melihat dan mengelola"),e("br"),d(" ‚Ä¢ "),e("strong",null,"Joint:"),d(" Bisa dilihat dan digunakan oleh Anda dan partner ")])])],-1)),l(n).hasErrors?(k(),C("div",Le,[...a[29]||(a[29]=[e("p",{class:"text-sm text-red-600 flex items-center gap-2"},[e("span",null,"‚ö†Ô∏è"),d(" Terdapat kesalahan dalam pengisian form. Silakan periksa kembali input Anda. ")],-1)])])):w("",!0)])]),_:1},8,["show","title","description","icon","confirm-text","confirm-loading"]),u(U,{show:S.value,"onUpdate:show":a[6]||(a[6]=s=>S.value=s),title:"Update Saldo Akun",description:p.value?`Update saldo untuk akun ${p.value.name}`:"Update saldo akun",icon:"üí∞","confirm-text":"Update Saldo","cancel-text":"Batal","confirm-loading":l(x).processing,onConfirm:Y,onClose:ae,size:"md"},{default:o(()=>[e("div",Oe,[u(F,{modelValue:l(x).current_balance,"onUpdate:modelValue":a[5]||(a[5]=s=>l(x).current_balance=s),label:"Saldo Baru",placeholder:"Masukkan saldo baru",error:l(x).errors.current_balance,icon:"üí∞","account-type":"account_number",required:"",disabled:l(x).processing},null,8,["modelValue","error","disabled"]),p.value?(k(),C("div",Fe,[a[35]||(a[35]=e("h4",{class:"font-semibold text-gray-800 mb-2"},"Detail Akun:",-1)),e("div",Ge,[e("div",null,[a[31]||(a[31]=e("span",{class:"text-gray-600"},"Nama:",-1)),e("p",Re,r(p.value.name),1)]),e("div",null,[a[32]||(a[32]=e("span",{class:"text-gray-600"},"Tipe:",-1)),e("p",Qe,r(P(p.value.type)),1)]),e("div",null,[a[33]||(a[33]=e("span",{class:"text-gray-600"},"Saldo Saat Ini:",-1)),e("p",We,r(A(p.value.current_balance)),1)]),e("div",null,[a[34]||(a[34]=e("span",{class:"text-gray-600"},"Dibuat:",-1)),e("p",Xe,r(j(p.value.created_at)),1)])])])):w("",!0)])]),_:1},8,["show","description","confirm-loading"]),u(U,{show:_.value,"onUpdate:show":a[7]||(a[7]=s=>_.value=s),title:"Hapus Akun",description:i.value?`Apakah Anda yakin ingin menghapus akun ${i.value.name}?`:"Apakah Anda yakin ingin menghapus akun ini?",icon:"üóëÔ∏è","confirm-text":"Hapus","cancel-text":"Batal","confirm-variant":"danger","confirm-loading":M.value,onConfirm:Z,onClose:a[8]||(a[8]=s=>_.value=!1)},{default:o(()=>[e("div",Ye,[a[42]||(a[42]=e("div",{class:"p-4 bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-2xl"},[e("p",{class:"text-sm text-red-600 flex items-start gap-2"},[e("span",{class:"text-lg mt-0.5"},"‚ö†Ô∏è"),e("span",null,[e("strong",{class:"block"},"Tindakan ini tidak dapat dibatalkan!"),d(" Semua data transaksi yang terkait dengan akun ini akan terpengaruh. Pastikan tidak ada transaksi yang menggunakan akun ini. ")])])],-1)),i.value?(k(),C("div",Ze,[a[41]||(a[41]=e("h4",{class:"font-semibold text-gray-800 mb-2"},"Detail Akun:",-1)),e("div",ea,[e("div",null,[a[36]||(a[36]=e("span",{class:"text-gray-600"},"Nama:",-1)),e("p",aa,r(i.value.name),1)]),e("div",null,[a[37]||(a[37]=e("span",{class:"text-gray-600"},"Tipe:",-1)),e("p",ta,r(P(i.value.type)),1)]),e("div",null,[a[38]||(a[38]=e("span",{class:"text-gray-600"},"Saldo:",-1)),e("p",sa,r(A(i.value.current_balance)),1)]),e("div",null,[a[39]||(a[39]=e("span",{class:"text-gray-600"},"Dibuat:",-1)),e("p",na,r(j(i.value.created_at)),1)]),e("div",null,[a[40]||(a[40]=e("span",{class:"text-gray-600"},"Dibuat Oleh:",-1)),e("p",ra,r(i.value.user_id===l(c).id?"Saya":i.value.user?.name||"Partner"),1)])])])):w("",!0)])]),_:1},8,["show","description","confirm-loading"])])])]),_:1}))}},ba=xe(la,[["__scopeId","data-v-fe5d678a"]]);export{ba as default};
