import{A as je}from"./AppLayout-B-FfRgLz.js";import{r as h,p as c,M as ee,o as pe,c as x,g as p,d as e,l as b,w as v,f as g,z as u,b as w,F as L,y as q,k as ge,s as P,I as Ie,t as Me,x as d,E as Z,D as Be}from"./vendor-_1bMFsGO.js";import{B as Ee}from"./BaseTable-C_vaDzBU.js";import{B as I,S as B,a as ce}from"./SelectInput--H5tB_dZ.js";import{_ as Ue}from"./TextAreaInput-CuZUnRRb.js";import{_ as te}from"./AccountInput-BwCpK7sc.js";import{_ as ae}from"./DateInput-BCLoSeid.js";import{_ as Ke}from"./app-DzK-MRpb.js";/* empty css            */const Oe={class:"bg-white rounded-xl md:rounded-2xl shadow-sm border border-gray-100 p-3 md:p-4 mb-4"},Re={class:"flex items-center justify-between mb-3 md:mb-4"},Je={class:"flex items-center gap-1 md:gap-2"},ze={key:0,class:"space-y-4 md:space-y-6"},Ne={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6"},He={class:"space-y-3 md:space-y-4"},Ge={class:"space-y-1 md:space-y-2"},Le={class:"grid grid-cols-2 gap-2 md:gap-3"},qe={class:"space-y-1 md:space-y-2"},Ye={class:"grid grid-cols-3 gap-1 md:gap-2"},Qe={class:"space-y-3 md:space-y-4"},We={key:0,class:"space-y-1 md:space-y-2"},Xe={class:"grid grid-cols-3 gap-1 md:gap-2"},Ze=["onClick"],et={class:"text-sm md:text-base mb-0.5 md:mb-1"},tt={class:"text-xs"},at={key:1,class:"space-y-1 md:space-y-2"},st={class:"grid grid-cols-2 gap-2 md:gap-3"},nt={class:"space-y-1"},lt={class:"space-y-1"},ot={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4"},rt={key:0,class:"space-y-1 md:space-y-2"},it={key:1,class:"space-y-1 md:space-y-2"},dt={key:2,class:"space-y-1 md:space-y-2"},ut={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4"},mt={class:"space-y-1 md:space-y-2"},ct={key:2,class:"pt-3 md:pt-4 border-t border-gray-200"},pt={class:"flex flex-wrap gap-1 md:gap-2"},gt={class:"text-xs"},xt=["onClick"],vt={class:"flex justify-between items-center pt-2"},bt={class:"text-xs md:text-sm text-gray-500"},yt={key:0,class:"text-blue-600 font-medium"},ft={key:1},kt={class:"flex gap-1 md:gap-2"},_t={key:1,class:"text-center py-1 md:py-2"},ht={class:"inline-flex items-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-gray-50 rounded-full"},wt={class:"text-xs md:text-sm text-gray-600"},Tt={key:0,class:"font-medium text-blue-600"},$t={class:"text-gray-500"},St={key:1,class:"text-gray-500"},Ct={__name:"BaseFilter",props:{showTypeFilter:{type:Boolean,default:!0},showAccountFilter:{type:Boolean,default:!0},showCategoryFilter:{type:Boolean,default:!0},showUserFilter:{type:Boolean,default:!0},showStatusFilter:{type:Boolean,default:!1},showAmountFilter:{type:Boolean,default:!0},accounts:{type:Array,default:()=>[]},categories:{type:Array,default:()=>[]},users:{type:Array,default:()=>[]},initialFilters:{type:Object,default:()=>({})}},emits:["filters-change","filters-reset"],setup(T,{emit:O}){const f=T,R=O,D=h(!1),o=h({start_date:"",end_date:"",type:"",account_id:"",category_id:"",user_id:"",status:"",min_amount:"",max_amount:"",...f.initialFilters}),S=h(""),_=c(()=>new Date().toISOString().split("T")[0]),M=c(()=>[{label:"Hari Ini",value:"today",getRange:()=>({start:_.value,end:_.value})},{label:"Minggu Ini",value:"this_week",getRange:()=>{const r=new Date;return r.setDate(r.getDate()-r.getDay()),{start:r.toISOString().split("T")[0],end:_.value}}},{label:"Bulan Ini",value:"this_month",getRange:()=>{const r=new Date;return r.setDate(1),{start:r.toISOString().split("T")[0],end:_.value}}},{label:"Bulan Lalu",value:"last_month",getRange:()=>{const r=new Date;r.setMonth(r.getMonth()-1),r.setDate(1);const s=new Date(r.getFullYear(),r.getMonth()+1,0);return{start:r.toISOString().split("T")[0],end:s.toISOString().split("T")[0]}}},{label:"3 Bulan",value:"last_3_months",getRange:()=>{const r=new Date,s=new Date;return s.setMonth(s.getMonth()-3),{start:s.toISOString().split("T")[0],end:r.toISOString().split("T")[0]}}}]),V=c(()=>[{value:"",label:"Semua Jenis"},{value:"income",label:"💰 Pemasukan"},{value:"expense",label:"💸 Pengeluaran"},{value:"savings",label:"🏦 Tabungan"}]),A=c(()=>[{value:"",label:"Semua Akun"},...f.accounts.map(r=>({value:r.id,label:`${r.name} ${r.type==="joint"?"👥":"👤"}`}))]),F=c(()=>[{value:"",label:"Semua Kategori"},...f.categories.map(r=>({value:r.id,label:`${r.name} ${r.type==="joint"?"👥":"👤"}`}))]),C=c(()=>[{value:"",label:"Semua User"},...f.users.map(r=>({value:r.id,label:r.name}))]),k=c(()=>[{value:"",label:"Semua Status"},{value:"active",label:"🟢 Aktif"},{value:"inactive",label:"🔴 Nonaktif"}]),y=c(()=>Object.keys(o.value).some(r=>{const s=o.value[r];return s!==""&&s!==null&&s!==void 0})),m=c(()=>{const r=[];if(o.value.start_date&&o.value.end_date&&r.push({key:"date_range",label:`📅 ${o.value.start_date} s/d ${o.value.end_date}`}),o.value.type){const s=V.value.find(i=>i.value===o.value.type)?.label||o.value.type;r.push({key:"type",label:s.split(" ")[1]})}if(o.value.account_id){const s=f.accounts.find(i=>i.id==o.value.account_id);r.push({key:"account_id",label:`🏦 ${s?.name||"Akun"}`})}if(o.value.category_id){const s=f.categories.find(i=>i.id==o.value.category_id);r.push({key:"category_id",label:`📁 ${s?.name||"Kategori"}`})}if(o.value.user_id){const s=f.users.find(i=>i.id==o.value.user_id);r.push({key:"user_id",label:`👤 ${s?.name||"User"}`})}return o.value.min_amount&&r.push({key:"min_amount",label:`💰 Min: Rp ${parseInt(o.value.min_amount).toLocaleString("id-ID")}`}),o.value.max_amount&&r.push({key:"max_amount",label:`💰 Max: Rp ${parseInt(o.value.max_amount).toLocaleString("id-ID")}`}),r}),j=c(()=>{if(!y.value)return"";const r=[];return o.value.start_date&&o.value.end_date&&r.push("Periode"),o.value.type&&r.push("Jenis"),o.value.account_id&&r.push("Akun"),o.value.category_id&&r.push("Kategori"),(o.value.min_amount||o.value.max_amount)&&r.push("Jumlah"),r.join(", ")}),J=r=>{const s=r.getRange();o.value.start_date=s.start,o.value.end_date=s.end,S.value=r.value,$()},E=()=>{o.value={start_date:"",end_date:"",type:"",account_id:"",category_id:"",user_id:"",status:"",min_amount:"",max_amount:""},S.value="",R("filters-reset",o.value)},z=r=>{r==="date_range"?(o.value.start_date="",o.value.end_date="",S.value=""):o.value[r]="",$()},$=()=>{const r=Object.fromEntries(Object.entries(o.value).filter(([s,i])=>i!==""&&i!==null&&i!==void 0));R("filters-change",r)};return ee(()=>f.initialFilters,r=>{o.value={...o.value,...r}},{deep:!0}),pe(()=>{$()}),(r,s)=>(p(),x("div",Oe,[e("div",Re,[s[11]||(s[11]=e("div",{class:"flex items-center gap-2 md:gap-3"},[e("span",{class:"text-xl md:text-2xl"},"🔍"),e("div",null,[e("h3",{class:"font-semibold text-gray-800 text-sm md:text-base"},"Filter Data"),e("p",{class:"text-xs md:text-sm text-gray-500"},"Saring data berdasarkan kriteria")])],-1)),e("div",Je,[b(I,{onClick:s[0]||(s[0]=i=>D.value=!D.value),variant:"secondary",size:"xs",class:"text-xs"},{icon:v(()=>[g(u(D.value?"📕":"📖"),1)]),default:v(()=>[g(" "+u(D.value?"Sembunyikan":"Tampilkan"),1)]),_:1}),b(I,{onClick:E,variant:"outline",size:"xs",disabled:!y.value,class:"text-xs"},{icon:v(()=>[...s[9]||(s[9]=[g("🔄",-1)])]),default:v(()=>[s[10]||(s[10]=g(" Reset ",-1))]),_:1},8,["disabled"])])]),D.value?(p(),x("div",ze,[e("div",Ne,[e("div",He,[e("div",Ge,[s[12]||(s[12]=e("label",{class:"block text-xs md:text-sm font-medium text-gray-700"},[e("span",{class:"flex items-center gap-1 md:gap-2"},[e("span",{class:"text-sm md:text-base"},"📅"),g(" Periode Tanggal ")])],-1)),e("div",Le,[b(ae,{modelValue:o.value.start_date,"onUpdate:modelValue":[s[1]||(s[1]=i=>o.value.start_date=i),$],placeholder:"Dari Tanggal",max:o.value.end_date||_.value},null,8,["modelValue","max"]),b(ae,{modelValue:o.value.end_date,"onUpdate:modelValue":[s[2]||(s[2]=i=>o.value.end_date=i),$],placeholder:"Sampai Tanggal",min:o.value.start_date,max:_.value},null,8,["modelValue","min","max"])])]),e("div",qe,[s[13]||(s[13]=e("label",{class:"block text-xs md:text-sm font-medium text-gray-700"},[e("span",{class:"flex items-center gap-1 md:gap-2"},[e("span",{class:"text-sm md:text-base"},"⚡"),g(" Periode Cepat ")])],-1)),e("div",Ye,[(p(!0),x(L,null,q(M.value,i=>(p(),ge(I,{key:i.value,onClick:N=>J(i),variant:"outline",size:"xs",class:P(["justify-center text-xs py-1.5 md:py-2",{"bg-blue-100 border-blue-300 text-blue-700":S.value===i.value}])},{default:v(()=>[g(u(i.label),1)]),_:2},1032,["onClick","class"]))),128))])])]),e("div",Qe,[T.showTypeFilter?(p(),x("div",We,[s[14]||(s[14]=e("label",{class:"block text-xs md:text-sm font-medium text-gray-700"},[e("span",{class:"flex items-center gap-1 md:gap-2"},[e("span",{class:"text-sm md:text-base"},"📊"),g(" Jenis Transaksi ")])],-1)),e("div",Xe,[(p(!0),x(L,null,q(V.value.filter(i=>i.value!==""),i=>(p(),x("button",{key:i.value,onClick:N=>o.value.type=o.value.type===i.value?"":i.value,class:P(["p-1.5 md:p-2 rounded-lg border text-center transition-all font-medium text-xs",o.value.type===i.value?(i.value==="income"?"bg-green-100 text-green-700 border-green-400":i.value==="expense"?"bg-red-100 text-red-700 border-red-400":"bg-blue-100 text-blue-700 border-blue-400")+" scale-105 shadow-sm":"bg-white border-gray-200 text-gray-500 hover:scale-102 hover:border-gray-300"])},[e("div",et,u(i.label.split(" ")[0]),1),e("div",tt,u(i.label.split(" ")[1]),1)],10,Ze))),128))])])):w("",!0),T.showAmountFilter?(p(),x("div",at,[s[17]||(s[17]=e("label",{class:"block text-xs md:text-sm font-medium text-gray-700"},[e("span",{class:"flex items-center gap-1 md:gap-2"},[e("span",{class:"text-sm md:text-base"},"💰"),g(" Rentang Jumlah ")])],-1)),e("div",st,[e("div",nt,[b(te,{modelValue:o.value.min_amount,"onUpdate:modelValue":[s[3]||(s[3]=i=>o.value.min_amount=i),$],placeholder:"Minimum","account-type":"account_number"},null,8,["modelValue"]),s[15]||(s[15]=e("p",{class:"text-xs text-gray-500 text-center"},"Min",-1))]),e("div",lt,[b(te,{modelValue:o.value.max_amount,"onUpdate:modelValue":[s[4]||(s[4]=i=>o.value.max_amount=i),$],placeholder:"Maksimum","account-type":"account_number"},null,8,["modelValue"]),s[16]||(s[16]=e("p",{class:"text-xs text-gray-500 text-center"},"Max",-1))])])])):w("",!0)])]),T.showAccountFilter||T.showCategoryFilter||T.showUserFilter?(p(),x("div",ot,[T.showAccountFilter&&T.accounts.length?(p(),x("div",rt,[s[18]||(s[18]=e("label",{class:"block text-xs md:text-sm font-medium text-gray-700"},[e("span",{class:"flex items-center gap-1 md:gap-2"},[e("span",{class:"text-sm md:text-base"},"🏦"),g(" Akun ")])],-1)),b(B,{modelValue:o.value.account_id,"onUpdate:modelValue":[s[5]||(s[5]=i=>o.value.account_id=i),$],options:A.value,placeholder:"Pilih Akun"},null,8,["modelValue","options"])])):w("",!0),T.showCategoryFilter&&T.categories.length?(p(),x("div",it,[s[19]||(s[19]=e("label",{class:"block text-xs md:text-sm font-medium text-gray-700"},[e("span",{class:"flex items-center gap-1 md:gap-2"},[e("span",{class:"text-sm md:text-base"},"📁"),g(" Kategori ")])],-1)),b(B,{modelValue:o.value.category_id,"onUpdate:modelValue":[s[6]||(s[6]=i=>o.value.category_id=i),$],options:F.value,placeholder:"Pilih Kategori"},null,8,["modelValue","options"])])):w("",!0),T.showUserFilter?(p(),x("div",dt,[s[20]||(s[20]=e("label",{class:"block text-xs md:text-sm font-medium text-gray-700"},[e("span",{class:"flex items-center gap-1 md:gap-2"},[e("span",{class:"text-sm md:text-base"},"👤"),g(" Dicatat Oleh ")])],-1)),b(B,{modelValue:o.value.user_id,"onUpdate:modelValue":[s[7]||(s[7]=i=>o.value.user_id=i),$],options:C.value,placeholder:"Pilih User"},null,8,["modelValue","options"])])):w("",!0)])):w("",!0),T.showStatusFilter?(p(),x("div",ut,[e("div",mt,[s[21]||(s[21]=e("label",{class:"block text-xs md:text-sm font-medium text-gray-700"},[e("span",{class:"flex items-center gap-1 md:gap-2"},[e("span",{class:"text-sm md:text-base"},"🟢"),g(" Status ")])],-1)),b(B,{modelValue:o.value.status,"onUpdate:modelValue":[s[8]||(s[8]=i=>o.value.status=i),$],options:k.value,placeholder:"Pilih Status"},null,8,["modelValue","options"])])])):w("",!0),y.value?(p(),x("div",ct,[s[22]||(s[22]=e("div",{class:"flex items-center gap-1 md:gap-2 mb-2 md:mb-3"},[e("span",{class:"text-xs md:text-sm font-medium text-gray-700 flex items-center gap-1 md:gap-2"},[e("span",{class:"text-sm md:text-base"},"🎯"),g(" Filter Aktif: ")])],-1)),e("div",pt,[(p(!0),x(L,null,q(m.value,i=>(p(),x("span",{key:i.key,class:"inline-flex items-center gap-1 md:gap-2 px-2 md:px-3 py-1 md:py-1.5 rounded-full text-xs font-medium bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 text-blue-800 shadow-sm"},[e("span",gt,u(i.label),1),e("button",{onClick:N=>z(i.key),class:"hover:text-blue-600 transition-colors text-xs font-bold",title:"Hapus filter"}," × ",8,xt)]))),128))])])):w("",!0),e("div",vt,[e("div",bt,[y.value?(p(),x("span",yt," 🔍 "+u(m.value.length)+" filter aktif ",1)):(p(),x("span",ft," 📝 Tidak ada filter aktif "))]),e("div",kt,[b(I,{onClick:E,variant:"outline",size:"xs",disabled:!y.value,class:"text-xs"},{icon:v(()=>[...s[23]||(s[23]=[g("🗑️",-1)])]),default:v(()=>[s[24]||(s[24]=g(" Hapus Semua ",-1))]),_:1},8,["disabled"])])])])):(p(),x("div",_t,[e("div",ht,[e("span",wt,[y.value?(p(),x("span",Tt,[g(" 🔍 "+u(m.value.length)+" filter - ",1),e("span",$t,u(j.value),1)])):(p(),x("span",St," Klik untuk menyaring data "))])])]))]))}},Pt={class:"flex flex-col md:flex-row md:items-center justify-between gap-2 md:gap-0"},At={key:0,class:"mt-2"},Dt={class:"text-xs md:text-sm text-blue-600 bg-blue-50 px-2 md:px-3 py-1 rounded-full"},Ft={class:"py-2 min-h-screen relative overflow-hidden"},Vt={class:"w-full px-3 sm:px-4 lg:px-6 relative z-10"},jt={class:"flex items-center justify-between"},It={class:"flex items-center gap-2 md:gap-3"},Mt={class:"text-lg md:text-xl"},Bt={class:"font-medium text-sm md:text-base"},Et={class:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4"},Ut={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-green-100"},Kt={class:"text-center"},Ot={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},Rt={class:"text-xs text-gray-500 mt-1"},Jt={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-red-100"},zt={class:"text-center"},Nt={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},Ht={class:"text-xs text-gray-500 mt-1"},Gt={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-blue-100"},Lt={class:"text-center"},qt={class:"bg-white/90 backdrop-blur-md shadow-lg rounded-xl md:rounded-2xl p-3 md:p-4 hover:scale-[1.02] transition transform border border-purple-100"},Yt={class:"text-center"},Qt={class:"text-base md:text-lg lg:text-xl font-bold text-gray-800 mb-1"},Wt={class:"grid grid-cols-3 md:grid-cols-3 gap-2 mb-4"},Xt={class:"flex items-center gap-2"},Zt={class:"text-base md:text-lg"},ea={class:"font-medium text-gray-700 text-xs md:text-sm"},ta={class:"flex items-center gap-2"},aa={class:"text-base md:text-lg"},sa={class:"flex items-center gap-2"},na={class:"font-medium text-gray-700 text-xs md:text-sm"},la={class:"flex items-center gap-2"},oa={class:"font-medium text-gray-700 text-xs md:text-sm"},ra={class:"flex items-center gap-2"},ia={class:"font-medium text-gray-700 text-xs md:text-sm"},da={class:"flex items-center gap-2"},ua={class:"text-base md:text-lg"},ma={key:1,class:"text-center mt-6"},ca={class:"bg-white/80 backdrop-blur-md rounded-xl md:rounded-2xl shadow-lg p-6 md:p-8 border border-gray-100"},pa={class:"space-y-3 md:space-y-4 max-h-[50vh] md:max-h-[60vh] overflow-y-auto pr-2"},ga={class:"grid grid-cols-3 gap-2"},xa=["onClick"],va={class:"text-base md:text-lg mb-1"},ba={key:0,class:"mt-2 text-sm text-red-500"},ya={class:"text-xs md:text-sm flex items-start gap-2"},fa={class:"text-base md:text-lg mt-0.5"},ka={class:"block"},_a={key:0,class:"p-2 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl md:rounded-2xl"},ha={class:"space-y-3 md:space-y-4"},wa={key:0,class:"p-3 md:p-4 bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200 rounded-xl md:rounded-2xl"},Ta={class:"grid grid-cols-1 xs:grid-cols-2 gap-3 md:gap-4 text-xs md:text-sm"},$a={class:"font-medium text-gray-800 truncate"},Sa={class:"font-medium text-gray-800"},Ca={class:"font-medium text-gray-800"},Pa={class:"font-medium text-gray-800"},Aa={class:"font-medium text-gray-800"},Da={class:"xs:col-span-2"},Fa={class:"font-medium text-gray-800"},Va={__name:"Index",setup(T){const O=Ie(),f=O.props.auth.user,R=f?.partner?.name??"Pasangan",D=`${f?.name??""} 💕 ${R}`,o=h([]),S=h([]),_=h([]),M=h(!1),V=h(!1),A=h(!1),F=h(!1),C=h(null),k=h(null),y=h(null),m=h({}),j=c(()=>Object.keys(m.value).length===0?o.value:o.value.filter(a=>{if(m.value.start_date&&m.value.end_date){const t=a.transaction_date.split("T")[0];if(t<m.value.start_date||t>m.value.end_date)return!1}return!(m.value.type&&a.type!==m.value.type||m.value.account_id&&a.account_id!=m.value.account_id||m.value.category_id&&a.category_id!=m.value.category_id||m.value.user_id&&a.user_id!=m.value.user_id||m.value.min_amount&&a.amount<parseFloat(m.value.min_amount)||m.value.max_amount&&a.amount>parseFloat(m.value.max_amount))})),J=c(()=>j.value.filter(a=>a.type==="income")),E=c(()=>j.value.filter(a=>a.type==="expense")),z=c(()=>j.value.filter(a=>a.type==="savings")),$=c(()=>j.value.filter(a=>a.user_id===f.id)),r=c(()=>J.value.reduce((a,t)=>a+parseFloat(t.amount),0)),s=c(()=>E.value.reduce((a,t)=>a+parseFloat(t.amount),0)),i=c(()=>z.value.reduce((a,t)=>a+parseFloat(t.amount),0)),N=c(()=>r.value-s.value),se=c(()=>j.value),xe=c(()=>J.value),ve=c(()=>E.value);c(()=>z.value);const be=c(()=>$.value),ye=c(()=>r.value),fe=c(()=>s.value);c(()=>i.value);const U=c(()=>N.value),ke=c(()=>Object.keys(m.value).length>0),ne=c(()=>{if(!ke.value)return"";const a=[];if(m.value.start_date&&m.value.end_date&&a.push(`Periode: ${m.value.start_date} s/d ${m.value.end_date}`),m.value.type){const t={income:"Pemasukan",expense:"Pengeluaran",savings:"Tabungan"}[m.value.type]||m.value.type;a.push(`Jenis: ${t}`)}if(m.value.account_id){const t=S.value.find(n=>n.id==m.value.account_id);a.push(`Akun: ${t?.name||"Terpilih"}`)}if(m.value.category_id){const t=_.value.find(n=>n.id==m.value.category_id);a.push(`Kategori: ${t?.name||"Terpilih"}`)}return a.join(" • ")}),_e=a=>{m.value=a},he=()=>{m.value={}},we=async()=>{await Promise.all([Y(),Q()])};ee(()=>O.props.flash,a=>{(a.success||a.error)&&(y.value={message:a.success||a.error,type:a.type||(a.success?"success":"error")},setTimeout(()=>{y.value=null},5e3))},{immediate:!0});const l=Me({type:"expense",account_id:"",category_id:"",amount:0,description:"",transaction_date:new Date().toISOString().split("T")[0]}),Te=[{value:"income",label:"💰 Pemasukan"},{value:"expense",label:"💸 Pengeluaran"},{value:"savings",label:"🏦 Tabungan"}],$e=[{key:"type",label:"Jenis",type:"badge",icon:"📊",sortable:!0,badgeVariant:"romantic"},{key:"amount",label:"Jumlah",icon:"💰",sortable:!0,type:"currency"},{key:"account.name",label:"Akun",icon:"🏦",sortable:!0},{key:"category.name",label:"Kategori",icon:"📁",sortable:!0},{key:"description",label:"Keterangan",icon:"📝",class:"max-w-xs"},{key:"transaction_date",label:"Tanggal",icon:"📅",sortable:!0,type:"date"},{key:"user.name",label:"Dicatat Oleh",icon:"👤",sortable:!0}],Se=c(()=>({income:"bg-green-50 border-green-200 text-green-800",expense:"bg-red-50 border-red-200 text-red-800",savings:"bg-blue-50 border-blue-200 text-blue-800"})[l.type]||"bg-gray-50 border-gray-200"),Ce=c(()=>({income:"💰",expense:"💸",savings:"🏦"})[l.type]||"📊"),Pe=c(()=>({income:"Pencatatan Pemasukan",expense:"Pencatatan Pengeluaran",savings:"Pencatatan Tabungan"})[l.type]||"Pencatatan Transaksi"),Ae=c(()=>({income:"Catat semua uang yang masuk ke akun kita. Contoh: Gaji, bonus, hadiah, dll.",expense:"Catat semua pengeluaran untuk memantau kebiasaan belanja kita berdua.",savings:"Pindahkan uang ke akun tabungan untuk tujuan masa depan kita."})[l.type]||"Catat transaksi keuangan kita."),H=async()=>{M.value=!0;try{const a=await axios.get(route("transactions.index"));o.value=a.data.transactions||a.data}catch(a){console.error("Error loading transactions:",a),y.value={message:"Gagal memuat data transaksi",type:"error"}}finally{M.value=!1}},Y=async()=>{try{const a=await axios.get(route("transactions.api.accounts"));S.value=a.data,console.log("Accounts loaded:",S.value)}catch(a){console.error("Error loading accounts:",a);try{const t=await axios.get("/api/accounts");S.value=t.data}catch(t){console.error("Fallback also failed:",t),y.value={message:"Gagal memuat data akun",type:"error"}}}},Q=async()=>{try{const a=await axios.get(route("transactions.api.categories"));_.value=a.data,console.log("All categories loaded:",_.value)}catch(a){console.error("Error loading categories:",a);try{const t=await axios.get("/api/categories");_.value=t.data}catch(t){console.error("Fallback also failed:",t),y.value={message:"Gagal memuat data kategori",type:"error"}}}},W=c(()=>{if(!_.value.length)return[];const a=l.type==="savings"?"savings":l.type;console.log("Filtering categories for budget type:",a),console.log("All categories:",_.value);const t=_.value.filter(n=>n.budget_type===a);return console.log("Filtered categories:",t),t});ee(()=>l.type,a=>{l.category_id="",console.log("Transaction type changed to:",a)});const X=async()=>{C.value=null,l.reset(),l.type="expense",l.transaction_date=new Date().toISOString().split("T")[0],A.value=!0,await Promise.all([Y(),Q()]),console.log("Create modal opened automatically")},le=async a=>{if(a.user_id!==f.id){y.value={message:"Anda hanya dapat mengedit transaksi yang Anda buat",type:"error"};return}C.value=a,l.type=a.type,l.account_id=a.account_id,l.category_id=a.category_id,l.amount=a.amount,l.description=a.description,l.transaction_date=a.transaction_date.split("T")[0],A.value=!0,await Promise.all([Y(),Q()]),setTimeout(()=>{console.log("Current category_id:",l.category_id),console.log("Available categories:",W.value)},100)},oe=a=>{if(a.user_id!==f.id){y.value={message:"Anda hanya dapat menghapus transaksi yang Anda buat",type:"error"};return}k.value=a,F.value=!0},De=()=>{if(console.log("Saving transaction:",l),!l.description.trim()){y.value={message:"Keterangan transaksi wajib diisi",type:"error"};return}C.value?l.put(route("transactions.update",C.value.id),{preserveScroll:!0,onSuccess:()=>{A.value=!1,H(),l.reset(),C.value=null},onError:a=>{console.error("Update error:",a),y.value={message:"Gagal memperbarui transaksi",type:"error"}}}):l.post(route("transactions.store"),{preserveScroll:!0,onSuccess:()=>{A.value=!1,H(),l.reset()},onError:a=>{console.error("Create error:",a),y.value={message:"Gagal mencatat transaksi",type:"error"}}})},Fe=()=>{k.value&&(V.value=!0,Be.delete(route("transactions.destroy",k.value.id),{preserveScroll:!0,onSuccess:()=>{F.value=!1,H(),k.value=null,V.value=!1},onError:a=>{console.error("Delete error:",a),F.value=!1,V.value=!1,y.value={message:"Gagal menghapus transaksi",type:"error"}}}))},Ve=()=>{A.value=!1,C.value=null,l.clearErrors(),l.reset(),l.type="expense",l.transaction_date=new Date().toISOString().split("T")[0]},re=a=>({income:"Pemasukan",expense:"Pengeluaran",savings:"Tabungan"})[a]||a,ie=a=>({income:"💰",expense:"💸",savings:"🏦"})[a]||"📊",K=(a,t)=>{const n=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a);return t==="income"?`+ ${n}`:t==="expense"?`- ${n}`:n},de=a=>new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),ue=a=>({income:"text-green-600",expense:"text-red-600",savings:"text-blue-600"})[a]||"text-gray-600",G=a=>a.user_id===f.id;return pe(()=>{H(),we(),setTimeout(()=>{X()},500)}),(a,t)=>(p(),ge(je,{title:"Catat Transaksi"},{header:v(()=>[e("div",Pt,[e("div",null,[e("h2",{class:"font-semibold text-xl md:text-2xl text-gray-800 leading-tight flex items-center gap-2"}," 💰 Catat Transaksi Keuangan "+u(D)),ne.value?(p(),x("div",At,[e("span",Dt," 🔍 Filter Aktif: "+u(ne.value),1)])):w("",!0)]),t[9]||(t[9]=e("span",{class:"text-xs md:text-sm text-gray-500 italic text-center md:text-right"}," Catat setiap pemasukan dan pengeluaran untuk keuangan yang lebih teratur 💞 ",-1))])]),default:v(()=>[e("div",Ft,[e("div",Vt,[y.value?(p(),x("div",{key:0,class:P(["mb-4 md:mb-6 p-3 md:p-4 rounded-xl md:rounded-2xl border backdrop-blur-sm transition-all duration-300",{"bg-green-50 border-green-200 text-green-800":y.value.type==="success","bg-red-50 border-red-200 text-red-800":y.value.type==="error"}])},[e("div",jt,[e("div",It,[e("span",Mt,u(y.value.type==="success"?"✅":"⚠️"),1),e("span",Bt,u(y.value.message),1)]),e("button",{onClick:t[0]||(t[0]=n=>y.value=null),class:"text-gray-500 hover:text-gray-700 transition-colors text-lg"}," ✕ ")])],2)):w("",!0),t[43]||(t[43]=e("div",{class:"text-center mb-4"},[e("h1",{class:"text-xl md:text-2xl lg:text-3xl font-extrabold text-rose-600 drop-shadow-md mb-2 md:mb-3"}," Catat Transaksi Keuangan "),e("p",{class:"text-gray-600 text-xs md:text-sm leading-relaxed px-2"},[g(" Pantau semua "),e("span",{class:"text-green-500 font-semibold"},"pemasukan"),g(", "),e("span",{class:"text-red-500 font-semibold"},"pengeluaran"),g(", dan "),e("span",{class:"text-blue-500 font-semibold"},"tabungan"),g(" kita berdua. Setiap transaksi adalah cerita perjalanan keuangan kita 💫 ")])],-1)),b(Ct,{accounts:S.value,categories:_.value,"initial-filters":m.value,onFiltersChange:_e,onFiltersReset:he},null,8,["accounts","categories","initial-filters"]),e("div",Et,[e("div",Ut,[e("div",Kt,[t[10]||(t[10]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-green-400 to-emerald-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"💰")],-1)),e("h3",Ot,u(K(ye.value,"income")),1),t[11]||(t[11]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Pemasukan",-1)),e("p",Rt,u(xe.value.length)+" transaksi",1)])]),e("div",Jt,[e("div",zt,[t[12]||(t[12]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-red-400 to-pink-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"💸")],-1)),e("h3",Nt,u(K(fe.value,"expense")),1),t[13]||(t[13]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Pengeluaran",-1)),e("p",Ht,u(ve.value.length)+" transaksi",1)])]),e("div",Gt,[e("div",Lt,[t[14]||(t[14]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"📊")],-1)),e("h3",{class:P(["text-base md:text-lg lg:text-xl font-bold mb-1",U.value>=0?"text-green-600":"text-red-600"])},u(K(Math.abs(U.value),U.value>=0?"income":"expense")),3),t[15]||(t[15]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Saldo Bersih",-1)),e("p",{class:P(["text-xs",U.value>=0?"text-green-500":"text-red-500"])},u(U.value>=0?"Surplus":"Defisit"),3)])]),e("div",qt,[e("div",Yt,[t[16]||(t[16]=e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-purple-400 to-pink-500 rounded-lg md:rounded-xl flex items-center justify-center mx-auto mb-2 md:mb-3 shadow-md"},[e("span",{class:"text-lg md:text-xl text-white"},"👤")],-1)),e("h3",Qt,u(be.value.length),1),t[17]||(t[17]=e("p",{class:"text-xs md:text-sm text-gray-600"},"Transaksi Saya",-1))])])]),e("div",Wt,[b(d(Z),{href:a.route("master-data.categories.index"),class:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg md:rounded-xl text-sm md:text-base bg-gradient-to-r from-rose-400 via-pink-400 to-pink-500 text-white font-semibold shadow-md hover:shadow-lg hover:from-rose-500 hover:to-pink-600 transition-all duration-300 ease-in-out transform hover:-translate-y-0.5 active:scale-95"},{default:v(()=>[...t[18]||(t[18]=[e("span",{class:"text-base md:text-lg"},"💗",-1),e("span",null,"Kategori",-1)])]),_:1},8,["href"]),b(d(Z),{href:a.route("master-data.accounts.index"),class:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg md:rounded-xl text-sm md:text-base bg-gradient-to-r from-pink-300 via-rose-400 to-rose-500 text-white font-semibold shadow-md hover:shadow-lg hover:from-pink-400 hover:to-rose-600 transition-all duration-300 ease-in-out transform hover:-translate-y-0.5 active:scale-95"},{default:v(()=>[...t[19]||(t[19]=[e("span",{class:"text-base md:text-lg"},"🌸",-1),e("span",null,"Akun",-1)])]),_:1},8,["href"]),b(d(Z),{href:a.route("budgets.index"),class:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg md:rounded-xl text-sm md:text-base bg-gradient-to-r from-pink-200 via-rose-300 to-rose-400 text-white font-semibold shadow-md hover:shadow-lg hover:from-pink-300 hover:to-rose-500 transition-all duration-300 ease-in-out transform hover:-translate-y-0.5 active:scale-95 animate-pulse"},{default:v(()=>[...t[20]||(t[20]=[e("span",{class:"text-base md:text-lg"},"💰",-1),e("span",null,"Kelola Anggaran",-1)])]),_:1},8,["href"])]),b(Ee,{title:"Data Transaksi",description:`Menampilkan ${se.value.length} dari ${o.value.length} transaksi`,columns:$e,data:se.value,loading:M.value,"show-actions":!0,pagination:!0,"items-per-page":10,onCreate:X,onEdit:le,onDelete:oe},{"column-type":v(({item:n})=>[e("div",Xt,[e("span",Zt,u(ie(n.type)),1),e("span",ea,u(re(n.type)),1)])]),"column-amount":v(({item:n})=>[e("div",ta,[e("span",aa,u(ie(n.type)),1),e("span",{class:P(["font-bold text-xs md:text-sm",ue(n.type)])},u(K(n.amount,n.type)),3)])]),"column-account.name":v(({item:n})=>[e("div",sa,[t[21]||(t[21]=e("span",{class:"text-base md:text-lg"},"🏦",-1)),e("span",na,u(n.account?.name),1)])]),"column-category.name":v(({item:n})=>[e("div",la,[t[22]||(t[22]=e("span",{class:"text-base md:text-lg"},"📁",-1)),e("span",oa,u(n.category?.name),1)])]),"column-transaction_date":v(({item:n})=>[e("div",ra,[t[23]||(t[23]=e("span",{class:"text-base md:text-lg"},"📅",-1)),e("span",ia,u(de(n.transaction_date)),1)])]),"column-user.name":v(({item:n})=>[e("div",da,[e("span",ua,u(n.user_id===d(f).id?"👤":"👥"),1),e("span",{class:P(["font-medium text-gray-700 text-xs md:text-sm",n.user_id===d(f).id?"text-blue-600":"text-green-600"])},u(n.user_id===d(f).id?"Saya":n.user?.name||"Partner"),3)])]),actions:v(({item:n})=>[b(I,{onClick:me=>le(n),variant:"secondary",size:"sm",class:"!px-2 !py-1 text-xs",disabled:!G(n),title:G(n)?"Edit transaksi":"Hanya dapat mengedit transaksi yang Anda buat"},{icon:v(()=>[...t[24]||(t[24]=[g("✏️",-1)])]),default:v(()=>[t[25]||(t[25]=e("span",{class:"hidden xs:inline"},"Edit",-1))]),_:1},8,["onClick","disabled","title"]),b(I,{onClick:me=>oe(n),variant:"danger",size:"sm",class:"!px-2 !py-1 text-xs",disabled:!G(n),title:G(n)?"Hapus transaksi":"Hanya dapat menghapus transaksi yang Anda buat"},{icon:v(()=>[...t[26]||(t[26]=[g("🗑️",-1)])]),default:v(()=>[t[27]||(t[27]=e("span",{class:"hidden xs:inline"},"Hapus",-1))]),_:1},8,["onClick","disabled","title"])]),_:1},8,["description","data","loading"]),o.value.length===0&&!M.value?(p(),x("div",ma,[e("div",ca,[t[30]||(t[30]=e("div",{class:"text-4xl md:text-6xl mb-4"},"💰",-1)),t[31]||(t[31]=e("h3",{class:"text-lg md:text-xl font-bold text-gray-800 mb-2"},"Belum ada transaksi",-1)),e("p",{class:"text-gray-600 mb-6 text-sm md:text-base max-w-md mx-auto"}," Mulai dengan mencatat transaksi pertama untuk melacak keuangan "+u(D)),b(I,{onClick:X,class:"px-4 py-2 md:px-6 md:py-3 text-sm md:text-base"},{icon:v(()=>[...t[28]||(t[28]=[g("➕",-1)])]),default:v(()=>[t[29]||(t[29]=g(" Catat Transaksi Pertama ",-1))]),_:1})])])):w("",!0),b(ce,{show:A.value,"onUpdate:show":t[6]||(t[6]=n=>A.value=n),title:C.value?"Edit Transaksi":"Catat Transaksi Baru",description:C.value?"Perbarui informasi transaksi keuangan kita":"Catat transaksi baru untuk melacak keuangan bersama",icon:C.value?"✏️":"➕","confirm-text":C.value?"Perbarui":"Simpan","confirm-loading":d(l).processing,onConfirm:De,onClose:Ve,size:"lg"},{default:v(()=>[e("div",pa,[e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2 md:mb-3 flex items-center gap-2"},[e("span",{class:"text-blue-400 text-base md:text-lg"},"📊"),g(" Jenis Transaksi "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ga,[(p(),x(L,null,q(Te,n=>e("button",{key:n.value,onClick:me=>d(l).type=n.value,class:P(["p-2 md:p-3 rounded-lg md:rounded-xl border-2 text-center transition-all font-medium text-xs md:text-sm",d(l).type===n.value?(n.value==="income"?"bg-green-100 text-green-700 border-green-400":n.value==="expense"?"bg-red-100 text-red-700 border-red-400":"bg-blue-100 text-blue-700 border-blue-400")+" scale-105 shadow-md":"bg-white border-gray-200 text-gray-500 hover:scale-102 hover:border-gray-300"])},[e("div",va,u(n.icon),1),e("div",null,u(n.label.replace("💰 ","").replace("💸 ","").replace("🏦 ","")),1)],10,xa)),64))]),d(l).errors.type?(p(),x("p",ba,u(d(l).errors.type),1)):w("",!0)]),b(B,{modelValue:d(l).account_id,"onUpdate:modelValue":t[1]||(t[1]=n=>d(l).account_id=n),label:d(l).type==="income"||d(l).type==="savings"?"Akun Penerima":"Akun Sumber",placeholder:d(l).type==="income"||d(l).type==="savings"?"Pilih akun penerima":"Pilih akun sumber",options:S.value.map(n=>({value:n.id,label:n.name+(n.type==="joint"?" 👥":" 👤")})),error:d(l).errors.account_id,icon:"🏦",required:"",disabled:d(l).processing||S.value.length===0},null,8,["modelValue","label","placeholder","options","error","disabled"]),b(B,{modelValue:d(l).category_id,"onUpdate:modelValue":t[2]||(t[2]=n=>d(l).category_id=n),label:d(l).type==="income"?"Kategori Pemasukan":d(l).type==="savings"?"Tujuan Tabungan":"Kategori Pengeluaran",placeholder:d(l).type==="income"?"Pilih kategori pemasukan":d(l).type==="savings"?"Pilih tujuan tabungan":"Pilih kategori pengeluaran",options:W.value.map(n=>({value:n.id,label:n.name+(n.type==="joint"?" 👥":" 👤")})),error:d(l).errors.category_id,icon:"📁",required:"",disabled:d(l).processing||W.value.length===0},null,8,["modelValue","label","placeholder","options","error","disabled"]),b(te,{modelValue:d(l).amount,"onUpdate:modelValue":t[3]||(t[3]=n=>d(l).amount=n),label:"Jumlah",placeholder:d(l).type==="income"?"Contoh: 5000000":d(l).type==="savings"?"Contoh: 1000000":"Contoh: 150000",error:d(l).errors.amount,icon:"💰","account-type":"account_number",required:"",disabled:d(l).processing},null,8,["modelValue","placeholder","error","disabled"]),b(Ue,{modelValue:d(l).description,"onUpdate:modelValue":t[4]||(t[4]=n=>d(l).description=n),label:"Keterangan",placeholder:d(l).type==="income"?"Contoh: Gaji bulan Januari, Bonus project...":d(l).type==="savings"?"Contoh: Tabungan rumah, Dana liburan...":"Contoh: Belanja bulanan, Bayar listrik...",error:d(l).errors.description,icon:"📝",rows:3,"show-counter":!0,"max-length":255,required:"",disabled:d(l).processing},null,8,["modelValue","placeholder","error","disabled"]),b(ae,{modelValue:d(l).transaction_date,"onUpdate:modelValue":t[5]||(t[5]=n=>d(l).transaction_date=n),label:"Tanggal Transaksi",error:d(l).errors.transaction_date,icon:"📅",required:"",disabled:d(l).processing},null,8,["modelValue","error","disabled"]),e("div",{class:P(["p-3 md:p-4 rounded-xl md:rounded-2xl border",Se.value])},[e("p",ya,[e("span",fa,u(Ce.value),1),e("span",null,[e("strong",ka,u(Pe.value),1),g(" "+u(Ae.value),1)])])],2),d(l).hasErrors?(p(),x("div",_a,[...t[33]||(t[33]=[e("p",{class:"text-xs md:text-sm text-red-600 flex items-center gap-2"},[e("span",null,"⚠️"),g(" Terdapat kesalahan dalam pengisian form. Silakan periksa kembali input Anda. ")],-1)])])):w("",!0)])]),_:1},8,["show","title","description","icon","confirm-text","confirm-loading"]),b(ce,{show:F.value,"onUpdate:show":t[7]||(t[7]=n=>F.value=n),title:"Hapus Transaksi",description:k.value?`Apakah Anda yakin ingin menghapus transaksi ${k.value.description}?`:"Apakah Anda yakin ingin menghapus transaksi ini?",icon:"🗑️","confirm-text":"Hapus","cancel-text":"Batal","confirm-variant":"danger","confirm-loading":V.value,onConfirm:Fe,onClose:t[8]||(t[8]=n=>F.value=!1)},{default:v(()=>[e("div",ha,[t[42]||(t[42]=e("div",{class:"p-3 md:p-4 bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-xl md:rounded-2xl"},[e("p",{class:"text-xs md:text-sm text-red-600 flex items-start gap-2"},[e("span",{class:"text-base md:text-lg mt-0.5"},"⚠️"),e("span",null,[e("strong",{class:"block"},"Tindakan ini tidak dapat dibatalkan!"),g(" Transaksi yang dihapus akan mempengaruhi saldo akun dan laporan keuangan. ")])])],-1)),k.value?(p(),x("div",wa,[t[41]||(t[41]=e("h4",{class:"font-semibold text-gray-800 text-sm md:text-base mb-2"},"Detail Transaksi:",-1)),e("div",Ta,[e("div",null,[t[34]||(t[34]=e("span",{class:"text-gray-600"},"Jenis:",-1)),e("p",$a,u(re(k.value.type)),1)]),e("div",null,[t[35]||(t[35]=e("span",{class:"text-gray-600"},"Jumlah:",-1)),e("p",{class:P(["font-bold",ue(k.value.type)])},u(K(k.value.amount,k.value.type)),3)]),e("div",null,[t[36]||(t[36]=e("span",{class:"text-gray-600"},"Akun:",-1)),e("p",Sa,u(k.value.account?.name),1)]),e("div",null,[t[37]||(t[37]=e("span",{class:"text-gray-600"},"Kategori:",-1)),e("p",Ca,u(k.value.category?.name),1)]),e("div",null,[t[38]||(t[38]=e("span",{class:"text-gray-600"},"Tanggal:",-1)),e("p",Pa,u(de(k.value.transaction_date)),1)]),e("div",null,[t[39]||(t[39]=e("span",{class:"text-gray-600"},"Dicatat Oleh:",-1)),e("p",Aa,u(k.value.user_id===d(f).id?"Saya":k.value.user?.name||"Partner"),1)]),e("div",Da,[t[40]||(t[40]=e("span",{class:"text-gray-600"},"Keterangan:",-1)),e("p",Fa,u(k.value.description),1)])])])):w("",!0)])]),_:1},8,["show","description","confirm-loading"])])])]),_:1}))}},Ja=Ke(Va,[["__scopeId","data-v-b87b3fe1"]]);export{Ja as default};
